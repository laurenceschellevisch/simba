
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Simba 1.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="None" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="#">Simba 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="welcome-to-the-simba-documentation">
<h1>Welcome to the Simba documentation!<a class="headerlink" href="#welcome-to-the-simba-documentation" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Welcome to the Documentation for the Simba project.
The documentation is actively being worked on and somewhat incomplete.</p>
</div>
<p>This documentation aims to provide information on just about anything
there is to know about Simba.</p>
<p>Starting points are <a class="reference internal" href="index.html#whatis"><em>What Is Simba?</em></a>, <a class="reference internal" href="index.html#gettingstarted"><em>Getting Started with Simba</em></a> and the <a class="reference internal" href="index.html#scriptref"><em>Scripting Reference</em></a></p>
<p>Want to help out with the documentation? See <a class="reference internal" href="index.html#docdoc"><em>Documentation Documentation</em></a>.</p>
<p>Simba is a program used to repeat certain (complicated) tasks. Typically these
tasks involve using the mouse and keyboard. Simba is programmable, which means
you can design your own logic and steps that Simba will follow, based upon
certain input or as a reaction to a certain action.</p>
<p>Simba is created by the SRL community, fully open source and actively
maintained.</p>
<p>For community forums see <a class="reference external" href="http://villavu.com/">http://villavu.com/</a></p>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<span id="document-whatis"></span><div class="section" id="what-is-simba">
<span id="whatis"></span><h2>What Is Simba?<a class="headerlink" href="#what-is-simba" title="Permalink to this headline">¶</a></h2>
<p>Simba is a program used to repeat certain (complicated) tasks. Typically these
tasks involve using the mouse and keyboard. Simba is programmable, which means
you can design your own logic and steps that Simba will follow, based upon
certain input.</p>
<p>This &#8220;input&#8221; can vary greatly; from data in files to colors and text on the screen.</p>
<dl class="docutils">
<dt>Simba can:</dt>
<dd><ul class="first last simple">
<li>Find and read colours on the screen.</li>
<li>Click or move the mouse to a specific position on the screen. Typically
this is the position of a found color or bitmap.</li>
<li>Read text on the screen and turn it into actual text. (Optical Character
Recognition)</li>
<li>Capture and analyse images on the screen.</li>
<li>Read and write files.</li>
<li>Connect to the internet to read websites and post data to them.</li>
<li>Run pascal programs for you. If you&#8217;re a bit creative you can have a lot
of fun stuff with Simba, you could even make a game in it!</li>
</ul>
</dd>
</dl>
<p>and more. Start now by <a class="reference internal" href="index.html#installingsimba"><em>Installing simba</em></a>.</p>
<p>Currently Simba is still in its beta stages; this includes the documentation.
You will probably notice some parts of the documentation aren&#8217;t finished or are just
plain missing.</p>
<p>Simba is being updated almost every day. To see changes as they are added, view
<a class="reference external" href="https://github.com/MerlijnWajer/Simba">https://github.com/MerlijnWajer/Simba</a>.</p>
<p>If you want to know more about Simba, see <a class="reference internal" href="index.html#whysimba"><em>Why Simba?</em></a></p>
</div>
<span id="document-whysimba"></span><div class="section" id="why-simba">
<span id="whysimba"></span><h2>Why Simba?<a class="headerlink" href="#why-simba" title="Permalink to this headline">¶</a></h2>
<p>So why would you use Simba?</p>
<p>For several reasons. Number one is probably the active community combined with
the open-mindedness of the Simba developers.</p>
<div class="section" id="free">
<h3>Free<a class="headerlink" href="#free" title="Permalink to this headline">¶</a></h3>
<p>Simba is, and always will be free.
It is free as in Free Beer <strong>and</strong> Freedom.</p>
<p>Simba is 100% free to use. In fact, we welcome you to share it with the
rest of the world.</p>
<p>The source code to the program is freely available, under the GPL (v3) license.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The source code allows everyone to see how the program actually
works. Most developers choose not to share their source code and therefore
decide to withhold knowledge. The Simba developers highly disagree with
this mentality and will fight for a world with free knowledge for
everyone. &#8220;Closed Source&#8221; as not sharing source code is called, is holding
back innovation and research in the world.</p>
</div>
</div>
<div class="section" id="extensible">
<h3>Extensible<a class="headerlink" href="#extensible" title="Permalink to this headline">¶</a></h3>
<p>Simba supports both plug-ins in binary format as well as extensions written
in the Simba programming language (which is Pascal-based).</p>
<p>This way one can easily extend Simba. See <a class="reference internal" href="index.html#writing-simba-extensions"><em>Writing Simba Extensions</em></a></p>
</div>
<div class="section" id="reliable">
<h3>Reliable<a class="headerlink" href="#reliable" title="Permalink to this headline">¶</a></h3>
<p>Simba is actively maintained by a team of knowledgeable programmers.</p>
<p>We as a team do our best to make Simba into a quality product.
However this does not guarantee a bug free program.
(Bug free programs don&#8217;t exist)</p>
<p>Should you encounter a bug, please consider sending a bug report so we can
try to resolve the issue: <a class="reference internal" href="index.html#bugreport"><em>Reporting Bugs</em></a>.</p>
</div>
<div class="section" id="cross-platform">
<h3>Cross Platform<a class="headerlink" href="#cross-platform" title="Permalink to this headline">¶</a></h3>
<p>Simba has been written with freedom in mind and believes Simba
should not be limited to one platform, as that limits its users
to one platform as well.</p>
<p>Currently the supported platforms are Windows and Linux with attempts
being made to port it to OSX (it may run on OSX if you install X11).</p>
<p>Even though we try hard to make Simba bug-free on all platforms,
some issues remain. The biggest issue is the interpreter that
executes your program. It is an external component and does not
play too well on Linux. Hopefully this will be improved upon soon.</p>
<p>There are plans on supporting interpreter for alternative languages such as
Python, these would largely resolve the current problems with the PascalScript
interpreter on Linux/Mac.</p>
</div>
<div class="section" id="fast">
<h3>Fast<a class="headerlink" href="#fast" title="Permalink to this headline">¶</a></h3>
<p>The Simba developers have designed and written Simba with speed in mind.
It is important to understand, however, that premature optimization usually
ends up hurting development by introducing bugs and other forms of
instability. Simba attempts to find a middle-ground and has sacrificed some
speed for readability and maintainability, but is overall still quite fast.</p>
</div>
<div class="section" id="open-minded">
<h3>Open Minded<a class="headerlink" href="#open-minded" title="Permalink to this headline">¶</a></h3>
<p>Open minded. We appreciate your help, ideas and criticism!</p>
</div>
<div class="section" id="debug-friendly">
<h3>Debug Friendly<a class="headerlink" href="#debug-friendly" title="Permalink to this headline">¶</a></h3>
<p>Simba aims to be debug friendly. It will show you where your errors are during
compilation, and when you are running scripts Simba will point out where you are
passing invalid arguments. The action Simba takes when this happens is
configurable. (It can issue a warning and continue, or simply terminate
the script)</p>
</div>
<div class="section" id="well-documented">
<h3>Well Documented<a class="headerlink" href="#well-documented" title="Permalink to this headline">¶</a></h3>
<p>Simba is well documented. (You&#8217;re looking the documentation right now...)
There is still a lot left to document though.</p>
</div>
</div>
<span id="document-gettingstarted"></span><div class="section" id="getting-started-with-simba">
<span id="gettingstarted"></span><h2>Getting Started with Simba<a class="headerlink" href="#getting-started-with-simba" title="Permalink to this headline">¶</a></h2>
<p>This page will help you install Simba and highlight some basic Simba
features.</p>
<div class="section" id="installing-simba">
<span id="installingsimba"></span><h3>Installing simba<a class="headerlink" href="#installing-simba" title="Permalink to this headline">¶</a></h3>
<p>Installing Simba is pretty straightforward and will only take a couple of
minutes.</p>
<div class="section" id="simba-installer">
<span id="id1"></span><h4>Simba installer<a class="headerlink" href="#simba-installer" title="Permalink to this headline">¶</a></h4>
<p>Everyone can get Simba at <a class="reference external" href="http://wizzup.org/simba/">http://wizzup.org/simba/</a></p>
<p>Go to <em>Download</em> and download the Simba installer.</p>
<p>Once it is done downloading, simply run the installer, follow the steps and
please make notice of the following note:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Simba will install to C:/ by default; if you want to install it
somewhere else, make sure you select a different location!
If you are running Windows Vista or Windows 7, then you will probably want
to install it to C:/ or another place; as long as writing in the actual
directory does not require administrator permissions. C:/ is a safe bet.</p>
<p class="last">You can install Simba to your <tt class="docutils literal"><span class="pre">Program</span> <span class="pre">Files</span></tt> directory, but you will have
to run Simba as administrator in that case.</p>
</div>
<p>Simba will probably tell you there is an update available. In this case, an
update button will appear. Click it and the Simba Updater will show up.
Alternatively you can update Simba using Tools -&gt; Update which will update Simba
if there is a new update available.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Updating Simba as soon as an update is released is recommended.</p>
</div>
</div>
<div class="section" id="portable-simba-installation">
<h4>Portable Simba Installation<a class="headerlink" href="#portable-simba-installation" title="Permalink to this headline">¶</a></h4>
<p>To get a portable installation at this time is not supported but will follow
sooner or later.</p>
</div>
</div>
<div class="section" id="setting-up-srl-4-with-simba">
<h3>Setting up SRL 4 with Simba<a class="headerlink" href="#setting-up-srl-4-with-simba" title="Permalink to this headline">¶</a></h3>
<p>SRL has been deprecated starting January 2012.</p>
</div>
<div class="section" id="setting-up-srl-5-with-simba">
<h3>Setting up SRL 5 with Simba<a class="headerlink" href="#setting-up-srl-5-with-simba" title="Permalink to this headline">¶</a></h3>
<p>If you were using the <a class="reference internal" href="index.html#simba-installer"><em>Simba installer</em></a> then you can simply enable the
<tt class="docutils literal"><span class="pre">SRL</span> <span class="pre">Updater</span></tt> extension. (Go to View -&gt; Extensions and enable <tt class="docutils literal"><span class="pre">srl.sex</span></tt>)</p>
<p>See <a class="reference internal" href="index.html#simbaext"><em>Simba Extensions</em></a> for more information on (other) Simba extensions.</p>
<p>This is the only supported way. You can simply do a git clone on the srl
repository, but if you can do that, then you should be able to set up SRL
yourself as well.</p>
</div>
<div class="section" id="installing-scripts">
<h3>Installing scripts<a class="headerlink" href="#installing-scripts" title="Permalink to this headline">¶</a></h3>
<p>Scripts can be downloaded with the Script Manager, in Tools -&gt; Script Manager.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Script Manager is not finished yet.</p>
</div>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<p>If you run into problems that are not mentioned here, make sure you look at
the <a class="reference internal" href="index.html#troubleshooting"><em>Troubleshooting</em></a> page.</p>
</div>
</div>
<span id="document-troubleshooting"></span><div class="section" id="troubleshooting">
<span id="id1"></span><h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>This is a general troubleshooting page and will hopefully cover all potential
problems you may encounter. Before you read any further, make sure your Simba is
up to date. See <a class="reference internal" href="index.html#updater"><em>Updater in Simba</em></a>.</p>
<div class="section" id="where-is-the-dtm-editor">
<h3>Where is the DTM Editor?<a class="headerlink" href="#where-is-the-dtm-editor" title="Permalink to this headline">¶</a></h3>
<p>The DTM Editor a Simba Extension. See <a class="reference internal" href="index.html#simbaext"><em>Simba Extensions</em></a> for more information on
extensions and how to enable the DTM editor.</p>
</div>
<div class="section" id="where-are-my-extensions">
<h3>Where are my Extensions?<a class="headerlink" href="#where-are-my-extensions" title="Permalink to this headline">¶</a></h3>
<p>All extensions are in the <em>Extensions</em> folder. If this folder is empty, you may
need to manually download the Extensions or reinstall Simba. If you have
downloaded a recent Simba (0.97.3 or higher), you will also have an Extension
Updater Extension (you read that right!), make sure to enable this extension as
well.</p>
</div>
</div>
<span id="document-bugreport"></span><div class="section" id="reporting-bugs">
<span id="bugreport"></span><h2>Reporting Bugs<a class="headerlink" href="#reporting-bugs" title="Permalink to this headline">¶</a></h2>
<p>Report all bugs at <a class="reference external" href="http://bugs.villavu.com/">http://bugs.villavu.com/</a></p>
<p>Make sure you do a quick search for your bug to see if it already exist. If it does,
click its link and add any information you can into the comments. If your bug does not
exist, follow these steps:</p>
<ol class="arabic">
<li><p class="first">Upon opening that page, you should see a &#8220;Report Issue&#8221; link. Click this.</p>
</li>
<li><p class="first">Now, you should select the project to report to. Use the following criteria:</p>
<blockquote>
<div><ul class="simple">
<li>If the problem is with the GUI, choose &#8220;Simba&#8221;.</li>
<li>If the problem seems to be in the library, choose &#8220;MML&#8221;.</li>
<li>If the problem is not in one of the above or you know it is an SRL function
causing the problem, choose &#8220;SRL&#8221;.</li>
</ul>
</div></blockquote>
<p>If you can not decide, choose &#8220;Simba&#8221;. The developers can move the ticket as needed.</p>
</li>
<li><p class="first">Now, choose the Category that the bug is in. This should be self-explanatory; choose
a topic related to what you were doing when the bug occurred. Choose general if you
are unsure. Developers can, again, change the ticket if required.</p>
</li>
<li><p class="first">Select the reproducibility. If this is a request for a feature, choose &#8220;N/A&#8221;.</p>
</li>
<li><p class="first">Severity should be ranked according to how much the bug affects the program.
Crashes will be dealt with first, then blocks, etc. This step goes along with
priority, which should be chosen along with the severity.</p>
</li>
<li><p class="first">Version, at this time, is not needed for Simba and MML issues. If the issue occurs
with an older script, choose &#8220;SRL 4 Compatibility&#8221;.</p>
</li>
<li><p class="first">Now write the summary of the bug. Choose something better than &#8220;Does not Work&#8221;. If,
for example, you were experiencing a crash of the program when trying to use the OCR
to scan the character &#8220;~&#8221; on the 30th of February while you were woodcutting willows
with an iron axe, a suitable Summary might be &#8220;Crash While Using OCR on Specific Char&#8221;.</p>
</li>
<li><p class="first">Using the same example for above, a Description should explain the problem while being
concise. This field is not the field for technical details, simply describe the problem.</p>
</li>
<li><p class="first">Include any technical details such as what exactly you did, etc. Use pictures if
possible.</p>
</li>
<li><p class="first">Finally, hit submit. It should return successful.</p>
</li>
</ol>
</div>
<span id="document-features"></span><div class="section" id="detailed-feature-overview">
<h2>Detailed Feature Overview<a class="headerlink" href="#detailed-feature-overview" title="Permalink to this headline">¶</a></h2>
<p>Simba has some fancy features; the most basic operations as well as detailed
information about settings will be explained here.</p>
<div class="toctree-wrapper compound">
<span id="document-features/scriptmanager"></span><div class="section" id="simba-script-manager">
<h3>Simba Script Manager<a class="headerlink" href="#simba-script-manager" title="Permalink to this headline">¶</a></h3>
<p>Community-created scripts will be available for download from the
Script Manager. The script manager will appear soon.</p>
</div>
<span id="document-features/autoupdate"></span><div class="section" id="updater-in-simba">
<span id="updater"></span><h3>Updater in Simba<a class="headerlink" href="#updater-in-simba" title="Permalink to this headline">¶</a></h3>
<p>As soon as there is an update for Simba, an extra icon will appear in the icon
bar.
If you click it, an update window will appear. Click <em>Update</em> and Simba
will update itself.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will have to restart Simba to use the updated version.</p>
</div>
<p>Alternatively you can use Tools -&gt; Update to update.</p>
</div>
<span id="document-features/exten"></span><div class="section" id="simba-extensions">
<span id="simbaext"></span><h3>Simba Extensions<a class="headerlink" href="#simba-extensions" title="Permalink to this headline">¶</a></h3>
<p>Simba extensions are exactly what the name suggests: Extensions for Simba. These
extensions vary from updaters to firewalls and design tools.</p>
<p>By default all extensions are disabled. They reside in the <em>Extensions</em>
folder and end with <tt class="docutils literal"><span class="pre">.sex</span></tt>. To enable or disable Extensions go to Tools &gt;
Extensions. There you will find a list of all extensions.</p>
<div class="section" id="recommended-simba-extensions">
<h4>Recommended Simba Extensions<a class="headerlink" href="#recommended-simba-extensions" title="Permalink to this headline">¶</a></h4>
<p>Recommended:</p>
<blockquote>
<div><ul class="simple">
<li>Extension Updater (Highly recommended)</li>
<li>SRL Updater (and Installer/Download)</li>
<li>Associate Files</li>
<li>Security extension. (Implements a File and Fire wall)</li>
</ul>
</div></blockquote>
<p>For developers:</p>
<blockquote>
<div><ul class="simple">
<li>DTM Editor</li>
<li>Paster Extension</li>
<li>CRov, Crash Recovery.</li>
<li>Code Formatter extension.</li>
</ul>
</div></blockquote>
</div>
</div>
<span id="document-features/settings"></span><div class="section" id="settings-form">
<h3>Settings Form<a class="headerlink" href="#settings-form" title="Permalink to this headline">¶</a></h3>
<p>As of Simba 0.99, a decent settings manager has been implemented.
If you still want to use the old settings manager, use the option <em>Settings
(Expert)</em> from the menu.</p>
</div>
<div class="section" id="simba-settings">
<h3>Simba settings<a class="headerlink" href="#simba-settings" title="Permalink to this headline">¶</a></h3>
<p>The Simba settings form can be used to modify the settings. These options vary
from how often Simba will check for an update to whether the tray icon is
displayed at all times.</p>
<p>Settings can be changed by going to the menu <em>Tools</em> menu and the
selecting the <em>Settings</em> option.</p>
<p>If you at any time have serious problems with Simba not behaving it as you
expect it should and you changed something in the settings, you could try
closing Simba and deleting <tt class="docutils literal"><span class="pre">settings.xml</span></tt>. Simba will create one with
default settings if it does not exist.</p>
<div class="section" id="general-settings">
<h4>General Settings<a class="headerlink" href="#general-settings" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/General/</span></tt></p>
<div class="section" id="recent-files-history">
<h5>Recent files history<a class="headerlink" href="#recent-files-history" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">MaxRecentFiles</span></tt></p>
<p>Stores the amount of recent files to remember. The default is <em>10</em>.</p>
</div>
</div>
<div class="section" id="extensions">
<h4>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Extensions</span></tt></p>
<p>Settings related to extensions are found here.</p>
<div class="section" id="extension-directory">
<h5>Extension directory<a class="headerlink" href="#extension-directory" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">Path</span></tt></p>
<p>This setting contains the directory Simba searches for its extensions.</p>
</div>
</div>
<div class="section" id="plugins">
<h4>Plugins<a class="headerlink" href="#plugins" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Plugins/</span></tt></p>
<div class="section" id="plugin-directory">
<h5>Plugin directory<a class="headerlink" href="#plugin-directory" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">Path</span></tt></p>
<p>This setting contains the directory Simba searches for its plugins.</p>
</div>
</div>
<div class="section" id="includes">
<h4>Includes<a class="headerlink" href="#includes" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Includes/</span></tt></p>
<div class="section" id="include-directory">
<h5>Include directory<a class="headerlink" href="#include-directory" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">Path</span></tt></p>
<p>This setting contains the directory Simba searches for its
global includes.</p>
</div>
</div>
<div class="section" id="fonts">
<h4>Fonts<a class="headerlink" href="#fonts" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Fonts/</span></tt></p>
<div class="section" id="automatically-load-fonts-on-startup">
<h5>Automatically load fonts on startup<a class="headerlink" href="#automatically-load-fonts-on-startup" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">LoadOnStartUp</span></tt></p>
<p>Default is <em>True</em>. If set to <em>False</em> Fonts will not be loaded on startup.</p>
</div>
<div class="section" id="font-directory">
<h5>Font Directory<a class="headerlink" href="#font-directory" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">Path</span></tt></p>
<p>Contains the directory Simba will look for when searching for fonts.</p>
</div>
</div>
<div class="section" id="updater">
<h4>Updater<a class="headerlink" href="#updater" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Updater/</span></tt></p>
<p>The <tt class="docutils literal"><span class="pre">Updater</span></tt> refers only to the Simba updater, and not to other updaters like
the Font updater or other third party updaters.</p>
<div class="section" id="automatically-check-for-updates">
<h5>Automatically check for updates<a class="headerlink" href="#automatically-check-for-updates" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">CheckForUpdates</span></tt></p>
<p>Default is <em>True</em>. If set to <em>True</em>, Simba will automatically check if there are
updates available. If you don&#8217;t want Simba to check for updates of Simba, set
this to <em>False</em>.</p>
</div>
<div class="section" id="how-often-we-check-for-updates">
<h5>How often we check for updates<a class="headerlink" href="#how-often-we-check-for-updates" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">CheckEveryXMinutes</span></tt></p>
<p>Default is <em>30</em>. The number here defines how often Simba will check for Simba
updates, in minutes.</p>
</div>
</div>
<div class="section" id="code-hints">
<h4>Code Hints<a class="headerlink" href="#code-hints" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/CodeHints/</span></tt></p>
<div class="section" id="automatically-pop-up-code-hints">
<h5>Automatically pop up Code Hints<a class="headerlink" href="#automatically-pop-up-code-hints" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">ShowAutomatically</span></tt></p>
<p>If set to <em>True</em>, code hints will be shown when appropriate.
On <em>False</em> code hints will never be shown automatically, but can still be
accessed by pressing <em>Ctrl+Space</em>.</p>
</div>
</div>
<div class="section" id="id1">
<h4>Code Hints<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/CodeCompletion/</span></tt></p>
<div class="section" id="id2">
<h5>Automatically pop up Code Hints<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">ShowAutomatically</span></tt></p>
<p>If set to <em>True</em>, code completion will pop up when appropriate.
On <em>False</em> code will never be completed automatically.</p>
</div>
</div>
<div class="section" id="function-list">
<h4>Function list<a class="headerlink" href="#function-list" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/FunctionList/</span></tt></p>
<div class="section" id="show-on-start">
<h5>Show on Start<a class="headerlink" href="#show-on-start" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">ShowOnStart</span></tt></p>
<p>It true is set to <em>True</em>, the function list will be visible on startup. <em>False</em>
requires you to enable it yourself.</p>
</div>
</div>
<div class="section" id="color-picker">
<h4>Color Picker<a class="headerlink" href="#color-picker" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/ColourPicker</span></tt></p>
<div class="section" id="show-colour-history-on-pick">
<h5>Show colour history on pick?<a class="headerlink" href="#show-colour-history-on-pick" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">ShowHistoryOnPick</span></tt></p>
<p>If set to <em>True</em>, the Colour History form will be shown every time the user has
picked a colour.</p>
</div>
</div>
<div class="section" id="script-tabs">
<h4>Script Tabs<a class="headerlink" href="#script-tabs" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Tabs/</span></tt></p>
<div class="section" id="script-opening-mode">
<h5>Script opening mode<a class="headerlink" href="#script-opening-mode" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">OpenScriptInNewTab</span></tt></p>
<p>Simba can load Scripts in two different ways. It can open every script in a new
tab, or it can override the currently active tab. Setting this to <em>True</em> opens
scripts in new tabs, this is the default.</p>
</div>
<div class="section" id="behaviour-when-closing-tabs">
<h5>Behaviour when closing tabs<a class="headerlink" href="#behaviour-when-closing-tabs" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">OpenNextOnClose</span></tt></p>
<p>Once a tab is closed, Simba can open your most recent tab, or the tab that is
next to the closed tab. Setting this to <em>False</em> jumps back to
your most recently used tab.</p>
</div>
</div>
<div class="section" id="source-editor">
<h4>Source Editor<a class="headerlink" href="#source-editor" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/SourceEditor/</span></tt></p>
<div class="section" id="source-colouring">
<h5>Source colouring<a class="headerlink" href="#source-colouring" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">LazColors</span></tt></p>
<p>The default colour theme is the same as Lazarus&#8217; colours. If you prefer another
(more familiar?) theme, set this to <em>False</em>.</p>
</div>
<div class="section" id="default-script">
<h5>Default script<a class="headerlink" href="#default-script" title="Permalink to this headline">¶</a></h5>
<p>This contains the path to the default script. You can change this to set your
own default script. (Opening a blank tab loads up the default script)</p>
</div>
</div>
<div class="section" id="tray-icon">
<h4>Tray Icon<a class="headerlink" href="#tray-icon" title="Permalink to this headline">¶</a></h4>
<p><tt class="docutils literal"><span class="pre">Settings/Tray</span></tt></p>
<div class="section" id="visiblity-of-the-tray-icon">
<h5>Visiblity of the tray icon<a class="headerlink" href="#visiblity-of-the-tray-icon" title="Permalink to this headline">¶</a></h5>
<p><tt class="docutils literal"><span class="pre">AlwaysVisible</span></tt></p>
<p>If you want the tray icon only to be visible when Simba is minimized, set this to
<em>False</em>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Here should be a list of the most important Simba settings; what they
influence, plus the possible values for them.</p>
</div>
</div>
</div>
</div>
<span id="document-features/ui"></span><div class="section" id="user-interface">
<h3>User Interface<a class="headerlink" href="#user-interface" title="Permalink to this headline">¶</a></h3>
<div class="section" id="menu-items">
<h4>Menu items<a class="headerlink" href="#menu-items" title="Permalink to this headline">¶</a></h4>
<p>(Format)
Main menu item Submenu item, [shortcut, ]description</p>
<div class="section" id="file-menu">
<h5>File Menu<a class="headerlink" href="#file-menu" title="Permalink to this headline">¶</a></h5>
<ul>
<li><p class="first">New, Ctrl+N, Opens a new tab with the default script</p>
</li>
<li><p class="first">Open, Ctrl+O, Prompted for an existing file to open in a new tab
(by default)</p>
</li>
<li><p class="first">Open recent, Lists up to the last 10 (by default) files that have been open</p>
</li>
<li><p class="first">Save, Ctrl+S, Save the current script - if it hasn&#8217;t been saved before
or opened, then prompted for a filename</p>
</li>
<li><p class="first">Save as, Save the current script as a new filename</p>
</li>
<li><p class="first">Save as Default, Make it so all new files will be the current script.</p>
</li>
<li><p class="first">Save All, Shift+Ctrl+S, Saves all currently open scripts</p>
</li>
<li><p class="first">New Tab, Ctrl+T, Opens a new tab with the default script</p>
</li>
<li><dl class="first docutils">
<dt>Close Tab, Ctrl+W, Closes current tab, prompting for a save if it hasn&#8217;t</dt>
<dd><p class="first last">been already</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Close all tabs, Closes all tabs, prompting for a save if individual tabs</dt>
<dd><p class="first last">haven&#8217;t been already</p>
</dd>
</dl>
</li>
<li><p class="first">Exit, Ctrl+Q, Closes Simba, prompting for a save if individual tabs
haven&#8217;t been already</p>
</li>
</ul>
</div>
<div class="section" id="edit-menu">
<h5>Edit Menu<a class="headerlink" href="#edit-menu" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Undo, Ctrl+Z, Changes the script to a previous state where available</li>
<li>Redo, Ctrl+Y, Changes the script to a later state where available</li>
<li>Cut, Ctrl+X, Removes the currently selected text and makes it
available to paste</li>
<li>Copy, Ctrl+C, Copies the selected text and makes it available to paste</li>
<li>Paste, Ctrl+V, Inserts a copy of previously copied/cut text at
the current position</li>
<li>Delete, Delete/Backspace, Removes the currently selected text</li>
<li>Select All, Ctrl+A, Makes all the text in the open tab selected</li>
<li>Find, Ctrl+F, Allows user to search for the first occurrence of a text
sequence, making it selected, with or without case matching as well
as highlighting other occurrences</li>
<li>Find next, F3, Selects next occurrence of text sequence being searched for</li>
<li>Replace, Ctrl+R, Opens a find/replace dialogue box, allowing a
search string to be specified as well as a replacement string,
with options of finding occurrences and replacing a single or all
occurrences</li>
</ul>
</div>
<div class="section" id="script">
<h5>Script<a class="headerlink" href="#script" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Run, F9, Compile and start executing the script</li>
<li>Compile, Ctrl+F9, Only compile the script without executing</li>
<li>Pause, Stop executing the script, but allow it to be resumed
from the current place via run</li>
<li>Stop, F2, Stop executing the script completely without allowing it
to be resumed from the current place</li>
</ul>
</div>
<div class="section" id="view">
<h5>View<a class="headerlink" href="#view" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Colour History, Toggles display of the colour picker history form</li>
<li>Debug Image, Toggles display of the debug image &#8220;orm&#8221;</li>
<li>Function List, Toggles display of the function list box</li>
<li>Extensions, Toggles display of the extensions form</li>
</ul>
</div>
<div class="section" id="tools">
<h5>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>Fill Function List, (Ctrl+Q, which is also assigned to Exit,
which takes precedence), Reloads the functions from the script into
the function list box</li>
<li>Update, Opens the update form</li>
<li>Settings, Opens the settings form</li>
<li>Bitmap conversion, Opens a form for converting images to bitmap strings</li>
<li>Export script as HTML, Prompts for a filename to save HTML file with
formatted version of script that has syntax highlighting</li>
</ul>
</div>
<div class="section" id="help">
<h5>Help<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>About, Opens about form</li>
<li>Handbook, Opens up the online information resource for Simba in default
browser.</li>
<li>Report a bug, Opens up the online bugtracker for Simba in default browser</li>
<li>Check for new SRL, Sees if local version is the latest version of SRL</li>
</ul>
</div>
<div class="section" id="srl">
<h5>SRL<a class="headerlink" href="#srl" title="Permalink to this headline">¶</a></h5>
<p>(Only exists if the srl.sex/SRL Updater extension is installed and enabled):</p>
<ul class="simple">
<li>Update SRL, Downloads new version of SRL if one is available</li>
<li>Automatically update, toggles whether or not to update SRL without asking
upon starting Simba/enabling SRL Updater extension</li>
</ul>
</div>
</div>
<div class="section" id="toolbar-buttons">
<h4>Toolbar buttons<a class="headerlink" href="#toolbar-buttons" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>(Format)</dt>
<dd>Function (listed from left to right), [shortcut command, ]menu
[,description if not present on menu]</dd>
</dl>
<ul class="simple">
<li>New, Ctrl+N, File</li>
<li>Open, Ctrl+O, File</li>
<li>Save, Ctrl+S, File</li>
<li>Save All, Shift+Ctrl+S, File</li>
<li>Cut, Ctrl+X, Edit</li>
<li>Copy, Ctrl+C, Edit</li>
<li>Paste, Ctrl+V, Edit</li>
<li>Run, F9, Script</li>
<li>Pause, Script</li>
<li>Stop, F2, Script</li>
<li>Add Tab, Ctrl+T, File</li>
<li>Close Tab, Ctrl+W, File</li>
<li>Clear debug, no menu, Removes all lines in the debug box</li>
<li>Colour picker, no shortcut (accessible from View-&gt;Colour History),
Freezes screen and allows use to pick a colour while displaying extra
information</li>
<li>Select target, no menu, Allows user to choose an area they would
like Simba to perform all actions on (must be held then released over
target to select it)</li>
<li>Reload plugins, no menu, (Currently unavailable) Allows user to
reload plugins after updating them without requiring Simba to be restarted</li>
<li>Minimize to tray, no menu, Removes Simba from visible screen and start
bar allowing it to only be accessed via the Simba tray icon</li>
<li>Toggle console, no menu, Either displays or removes the output console</li>
</ul>
</div>
<div class="section" id="syncedit">
<h4>SyncEdit<a class="headerlink" href="#syncedit" title="Permalink to this headline">¶</a></h4>
<p>Multiple references to an identifier in a section of text can be altered
at once using SyncEdit.
Select the text in which you wish to alter an identifiers name and press
Ctrl+J. The highlighted area should turn from a blue colour to a green
colour with identifiers displayed with grey boxes around them,
except for the currently selected identifier (which should be in a blue box)
and other references to the same identifier (which should be in a purple
/pink box). To change to a different identifier, click in a different box.
To edit the identifier, simply edit one of the boxes. When finished, press Esc.
This can be used to change variable names, procedure/function names
(and calls to them), custom type names (and declarations that use them).
It can also be used to change references to a type as well as any uses of
that type.
Trying to edit something not in a box causes SyncEdit to exit,
as it would when pressing Esc.</p>
</div>
<div class="section" id="read-only-external-editor-mode">
<h4>Read Only / External Editor Mode<a class="headerlink" href="#read-only-external-editor-mode" title="Permalink to this headline">¶</a></h4>
<p>Simba has a read only mode that can be enabled and disabled per tab.
If a tab is read only, it will reload the file the script belongs to every time,
and you&#8217;re obviously not able to edit the script in Simba. This is particularly
useful if you&#8217;re editing from a different editor.</p>
</div>
<div class="section" id="function-list">
<h4>Function list<a class="headerlink" href="#function-list" title="Permalink to this headline">¶</a></h4>
<p>It can be undocked or moved from one side to the other.
To reset it to its default position, restart Simba.
As of now, it doesn&#8217;t remember where it was last.
If it doesn&#8217;t correctly display Script functions/procedures,
it may be that there is a problem with the script before the declaration.
Items are not currently sorted alphabetically at any level,
however Script and Includes items are added in the order they
appear in the relevant scripts.
If you close it, it can be displayed again from the View menu.</p>
</div>
<div class="section" id="extensions">
<h4>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h4>
<p>The Extensions form is launched from the View menu via the Extensions item.
To enable or disable an extensions, select it from the list and tick or
untick the box in the bottom left hand corner appropriately
(ticked for enabled, unticked for disabled).
Listed extensions are, by default, located in the Extensions folder where
the Simba executable is.
The file extensions .sex is short for Simba EXtension.
Extensions focus more on the Simba form or similar, general area where as
plugins focus more on the scripting aspect.</p>
<p>For a list of all Simba extensions, have a look here at the <a class="reference internal" href="index.html#simbaext"><em>Simba Extensions</em></a>.</p>
</div>
<div class="section" id="colour-picker-history">
<h4>Colour Picker History<a class="headerlink" href="#colour-picker-history" title="Permalink to this headline">¶</a></h4>
<p>The colour picker history form is launched from the View menu via the
Colour History item.
It lists all colours that have been picked since launching Simba,
unless they have been deleted, as well as information on where they
were picked and RGB values.
Names can be given to colours, to help relate it to what it represents,
by selecting a colour item from the left and changing the top field on
the right.
It is, by default, displayed after picking a colour using the button on the main Simba toolbar.</p>
</div>
<div class="section" id="update-form">
<h4>Update Form<a class="headerlink" href="#update-form" title="Permalink to this headline">¶</a></h4>
<p>The update form is launched from Tools menu via the Update item.
Informs user if no update is currently available; else it will
displaying the form. Gives the option of updating when the current
version is not the latest.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Include a picture?</p>
</div>
</div>
<div class="section" id="settings-form">
<h4>Settings Form<a class="headerlink" href="#settings-form" title="Permalink to this headline">¶</a></h4>
<p>The Simba settings form is launched from the Tools menu via the Settings item.
The main tree consists of 3 sections: one for the functionality of
Simba (Settings), one for the appearance of Simba (LastConfig)
and one for holding settings relevant to extensions (Extensions).</p>
<p>The following information applies for the main Settings branch
and not LastConfig or Extensions.</p>
<p>The Settings section allows toggling of:</p>
<ul class="simple">
<li>Loading fonts on startup (Fonts-&gt;LoadOnStartUp)</li>
<li>Showing the function list on startup (FunctionList-&gt;ShowOnStart)</li>
<li>Using Lazarus syntax highlighting (SourceEditor-&gt;LazColors)
[Requires restarting Simba]</li>
<li>Using CPascal or PascalScript interpreter (Interpreter-&gt;UseCPascal)</li>
<li>Automatically checking for Simba updates (Updater-&gt;CheckForUpdates)</li>
<li>Opening next tab upon closing current (Tabs-&gt;OpenNextOnClose)
[Unsure on what it exactly does]</li>
<li>Open new scripts in current or new tab (Tabs-&gt;OpenScriptInNewTab)
[Does prompt for saving if current script is unsaved]</li>
<li>Automatically showing code hints (CodeHints-&gt;ShowAutomatically)</li>
<li>Automatically show code completion (CodeCompletion-&gt;ShowAutomatically)</li>
<li>Automatically open colour picker history form after picking a colour
(ColourPicker-&gt;ShowHistoryOnPick)</li>
</ul>
<p>The Settings section allows changing the path of:</p>
<ul class="simple">
<li>Where to load includes from (Includes-&gt;Path)</li>
<li>Where to load fonts from (Fonts-&gt;Path)</li>
<li>Where to check latest fonts version (Fonts-&gt;VersionLink)</li>
<li>Where to download latest fonts from (Fonts-&gt;UpdateLink)</li>
<li>Path to the default script (SourceEditor-&gt;DefScriptPath)</li>
<li>Where to load extensions from (Extensions-&gt;Path)
[The file extension for Simba extensions can also be changed]</li>
<li>Where to load plugins from (Plugins-&gt;Path)</li>
<li>Where to load the news from (News-&gt;URL)</li>
<li>Where to check latest Simba version (Updater-&gt;RemoteVersionLink)</li>
<li>Where to download latest Simba from (Updater-&gt;RemoteLink)</li>
</ul>
<p>The Settings section has further settings which do not fall into the
above two categories of sorts. These are:</p>
<ul class="simple">
<li>Version of local fonts (Fonts-&gt;Version)</li>
<li>How often to check for new version of Simba (Updater-&gt;CheckEveryXMinutes)</li>
<li>Number of recent files to be remembered (General-&gt;MaxRecentFiles)</li>
<li>The file extension for Simba Extensions (Extensions-&gt;FileExtension)</li>
</ul>
<p>It is highly suggested that the large majority of settings should not be
altered unless you know what you are doing.</p>
</div>
</div>
<span id="document-features/notwellknown"></span><div class="section" id="not-well-known-features">
<h3>Not Well Known Features<a class="headerlink" href="#not-well-known-features" title="Permalink to this headline">¶</a></h3>
<p>Simba has several features that are relatively unknown.
A few will be listed here.</p>
<div class="section" id="custom-block-folding">
<h4>Custom Block Folding<a class="headerlink" href="#custom-block-folding" title="Permalink to this headline">¶</a></h4>
<p>TODO</p>
</div>
<div class="section" id="timestamped-writeln">
<h4>Timestamped Writeln<a class="headerlink" href="#timestamped-writeln" title="Permalink to this headline">¶</a></h4>
<p>Simba can timestamp all your debug.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">SetScriptProp</span><span class="p">(</span><span class="n">SP_WriteTimeStamp</span><span class="o">,</span> <span class="p">[</span><span class="k">True</span><span class="p">])</span><span class="o">;</span>
<span class="nb">WriteLn</span><span class="p">(</span><span class="s">&#39;Before the wait&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">Wait</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="o">;</span>
<span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;After the wait&#39;</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-tutorial"></span><div class="section" id="tutorial">
<h2>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-tutorial/intro-prog"></span><div class="section" id="introduction-to-simba-and-programming">
<h3>Introduction to Simba and Programming<a class="headerlink" href="#introduction-to-simba-and-programming" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-basics"></span><div class="section" id="simba-basics">
<h3>Simba Basics<a class="headerlink" href="#simba-basics" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-mouse"></span><div class="section" id="simba-mouse-input">
<h3>Simba Mouse Input<a class="headerlink" href="#simba-mouse-input" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-key"></span><div class="section" id="simba-keyboard-input">
<h3>Simba Keyboard Input<a class="headerlink" href="#simba-keyboard-input" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-colour-cts"></span><div class="section" id="simba-colours">
<h3>Simba Colours<a class="headerlink" href="#simba-colours" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="simba-colour-tolerance-speed">
<h3>Simba Colour Tolerance Speed<a class="headerlink" href="#simba-colour-tolerance-speed" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-bitmap"></span><div class="section" id="simba-bitmaps">
<h3>Simba Bitmaps<a class="headerlink" href="#simba-bitmaps" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-dtm"></span><div class="section" id="simba-deformable-template-models-dtm">
<h3>Simba Deformable Template Models (DTM)<a class="headerlink" href="#simba-deformable-template-models-dtm" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-tpa"></span><div class="section" id="simba-tpointarrays">
<h3>Simba TPointArrays<a class="headerlink" href="#simba-tpointarrays" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-tutorial/simba-files"></span><div class="section" id="simba-files">
<h3>Simba Files<a class="headerlink" href="#simba-files" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>
<span id="document-referencescript"></span><div class="section" id="scripting-reference">
<span id="scriptref"></span><h2>Scripting Reference<a class="headerlink" href="#scripting-reference" title="Permalink to this headline">¶</a></h2>
<p>Covered in this section are the functions available when using Simba with the
default (Pascal) engine.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">More chapters need to be written, see <a class="reference internal" href="index.html#todo"><em>Documentation TODO</em></a></p>
</div>
<div class="toctree-wrapper compound">
<span id="document-scriptref/mouseandkeyboard"></span><div class="section" id="mouse-and-keyboard">
<h3>Mouse and Keyboard<a class="headerlink" href="#mouse-and-keyboard" title="Permalink to this headline">¶</a></h3>
<p>Simba contains several functions to manipulate the mouse and keyboard.
Features range from clicking and moving the mouse to faking keypresses.</p>
<div class="section" id="types">
<h4>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h4>
<p>A few variables are exported for working with the Simba mouse functions.</p>
<p>TClickType, which defines the click type.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">const</span>
    <span class="n">mouse_Right</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">mouse_Left</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">mouse_Middle</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
<p>TMousePress, which defines if the mouse button is to be down or up.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">TMousePress</span> <span class="o">=</span> <span class="p">(</span><span class="n">mouse_Down</span><span class="o">,</span> <span class="n">mouse_Up</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Keyboard functions often use Virtual Keys. See <em class="xref std std-ref">virtualkeys</em> for a complete
list.</p>
</div>
<div class="section" id="mouse-functions">
<h4>Mouse Functions<a class="headerlink" href="#mouse-functions" title="Permalink to this headline">¶</a></h4>
<p>Simba&#8217;s coordinate system is similar to most computer coordinate systems.
Coordinate <em>(0, 0)</em> is the top-left part of your selected window (the desktop by
default). To get to point <em>(5, 0)</em> we move five pixels to the right; to get to
<em>(5, 5)</em> we move five pixels to the right, and five pixels down.</p>
<p>Recall that the first value is <em>x</em>, the second value is <em>y</em>: <em>(x, y)</em></p>
<div class="section" id="movemouse">
<h5>MoveMouse<a class="headerlink" href="#movemouse" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal" id="scriptref-movemouse"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">MoveMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>MoveMouse moves the mouse pointer to the specified x and y coordinates.</p>
<p>The following example will move the mouse to position <em>(10, 10)</em>; relative
to the selected client. (To get to point (10, 10) visually, recall that (0, 0)
is the <em>top left</em> part and to get to (10, 10) we move 10 pixels to the right,
and ten pixels down.)</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">Program</span> <span class="n">MouseMove</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">MoveMouse</span><span class="p">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="getmousepos">
<span id="scriptref-getmousepos"></span><h5>GetMousePos<a class="headerlink" href="#getmousepos" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">GetMousePos</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>GetMousePos returns the current position of the mouse in x and y.</p>
<p>The following example moves the mouse 1 pixel to the right, relative to its
current position:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">Program</span> <span class="n">MouseMoveRelative</span><span class="o">;</span>

<span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">GetMousePos</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MoveMouse</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="holdmouse">
<span id="scriptref-holdmouse"></span><h5>HoldMouse<a class="headerlink" href="#holdmouse" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">HoldMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">clickType</span><span class="o">:</span> <span class="n">TClickType</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>HoldMouse holds the given mouse button specified by clickType down at the
specified <em>(x, y)</em> coordinate. If the mouse if not at the given
(<em>x, y)</em> yet, the mouse position will be set to <em>(x, y)</em>.</p>
<p>The following example holds the left mouse button and moves it one pixel
to the right relative to its current position.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">HoldMouse</span><span class="o">;</span>

<span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">GetMousePos</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">HoldMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">mouse_Left</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MoveMouse</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="releasemouse">
<span id="scriptref-releasemouse"></span><h5>ReleaseMouse<a class="headerlink" href="#releasemouse" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ReleaseMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">clickType</span><span class="o">:</span> <span class="n">TClickType</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>HoldMouse holds the given mouse button (clickType) down at the specified
x, y coordinate. If the mouse if not at the given x, y yet, the
mouse position will be set to x, y.</p>
<p>The following example holds the left mouse button and moves it one pixel
to the right and releases it to simulate a drag and drop motion.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">HoldMouseRelative</span><span class="o">;</span>

<span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">GetMousePos</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">HoldMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">mouse_Left</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MoveMouse</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">GetMousePos</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">ReleaseMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">mouse_Left</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="clickmouse">
<span id="scriptref-clickmouse"></span><h5>ClickMouse<a class="headerlink" href="#clickmouse" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClickMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">clickType</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span>
</pre></div>
</div>
<p>ClickMouse performs a click with the given mouse button (clickType) at the
specified <em>(x, y)</em> coordinate. This <tt class="docutils literal"><span class="pre">click</span></tt> equals an immediate click, with no
wait between holding down and releasing the mouse button. To create a more
human-like effect, use the HoldMouse and ReleaseMouse functions.</p>
<p>The following example clicks the right mouse button at a specified point.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">ClickMouse</span><span class="o">;</span>

<span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">ClickMouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">mouse_Right</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="keyboard-functions">
<h4>Keyboard Functions<a class="headerlink" href="#keyboard-functions" title="Permalink to this headline">¶</a></h4>
<p>Keyboard functions are obviously used to manipulate the keyboard input. It can
also be used to read states of specific keys.</p>
<div class="section" id="keydown">
<span id="scriptref-keydown"></span><h5>KeyDown<a class="headerlink" href="#keydown" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">KeyDown</span><span class="p">(</span><span class="n">key</span><span class="o">:</span> <span class="kt">Word</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>KeyDown sends a request to the Operating System to &#8220;fake&#8221; an event that
causes the keyboard <tt class="docutils literal"><span class="pre">key</span></tt> to be &#8220;down&#8221;.</p>
<p>The following example holds down the &#8220;Enter&#8221; key. (Note that if you call
KeyDown you must call key up afterwards to release the key.)</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">KeyDown</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">KeyDown</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="keyup">
<span id="scriptref-keyup"></span><h5>KeyUp<a class="headerlink" href="#keyup" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">KeyUp</span><span class="p">(</span><span class="n">key</span><span class="o">:</span> <span class="kt">Word</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>KeyDown sends a request to the Operating System to &#8220;fake&#8221; an event that
causes the <tt class="docutils literal"><span class="pre">key</span></tt> to be &#8220;up&#8221;.</p>
<p>The following example holds down the &#8220;Enter&#8221; key and release after pausing to
simulate a human action.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">KeyDownRelative</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">KeyDown</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">;</span>
  <span class="n">wait</span><span class="p">(</span><span class="nb">RandomRange</span><span class="p">(</span><span class="mi">50</span><span class="o">,</span> <span class="mi">100</span><span class="p">))</span><span class="o">;</span>
  <span class="n">KeyUp</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="presskey">
<h5>PressKey<a class="headerlink" href="#presskey" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">PressKey</span><span class="p">(</span><span class="n">key</span><span class="o">:</span> <span class="kt">Word</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>PressKey sends a request to the Operating System to &#8220;fake&#8221; a key event.</p>
<p>The following example simulates pressing the &#8220;Enter&#8221; key.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">PressKey</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">PressKey</span><span class="p">(</span><span class="mi">13</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="iskeydown">
<h5>IsKeyDown<a class="headerlink" href="#iskeydown" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">isKeyDown</span><span class="p">(</span><span class="n">key</span><span class="o">:</span> <span class="kt">Word</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns <em>True</em> if <em>key</em> is currently being held.</p>
<p>The following example says &#8220;Hello World&#8221; if the &#8220;F5&#8221; key is held down.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">PressKey</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="k">while</span> <span class="k">not</span><span class="p">(</span><span class="n">isKeyDown</span><span class="p">(</span><span class="mi">116</span><span class="p">))</span> <span class="k">do</span>
    <span class="n">Wait</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;Hello World&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="getkeycode">
<h5>GetKeyCode<a class="headerlink" href="#getkeycode" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetKeyCode</span><span class="p">(</span><span class="n">c</span><span class="o">:</span> <span class="kt">char</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the keycode of character <em>c</em>.</p>
</div>
<div class="section" id="sendkeys">
<h5>SendKeys<a class="headerlink" href="#sendkeys" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SendKeys</span><span class="p">(</span><span class="k">const</span> <span class="n">s</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">keywait</span><span class="o">,</span> <span class="n">keymodwait</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Type the contents of the string <em>s</em>. While typing, hold the keys for <em>keywait</em>.
SendKeys should work with any keyboard layout on Windows.</p>
<p>Example:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">SendKeys</span><span class="p">(</span><span class="s">&#39;Hello, World&#39;</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">30</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If your goal is to randomly wait a small time per key, you should consider
something like this:</p>
<div class="last highlight-pascal"><div class="highlight"><pre><span class="n">s</span> <span class="o">:=</span> <span class="s">&#39;Hello, World&#39;</span><span class="o">;</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="nb">length</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="k">do</span>
<span class="k">begin</span>
  <span class="n">SendKeys</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">,</span> <span class="mi">50</span><span class="o">+</span><span class="nb">Random</span><span class="p">(</span><span class="mi">51</span><span class="p">)</span><span class="o">,</span> <span class="mi">30</span><span class="o">+</span><span class="nb">Random</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span><span class="o">;</span>
  <span class="n">Wait</span><span class="p">(</span><span class="mi">20</span><span class="o">+</span><span class="nb">Random</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="keyboard-virtual-keys">
<span id="scriptref-virtualkeys"></span><h4>Keyboard Virtual Keys<a class="headerlink" href="#keyboard-virtual-keys" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>UNKNOWN: 0</li>
<li>LBUTTON: 1</li>
<li>RBUTTON: 2</li>
<li>CANCEL: 3</li>
<li>MBUTTON: 4</li>
<li>XBUTTON1: 5</li>
<li>XBUTTON2: 6</li>
<li>BACK: 8</li>
<li>TAB: 9</li>
<li>CLEAR: 12</li>
<li>RETURN: 13</li>
<li>SHIFT: 16</li>
<li>CONTROL: 17</li>
<li>MENU: 18</li>
<li>PAUSE: 19</li>
<li>CAPITAL: 20</li>
<li>KANA: 21</li>
<li>HANGUL: 21</li>
<li>JUNJA: 23</li>
<li>FINAL: 24</li>
<li>HANJA: 25</li>
<li>KANJI: 25</li>
<li>ESCAPE: 27</li>
<li>CONVERT: 28</li>
<li>NONCONVERT: 29</li>
<li>ACCEPT: 30</li>
<li>MODECHANGE: 31</li>
<li>SPACE: 32</li>
<li>PRIOR: 33</li>
<li>NEXT: 34</li>
<li>END: 35</li>
<li>HOME: 36</li>
<li>LEFT: 37</li>
<li>UP: 38</li>
<li>RIGHT: 39</li>
<li>DOWN: 40</li>
<li>SELECT: 41</li>
<li>PRINT: 42</li>
<li>EXECUTE: 43</li>
<li>SNAPSHOT: 44</li>
<li>INSERT: 45</li>
<li>DELETE: 46</li>
<li>HELP: 47</li>
<li>0: 30</li>
<li>1: 31</li>
<li>2: 32</li>
<li>3: 33</li>
<li>4: 34</li>
<li>5: 35</li>
<li>6: 36</li>
<li>7: 37</li>
<li>8: 38</li>
<li>9: 39</li>
<li>A: 41</li>
<li>B: 42</li>
<li>C: 43</li>
<li>D: 44</li>
<li>E: 45</li>
<li>F: 46</li>
<li>G: 47</li>
<li>H: 48</li>
<li>I: 49</li>
<li>J: 4A</li>
<li>K: 4B</li>
<li>L: 4C</li>
<li>M: 4D</li>
<li>N: 4E</li>
<li>O: 4F</li>
<li>P: 50</li>
<li>Q: 51</li>
<li>R: 52</li>
<li>S: 53</li>
<li>T: 54</li>
<li>U: 55</li>
<li>V: 56</li>
<li>W: 57</li>
<li>X: 58</li>
<li>Y: 59</li>
<li>Z: 5A</li>
<li>LWIN: 5B</li>
<li>RWIN: 5C</li>
<li>APPS: 5D</li>
<li>SLEEP: 5F</li>
<li>NUMPAD0: 96</li>
<li>NUMPAD1: 97</li>
<li>NUMPAD2: 98</li>
<li>NUMPAD3: 99</li>
<li>NUMPAD4: 100</li>
<li>NUMPAD5: 101</li>
<li>NUMPAD6: 102</li>
<li>NUMPAD7: 103</li>
<li>NUMPAD8: 104</li>
<li>NUMPAD9: 105</li>
<li>MULTIPLY: 106</li>
<li>ADD: 107</li>
<li>SEPARATOR: 108</li>
<li>SUBTRACT: 109</li>
<li>DECIMAL: 110</li>
<li>DIVIDE: 111</li>
<li>F1: 112</li>
<li>F2: 113</li>
<li>F3: 114</li>
<li>F4: 115</li>
<li>F5: 116</li>
<li>F6: 117</li>
<li>F7: 118</li>
<li>F8: 119</li>
<li>F9: 120</li>
<li>F10: 121</li>
<li>F11: 122</li>
<li>F12: 123</li>
<li>F13: 124</li>
<li>F14: 125</li>
<li>F15: 126</li>
<li>F16: 127</li>
<li>F17: 128</li>
<li>F18: 129</li>
<li>F19: 130</li>
<li>F20: 131</li>
<li>F21: 132</li>
<li>F22: 133</li>
<li>F23: 134</li>
<li>F24: 135</li>
<li>NUMLOCK: 90</li>
<li>SCROLL: 91</li>
<li>LSHIFT: A0</li>
<li>RSHIFT: A1</li>
<li>LCONTROL: A2</li>
<li>RCONTROL: A3</li>
<li>LMENU: A4</li>
<li>RMENU: A5</li>
<li>BROWSER_BACK: A6</li>
<li>BROWSER_FORWARD: A7</li>
<li>BROWSER_REFRESH: A8</li>
<li>BROWSER_STOP: A9</li>
<li>BROWSER_SEARCH: AA</li>
<li>BROWSER_FAVORITES: AB</li>
<li>BROWSER_HOME: AC</li>
<li>VOLUME_MUTE: AD</li>
<li>VOLUME_DOWN: AE</li>
<li>VOLUME_UP: AF</li>
<li>MEDIA_NEXT_TRACK: B0</li>
<li>MEDIA_PREV_TRACK: B1</li>
<li>MEDIA_STOP: B2</li>
<li>MEDIA_PLAY_PAUSE: B3</li>
<li>LAUNCH_MAIL: B4</li>
<li>LAUNCH_MEDIA_SELECT: B5</li>
<li>LAUNCH_APP1: B6</li>
<li>LAUNCH_APP2: B7</li>
<li>OEM_1: BA</li>
<li>OEM_PLUS: BB</li>
<li>OEM_COMMA: BC</li>
<li>OEM_MINUS: BD</li>
<li>OEM_PERIOD: BE</li>
<li>OEM_2: BF</li>
<li>OEM_3: C0</li>
<li>OEM_4: DB</li>
<li>OEM_5: DC</li>
<li>OEM_6: DD</li>
<li>OEM_7: DE</li>
<li>OEM_8: DF</li>
<li>OEM_102: E2</li>
<li>PROCESSKEY: E7</li>
<li>ATTN: F6</li>
<li>CRSEL: F7</li>
<li>EXSEL: F8</li>
<li>EREOF: F9</li>
<li>PLAY: FA</li>
<li>ZOOM: FB</li>
<li>NONAME: FC</li>
<li>PA1: FD</li>
<li>OEM_CLEAR: FE</li>
<li>HIGHESTVALUE: FE</li>
<li>UNDEFINED: FF</li>
</ul>
</div>
</div>
<span id="document-scriptref/colourfinding"></span><div class="section" id="colour-finding">
<span id="scriptref-finding"></span><span id="scriptref-colour"></span><h3>Colour Finding<a class="headerlink" href="#colour-finding" title="Permalink to this headline">¶</a></h3>
<p>Finding colours on the screen is quite simple. Simba offers methods like
<tt class="docutils literal"><span class="pre">FindColor</span></tt> to locate colours on the screen.</p>
<p>These methods are usually composed out of several (but not always all)
components:</p>
<blockquote>
<div><ul>
<li><p class="first">The colour to search for. This is an RGB color.</p>
</li>
<li><p class="first">An area to search in, defined by <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>.
If any of coordinates are outside the clients bounds; two things can
happen depending on your settings:</p>
<blockquote>
<div><ul class="simple">
<li>Simba throws an Exception.</li>
<li>Simba will resize the bounds to fit the client without notifying
you.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Tolerance applied to the colour matching. With a maximum tolerance all
colours are matched.</p>
</li>
<li><p class="first">Spiral. A spiral defines a point where the search will start from.
This is particulary useful if you want the first result near specific
coordinates.</p>
</li>
<li><p class="first">AreaSize. The size the box of colours should be. Usually this is not
adjustable.</p>
</li>
<li><p class="first">A single point in <em>x</em>, <em>y</em> can be returned, or a set or points called
a <em>TPointArray</em>.</p>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Other techniques exist, which involve relative point distance from one point
to another; these are found in the <a class="reference internal" href="index.html#scriptref-dtm"><em>Deformable Template Models (DTM)</em></a> section.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Although the documentation uses the <tt class="docutils literal"><span class="pre">English</span></tt> spelling of
<tt class="docutils literal"><span class="pre">colour</span></tt>; the code for compatibility sake uses <tt class="docutils literal"><span class="pre">color</span></tt>, without the u.</p>
</div>
<div class="section" id="colour-finding-methods">
<h4>Colour Finding Methods<a class="headerlink" href="#colour-finding-methods" title="Permalink to this headline">¶</a></h4>
<p>A list of all colour finding methods in Simba.</p>
<div class="section" id="similarcolors">
<span id="scriptref-similarcolors"></span><h5>SimilarColors<a class="headerlink" href="#similarcolors" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SimilarColors</span><span class="p">(</span><span class="n">C1</span><span class="o">,</span> <span class="n">C2</span><span class="o">,</span> <span class="n">Tolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>SimilarColors returns true if the two passed colours are <em>similar</em> given the
passed <em>Tolerance</em>.</p>
</div>
<div class="section" id="getcolor">
<span id="scriptref-getcolor"></span><h5>GetColor<a class="headerlink" href="#getcolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetColor</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>GetColor returns the color on the coordinate <em>(x, y)</em>.</p>
<p>Example printing the colour on coordinate (25, 25).</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">printcolour</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Colour is &#39;</span> <span class="o">+</span> <span class="nb">IntToStr</span><span class="p">(</span><span class="n">GetColor</span><span class="p">(</span><span class="mi">25</span><span class="o">,</span> <span class="mi">25</span><span class="p">)))</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="getcolors">
<span id="scriptref-getcolors"></span><h5>GetColors<a class="headerlink" href="#getcolors" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetColors</span><span class="p">(</span><span class="k">const</span> <span class="n">Coords</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>GetColors returns an array of the colours at the given <em>Coords</em>.</p>
</div>
<div class="section" id="countcolor">
<span id="scriptref-countcolor"></span><h5>CountColor<a class="headerlink" href="#countcolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CountColor</span><span class="p">(</span><span class="n">Color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns how many times <em>Color</em> occurs in the area defined by (<em>xs</em>, <em>ys</em>),
(<em>xe</em>, <em>ye</em>)</p>
</div>
<div class="section" id="countcolortolerance">
<span id="scriptref-countcolortolerance"></span><h5>CountColorTolerance<a class="headerlink" href="#countcolortolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CountColorTolerance</span><span class="p">(</span><span class="n">Color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">,</span> <span class="n">Tolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns how many times <em>Color</em> occurs (within <em>Tolerance</em>)
in the area defined by (<em>xs</em>, <em>ys</em>), (<em>xe</em>, <em>ye</em>)</p>
</div>
<div class="section" id="findcolor">
<span id="scriptref-findcolor"></span><h5>FindColor<a class="headerlink" href="#findcolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColor</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">col</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColor returns true if the exact colour given (col) is found in the box
defined by <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>.
The point is returned in <em>x</em> and <em>y</em>.
It searches from the top left to the bottom right and will stop
after matching a point.</p>
</div>
<div class="section" id="findcolortolerance">
<span id="scriptref-findcolortolerance"></span><h5>FindColorTolerance<a class="headerlink" href="#findcolortolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColorTolerance</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">col</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColorTolerance returns true if a colour within the given tolerance range
<em>tol</em> of the given colour <em>col</em> is found in the box defined by <em>x1</em>, <em>y1</em>,
<em>x2</em>, <em>y2</em>.
Only the first point is returned in <em>x</em> and <em>y</em>.
Whether or not a colour is within the tolerance range is determined by the
<a class="reference internal" href="index.html#scriptref-cts"><em>Colour tolerance</em></a> mode. It searches from the top left to the bottom right
and will stop after matching a point.</p>
</div>
<div class="section" id="findcolors">
<span id="scriptref-findcolors"></span><h5>FindColors<a class="headerlink" href="#findcolors" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColors</span><span class="p">(</span><span class="k">var</span> <span class="n">pts</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">col</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColors returns a list of all points that match the colour <em>col</em> in an area
defined by <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>. It returns true if one or more points have
been found.</p>
</div>
<div class="section" id="findcolorstolerance">
<span id="scriptref-findcolorstolerance"></span><h5>FindColorsTolerance<a class="headerlink" href="#findcolorstolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColorsTolerance</span><span class="p">(</span><span class="k">var</span> <span class="n">pts</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">col</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColorsTolerance returns true if at least one point was found.
A point is found if it is within the given tolerance range <em>tol</em>
of the given colour <em>col</em> and inside the box defined by <em>x1</em>, <em>y1</em>, <em>x2</em>, <em>y2</em>.
Whether or not a color is within the tolerance range is determined by the
<a class="reference internal" href="index.html#scriptref-cts"><em>Colour tolerance</em></a> mode.
It searches from the top left to the bottom right and will find all
matching points in the area.</p>
</div>
<div class="section" id="findcolorspiral">
<span id="scriptref-findcolorspiral"></span><h5>FindColorSpiral<a class="headerlink" href="#findcolorspiral" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColorSpiral</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span><span class="n">ys</span><span class="o">,</span><span class="n">xe</span><span class="o">,</span><span class="n">ye</span><span class="o">:</span><span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Same as FindColor, but starts searching from <em>x</em>, <em>y</em>.</p>
</div>
<div class="section" id="findcolorspiraltolerance">
<span id="scriptref-findcolorspiraltolerance"></span><h5>FindColorSpiralTolerance<a class="headerlink" href="#findcolorspiraltolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColorSpiralTolerance</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span><span class="n">ys</span><span class="o">,</span><span class="n">xe</span><span class="o">,</span><span class="n">ye</span><span class="o">,</span><span class="n">tolerance</span><span class="o">:</span><span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span>
</pre></div>
</div>
<p>Same as FindColorTolerance, but starts searching from <em>x</em>, <em>y</em>.</p>
</div>
<div class="section" id="findcolorsspiraltolerance">
<span id="scriptref-findcolorsspiraltolerance"></span><h5>FindColorsSpiralTolerance<a class="headerlink" href="#findcolorsspiraltolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColorsSpiralTolerance</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">pts</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">col</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Same as FindColorsTolerance, but starts searching from <em>x</em>, <em>y</em>.</p>
</div>
<div class="section" id="find-areas-of-colours">
<span id="scriptref-findcoloredareatolerance"></span><span id="scriptref-findcoloredarea"></span><h5>Find areas of colours<a class="headerlink" href="#find-areas-of-colours" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColoredArea</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">,</span> <span class="n">MinArea</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColoredArea finds an area that consists out of <em>Color</em> and has a minimal
size of <em>MinArea</em>. If you want minimal area of 5x5 pixels (25), then set MinArea
to 25.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindColoredAreaTolerance</span><span class="p">(</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">color</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">,</span> <span class="n">MinArea</span><span class="o">,</span> <span class="n">Tolerance</span> <span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindColoredArea finds an area that consists out of Colours that match <em>Color</em> with
the given <em>Tolerance</em> and has a minimal size of <em>MinArea</em>.
If you want minimal area of 5x5 pixels (25), then set MinArea to 25.</p>
</div>
</div>
<div class="section" id="colour-tolerance">
<span id="scriptref-cts"></span><h4>Colour tolerance<a class="headerlink" href="#colour-tolerance" title="Permalink to this headline">¶</a></h4>
<p>Simba contains several algorithms for determining if two colours are equal
given a tolerance. There are three algorithms, from fastest to slowest:</p>
<blockquote>
<div><ul class="simple">
<li>CTS 0: Quick and dirty comparison. Matches if the differences between the
three RGB values are &lt;= Tolerance</li>
<li>CTS 1: RGB comparison that uses the Pythagorean distance in the RGB cube
to define tolerance. Matches if the distance &lt;= Tolerance.</li>
<li>CTS 2: HSL comparison. It has two modifiers that modify the
result tolerance, Hue and Saturation. The lower the modifier, the higher
tolerance required for a match. They can be set seperately and therefore
used to distinguish very specific colours. Some differ a lot in saturation, but
very little in hue. Luminance is assigned a somewhat static function, and
has no modifier.</li>
<li>CTS 3: Comparison using CIE L*a*b colour space, uses Pythagorean
distance.</li>
</ul>
</div></blockquote>
<div class="section" id="get-and-set-colour-tolerance">
<span id="scriptref-setcolortolerancespeed"></span><span id="scriptref-gettolerancespeed"></span><h5>Get and Set Colour Tolerance<a class="headerlink" href="#get-and-set-colour-tolerance" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetColorToleranceSpeed</span><span class="p">(</span><span class="n">cts</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the current colour tolerance speed. Valid values are: 0, 1 and 2.
Somewhat improperly named compared to the other CTS functions.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">SetColorToleranceSpeed</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>And the proper way to get the current tolerance is to use the following
function, which returns the current colour tolerance speed:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetToleranceSpeed</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Example printing the Color Tolerance</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="nb">Writeln</span><span class="p">(</span><span class="nb">Format</span><span class="p">(</span><span class="s">&#39;Tolerance Speed = %d&#39;</span><span class="o">,</span> <span class="p">[</span><span class="n">GetToleranceSpeed</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="section" id="get-and-set-colour-modifiers">
<span id="scriptref-gettolerancespeed2modifiers"></span><span id="scriptref-settolerancespeed2modifiers"></span><h5>Get And Set Colour Modifiers<a class="headerlink" href="#get-and-set-colour-modifiers" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetToleranceSpeed2Modifiers</span><span class="p">(</span><span class="n">nHue</span><span class="o">,</span> <span class="n">nSat</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set colour speed 2 modifiers.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="c1">// 42.0 is a very high value, but this doesn&#39;t matter as this code is</span>
<span class="c1">// only meant to illustrate how to use this function</span>
<span class="n">SetToleranceSpeed2Modifiers</span><span class="p">(</span><span class="mi">4</span><span class="mf">2.0</span><span class="o">,</span> <span class="mf">0.4</span><span class="p">)</span>
</pre></div>
</div>
<p>The following function</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">GetToleranceSpeed2Modifiers</span><span class="p">(</span><span class="k">var</span> <span class="n">hMod</span><span class="o">,</span> <span class="n">sMod</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>returns colour speed 2 modifiers.</p>
<p>Example getting the modifiers:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">WriteModifiers</span><span class="o">;</span>
<span class="k">var</span>
    <span class="n">H</span><span class="o">,</span> <span class="n">S</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
<span class="k">begin</span>
    <span class="n">GetToleranceSpeed2Modifiers</span><span class="p">(</span><span class="n">H</span><span class="o">,</span> <span class="n">S</span><span class="p">)</span><span class="o">;</span>
    <span class="nb">Writeln</span><span class="p">(</span><span class="nb">format</span><span class="p">(</span><span class="s">&#39;H = %f; S = %f&#39;</span><span class="o">,</span> <span class="p">[</span><span class="n">H</span><span class="o">,</span> <span class="n">S</span><span class="p">]))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-scriptref/colourconverting"></span><div class="section" id="colour-conversions">
<span id="scriptref-colourconv"></span><h3>Colour Conversions<a class="headerlink" href="#colour-conversions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="colour-spaces">
<h4>Colour spaces<a class="headerlink" href="#colour-spaces" title="Permalink to this headline">¶</a></h4>
<p>Explain some colour spaces here.</p>
</div>
<div class="section" id="colour-conversion-methods">
<h4>Colour Conversion Methods<a class="headerlink" href="#colour-conversion-methods" title="Permalink to this headline">¶</a></h4>
<div class="section" id="colortorgb">
<span id="scriptref-colortorgb"></span><h5>ColorToRGB<a class="headerlink" href="#colortorgb" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ColorToRGB</span><span class="p">(</span><span class="n">Color</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">r</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="rgbtocolor">
<span id="scriptref-rgbtocolor"></span><h5>RGBtoColor<a class="headerlink" href="#rgbtocolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RGBtoColor</span><span class="p">(</span><span class="n">r</span><span class="o">,</span> <span class="n">g</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TColor</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="colortohsl">
<span id="scriptref-colortohsl"></span><h5>ColorToHSL<a class="headerlink" href="#colortohsl" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ColorToHSL</span><span class="p">(</span><span class="n">Color</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">h</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="n">l</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="hsltocolor">
<span id="scriptref-hsltocolor"></span><h5>HSLToColor<a class="headerlink" href="#hsltocolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">HSLToColor</span><span class="p">(</span><span class="n">H</span><span class="o">,</span> <span class="n">S</span><span class="o">,</span> <span class="n">L</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="n">TColor</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="colortoxyz">
<span id="scriptref-colortoxyz"></span><h5>ColorToXYZ<a class="headerlink" href="#colortoxyz" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ColorToXYZ</span><span class="p">(</span><span class="n">Color</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">z</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="xyztocolor">
<span id="scriptref-xyztocolor"></span><h5>XYZToColor<a class="headerlink" href="#xyztocolor" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">XYZToColor</span><span class="p">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Y</span><span class="o">,</span> <span class="n">Z</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="n">TColor</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="rgbtohsl">
<span id="scriptref-rgbtohsl"></span><h5>RGBToHSL<a class="headerlink" href="#rgbtohsl" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RGBToHSL</span><span class="p">(</span><span class="n">R</span><span class="o">,</span> <span class="n">G</span><span class="o">,</span> <span class="n">B</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">h</span><span class="o">,</span> <span class="n">s</span><span class="o">,</span> <span class="n">l</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="hsltorgb">
<span id="scriptref-hsltorgb"></span><h5>HSLtoRGB<a class="headerlink" href="#hsltorgb" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">HSLtoRGB</span><span class="p">(</span><span class="n">H</span><span class="o">,</span> <span class="n">S</span><span class="o">,</span> <span class="n">L</span><span class="o">:</span> <span class="kt">extended</span><span class="o">;</span> <span class="k">var</span> <span class="n">R</span><span class="o">,</span> <span class="n">G</span> <span class="o">,</span><span class="n">B</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="rgbtoxyz">
<span id="scriptref-rgbtoxyz"></span><h5>RGBToXYZ<a class="headerlink" href="#rgbtoxyz" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RGBToXYZ</span><span class="p">(</span><span class="n">R</span><span class="o">,</span> <span class="n">G</span><span class="o">,</span> <span class="n">B</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">,</span><span class="n">z</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="xyztorgb">
<span id="scriptref-xyztorgb"></span><h5>XYZToRGB<a class="headerlink" href="#xyztorgb" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">XYZToRGB</span><span class="p">(</span><span class="n">X</span><span class="o">,</span> <span class="n">Y</span><span class="o">,</span> <span class="n">Z</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="k">var</span> <span class="n">R</span><span class="o">,</span> <span class="n">G</span><span class="o">,</span> <span class="n">B</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-scriptref/files"></span><div class="section" id="working-with-files">
<h3>Working with Files<a class="headerlink" href="#working-with-files" title="Permalink to this headline">¶</a></h3>
<p>Files in Simba are all <em>integers</em>, internal handles for Simba which on their
turn point to operating system files. Functions like CreateFile and OpenFile
return a file handle. You should not forget to close these when you no longer
need them.</p>
<div class="section" id="createfile">
<h4>CreateFile<a class="headerlink" href="#createfile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateFile</span><span class="p">(</span><span class="k">const</span> <span class="n">Path</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a file with <em>Path</em>. Raturns -1 on failure, otherwise returns the handle
to the file.</p>
</div>
<div class="section" id="openfile">
<h4>OpenFile<a class="headerlink" href="#openfile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">OpenFile</span><span class="p">(</span><span class="k">const</span> <span class="n">Path</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Shared</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Opens file for reading. Opens shared if <em>Shared</em> is true.
Returns -1 on failure, otherwise returns the handle to the file.</p>
</div>
<div class="section" id="rewritefile">
<h4>RewriteFile<a class="headerlink" href="#rewritefile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RewriteFile</span><span class="p">(</span><span class="k">const</span> <span class="n">Path</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Shared</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Opens file for rewriting. (File is cleared on open)
Opens shared if <em>Shared</em> is true.
Returns -1 on failure, otherwise returns the handle to the file.</p>
</div>
<div class="section" id="appendfile">
<h4>AppendFile<a class="headerlink" href="#appendfile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AppendFile</span><span class="p">(</span><span class="k">const</span> <span class="n">Path</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Opens file for writing (appending).
Returns -1 on failure, otherwise returns the handle to the file.</p>
</div>
<div class="section" id="closefile">
<h4>CloseFile<a class="headerlink" href="#closefile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CloseFile</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Close the file defined by <em>FileNum</em>. Never forget to close your files!</p>
</div>
<div class="section" id="deletefile">
<h4>DeleteFile<a class="headerlink" href="#deletefile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DeleteFile</span><span class="p">(</span><span class="k">const</span> <span class="n">Filename</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Delete the file with name <em>Filename</em>. Returns true on success.</p>
</div>
<div class="section" id="endoffile">
<h4>EndOfFile<a class="headerlink" href="#endoffile" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">EndOfFile</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the end of the file has been reached.</p>
</div>
<div class="section" id="filesize">
<h4>FileSize<a class="headerlink" href="#filesize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FileSize</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">LongInt</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the file size in characters.</p>
</div>
<div class="section" id="readfilestring">
<h4>ReadFileString<a class="headerlink" href="#readfilestring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReadFileString</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">s</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">x</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span>
<span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Read <em>x</em> characters into string <em>s</em> from file <em>FileNum</em>.
Returns true if the number of characters read equals <em>x</em>.</p>
</div>
<div class="section" id="writefilestring">
<h4>WriteFileString<a class="headerlink" href="#writefilestring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">WriteFileString</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">s</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Writes <em>s</em> to file <em>FileNum</em>. Returns false on failure.</p>
</div>
<div class="section" id="setfilecharpointer">
<h4>SetFileCharPointer<a class="headerlink" href="#setfilecharpointer" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SetFileCharPointer</span><span class="p">(</span><span class="n">FileNum</span><span class="o">,</span> <span class="n">cChars</span><span class="o">,</span> <span class="n">Origin</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p><em>Seek</em> through the file. Set the cursor to <em>cChars</em> from <em>Origin</em>.</p>
<p>Origin can be any of these:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="cm">{ File seek origins }</span>
<span class="n">FsFromBeginning</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="n">FsFromCurrent</span>   <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">FsFromEnd</span>       <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="filepointerpos">
<h4>FilePointerPos<a class="headerlink" href="#filepointerpos" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FilePointerPos</span><span class="p">(</span><span class="n">FileNum</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the position of the <em>cursur</em> in the file.
(What character # you are at)</p>
</div>
<div class="section" id="directoryexists">
<h4>DirectoryExists<a class="headerlink" href="#directoryexists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DirectoryExists</span><span class="p">(</span><span class="k">const</span> <span class="n">DirectoryName</span> <span class="o">:</span> <span class="k">string</span> <span class="p">)</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the directory exists.</p>
</div>
<div class="section" id="createdirectory">
<h4>CreateDirectory<a class="headerlink" href="#createdirectory" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateDirectory</span><span class="p">(</span><span class="k">const</span> <span class="n">DirectoryName</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates a directory. Returns true on success.</p>
</div>
<div class="section" id="fileexists">
<h4>FileExists<a class="headerlink" href="#fileexists" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FileExists</span> <span class="p">(</span><span class="k">const</span> <span class="n">FileName</span> <span class="o">:</span> <span class="k">string</span> <span class="p">)</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the file exists.</p>
</div>
<div class="section" id="forcedirectories">
<h4>ForceDirectories<a class="headerlink" href="#forcedirectories" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ForceDirectories</span><span class="p">(</span><span class="k">const</span> <span class="n">dir</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates multiple <em>nested</em> directories. Returns true on success.</p>
</div>
<div class="section" id="getfiles">
<h4>GetFiles<a class="headerlink" href="#getfiles" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetFiles</span><span class="p">(</span><span class="k">const</span> <span class="n">Path</span><span class="o">,</span> <span class="n">Ext</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="n">TStringArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the files in the directory defined by <em>Path</em> with extension <em>Ext</em>.
You can also set Ext as &#8216;*&#8217; to return all files in Path.</p>
</div>
<div class="section" id="getdirectories">
<h4>GetDirectories<a class="headerlink" href="#getdirectories" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetDirectories</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="n">TStringArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the directories in <em>path</em>.</p>
</div>
<div class="section" id="writeini">
<h4>WriteINI<a class="headerlink" href="#writeini" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">WriteINI</span><span class="p">(</span><span class="k">const</span> <span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">NewString</span><span class="o">,</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>The following example writes to a specific Line in a Specified INI File.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">WriteINIExample</span><span class="o">;</span>

<span class="k">Var</span> <span class="n">Section</span><span class="o">,</span> <span class="n">Keyname</span><span class="o">,</span> <span class="n">NewString</span><span class="o">,</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">Section</span> <span class="o">:=</span> <span class="s">&#39;What subsection in the INI it is being Writen.&#39;</span><span class="o">;</span>
  <span class="n">KeyName</span> <span class="o">:=</span> <span class="s">&#39;Space in the specified Subsection in which you string is writen.&#39;</span><span class="o">;</span>
  <span class="n">NewString</span> <span class="o">:=</span> <span class="s">&#39;What your Writing into the INI file.&#39;</span><span class="o">;</span>
  <span class="n">FileName</span> <span class="o">:=</span> <span class="s">&#39;The Name of the INI File you are writing too.&#39;</span><span class="o">;</span>
  <span class="n">WriteINI</span><span class="p">(</span><span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">NewString</span><span class="o">,</span> <span class="n">ScriptPath</span> <span class="o">+</span> <span class="n">FileName</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">ScriptPath will Automatically point the file finding to the same folder the script is saved in.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This procedure can be used in conjunction with ReadINI to saved Player Data for the next time a script is run.</p>
</div>
</div>
<div class="section" id="readini">
<h4>ReadINI<a class="headerlink" href="#readini" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReadINI</span><span class="p">(</span><span class="k">const</span> <span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>The following example writes to a specific Line in a Specified INI File then Reads that line and prints it&#8217;s findings.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">WriteINIReference</span><span class="o">;</span>

<span class="k">Var</span> <span class="n">Section</span><span class="o">,</span> <span class="n">Keyname</span><span class="o">,</span> <span class="n">NewString</span><span class="o">,</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">Section</span> <span class="o">:=</span> <span class="s">&#39;What subsection in the INI it is being Writen.&#39;</span><span class="o">;</span>
  <span class="n">KeyName</span> <span class="o">:=</span> <span class="s">&#39;Space in the specified Subsection in which you string is writen.&#39;</span><span class="o">;</span>
  <span class="n">NewString</span> <span class="o">:=</span> <span class="s">&#39;What your Writing into the INI file.&#39;</span><span class="o">;</span>
  <span class="n">FileName</span> <span class="o">:=</span> <span class="s">&#39;The Name of the INI File you are writing too.&#39;</span><span class="o">;</span>
  <span class="n">WriteINI</span><span class="p">(</span><span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">NewString</span><span class="o">,</span> <span class="n">ScriptPath</span> <span class="o">+</span> <span class="n">FileName</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="n">ReadINI</span><span class="p">(</span><span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">ScriptPath</span> <span class="o">+</span> <span class="n">FileName</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="deleteini">
<h4>DeleteINI<a class="headerlink" href="#deleteini" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DeleteINI</span><span class="p">(</span><span class="k">const</span> <span class="n">Section</span><span class="o">,</span> <span class="n">KeyName</span><span class="o">,</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>The following example deletes the specific line inside the specified INI file.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">DeleteINIExample</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">DeleteINI</span><span class="p">(</span><span class="s">&#39;Section&#39;</span><span class="o">,</span> <span class="n">Key</span><span class="o">,</span> <span class="k">File</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="extractfileext">
<h4>ExtractFileExt<a class="headerlink" href="#extractfileext" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ExtractFileExt</span><span class="p">(</span><span class="k">const</span> <span class="n">FileName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span><span class="s">&#39;);</span>
</pre></div>
</div>
<p>Returns the file extension from file <em>Filename</em>.</p>
</div>
<div class="section" id="deletedirectory">
<h4>DeleteDirectory<a class="headerlink" href="#deletedirectory" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DeleteDirectory</span><span class="p">(</span><span class="k">const</span> <span class="n">Dir</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="k">const</span> <span class="n">Empty</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Deletes the directory <em>dir</em>, if Empty is true will delete the directorys contents else will not.</p>
</div>
</div>
<span id="document-scriptref/ocr"></span><div class="section" id="ocr">
<span id="scriptref-ocr"></span><h3>OCR<a class="headerlink" href="#ocr" title="Permalink to this headline">¶</a></h3>
<p>Simba has OCR functions (Optical Text Recognition); these are used to <em>read</em> text from an image.</p>
<p>It also has a wide variation of text <em>finding</em> functions. Both will be covered in
this article.</p>
<div class="section" id="fonts">
<h4>Fonts<a class="headerlink" href="#fonts" title="Permalink to this headline">¶</a></h4>
<p>Fonts are an essential part of the text finding and identifying.
Now follows a brief explanation of the Font related functions in Simba.</p>
<p>All fonts have an unique identifier in the shape of a <tt class="docutils literal"><span class="pre">string</span></tt>.
If you create or load a new font, they will need to be given a name.</p>
<div class="section" id="loadsystemfont">
<h5>LoadSystemFont<a class="headerlink" href="#loadsystemfont" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal" id="scriptref-fonts"><div class="highlight"><pre><span class="k">function</span> <span class="nf">LoadSystemFont</span><span class="p">(</span><span class="k">const</span> <span class="n">SysFont</span><span class="o">:</span> <span class="n">TFont</span><span class="o">;</span> <span class="k">const</span> <span class="n">FontName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span>
<span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>This font loads a previously created Font with the name specified by
<em>FontName</em>.</p>
<p>Example:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="k">new</span><span class="o">;</span>
<span class="k">var</span>
  <span class="n">Font</span> <span class="o">:</span> <span class="n">TFont</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">Font</span> <span class="o">:=</span> <span class="n">TFont</span><span class="o">.</span><span class="n">Create</span><span class="o">;</span>
  <span class="n">Font</span><span class="o">.</span><span class="n">Name</span> <span class="o">:=</span> <span class="s">&#39;Courier New&#39;</span><span class="o">;</span>
  <span class="n">Font</span><span class="o">.</span><span class="n">Size</span> <span class="o">:=</span> <span class="mi">10</span><span class="o">;</span>
  <span class="n">Font</span><span class="o">.</span><span class="n">Style</span> <span class="o">:=</span> <span class="p">[]</span><span class="o">;</span>
  <span class="n">LoadSystemFont</span><span class="p">(</span><span class="n">Font</span><span class="o">,</span><span class="s">&#39;test&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">DisplayDebugImgWindow</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="p">)</span><span class="o">;</span>
  <span class="n">DisplayDebugImgWindow</span><span class="p">(</span><span class="mi">150</span><span class="o">,</span><span class="mi">50</span><span class="p">)</span><span class="o">;</span>
  <span class="n">DrawBitmapDebugImg</span><span class="p">(</span><span class="n">BitmapFromText</span><span class="p">(</span><span class="s">&#39;BMP[0] has not been freed&#39;</span><span class="o">,</span><span class="s">&#39;test&#39;</span><span class="p">))</span><span class="o">;</span>
  <span class="n">Font</span><span class="o">.</span><span class="n">free</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="loadfont">
<h5>LoadFont<a class="headerlink" href="#loadfont" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">LoadFont</span><span class="p">(</span><span class="k">const</span> <span class="n">FontName</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">shadow</span><span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Load the font specific by the <em>FontName</em>. The font has to recide in the Fonts
directory.</p>
<p>As of Simba version 993 and up, LoadFont also accepts paths outside
the Fonts directory. In this case <em>FontName</em> is thus an entire path; and the
internal font name is simply the name of the last folder in the path.</p>
</div>
<div class="section" id="freefont">
<h5>FreeFont<a class="headerlink" href="#freefont" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FreeFont</span><span class="p">(</span><span class="k">const</span> <span class="n">FontName</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>This function is used to free a font identified by <em>FontName</em>.</p>
</div>
<div class="section" id="bitmapfromtext">
<h5>BitmapFromText<a class="headerlink" href="#bitmapfromtext" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BitmapFromText</span><span class="p">(</span><span class="k">const</span> <span class="n">text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>This function creates a bitmap from a string <em>text</em> with the given <em>font</em>.
For an explanation on how to use and work with Bitmaps, please refer to
<a class="reference internal" href="index.html#scriptref-bitmaps"><em>Bitmaps</em></a>.</p>
</div>
<div class="section" id="tpafromtext">
<h5>TPAFromText<a class="headerlink" href="#tpafromtext" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromText</span><span class="p">(</span><span class="k">const</span> <span class="n">text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span><span class="k">var</span> <span class="n">w</span><span class="o">,</span><span class="n">h</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>This function creates a TPA from a string <em>text</em> with the given <em>font</em>.
For an explanation on how to use and work with TPAs, please refer to
<em class="xref std std-ref">scriptref-tpointarray</em>.</p>
</div>
<div class="section" id="tpafromtextwrap">
<h5>TPAFromTextWrap<a class="headerlink" href="#tpafromtextwrap" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPAFromTextWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span><span class="k">var</span> <span class="n">w</span><span class="o">,</span><span class="n">h</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">var</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>A wrapper function for the previously mentioned function. Required to
work arounds bugs in the interpreter.</p>
</div>
<div class="section" id="maskfromtext">
<h5>MaskFromText<a class="headerlink" href="#maskfromtext" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MaskFromText</span><span class="p">(</span><span class="k">const</span> <span class="n">text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="n">TMask</span><span class="o">;</span>
</pre></div>
</div>
<p>This function creates a Mask from a string <em>text</em> with the given <em>font</em>.
For an explanation on how to use and work with TPAs, please refer to
<em class="xref std std-ref">scriptref-masks</em>.</p>
</div>
</div>
<div class="section" id="reading-text">
<h4>Reading Text<a class="headerlink" href="#reading-text" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rs-getuptext">
<h5>rs_GetUpText<a class="headerlink" href="#rs-getuptext" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">rs_GetUpText</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>This function is a function specific to RuneScape(tm); it reads the text
in the upper left corner into a string.</p>
<p>How these functions actually work can be found here: <a class="reference internal" href="index.html#uptext-filter"><em>Uptext</em></a>.</p>
</div>
<div class="section" id="rs-getuptextat">
<h5>rs_GetUpTextAt<a class="headerlink" href="#rs-getuptextat" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">rs_GetUpTextAt</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>This function is a function specific to RuneScape(tm); it reads the text
at the specified position in (<em>x</em>, <em>y</em>) into a string.</p>
</div>
<div class="section" id="rs-getuptextatex">
<h5>rs_GetUpTextAtEx<a class="headerlink" href="#rs-getuptextatex" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">rs_GetUpTextAt</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">shadow</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span> <span class="n">fontname</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>This function is a function specific to RuneScape(tm); it reads the text
at the specified position in (<em>x</em>, <em>y</em>) into a string, optionally using the
shadows of the font. Fontname specifies the name of the font to use; with the
other functions this defaults to &#8220;UpChars&#8221;.</p>
</div>
<div class="section" id="gettextat">
<h5>GetTextAt<a class="headerlink" href="#gettextat" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTextAt</span><span class="p">(</span><span class="k">const</span> <span class="n">atX</span><span class="o">,</span> <span class="n">atY</span><span class="o">,</span> <span class="n">minvspacing</span><span class="o">,</span> <span class="n">maxvspacing</span><span class="o">,</span> <span class="n">hspacing</span><span class="o">,</span><span class="n">color</span><span class="o">,</span> <span class="n">tol</span><span class="o">,</span> <span class="n">len</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">const</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>A general function for reading text.
Reads text at (<em>atX</em>, <em>atY</em>) with a minimal vertical spacing of <em>minvspacing</em>
and a maximal vertical spacing of <em>maxvspacing</em>, the text colour should match
the colour <em>color</em> with the given tolerance <em>Tolerance</em>; the length of the text
is specified with <em>len</em>. Finally, the font to use for the identifying is
specified with the fontname <em>font</em>.</p>
</div>
<div class="section" id="gettextatex">
<h5>GetTextAtEx<a class="headerlink" href="#gettextatex" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTextAtEx</span><span class="p">(</span><span class="k">const</span> <span class="n">xs</span><span class="o">,</span><span class="n">ys</span><span class="o">,</span><span class="n">xe</span><span class="o">,</span><span class="n">ye</span><span class="o">,</span> <span class="n">minvspacing</span><span class="o">,</span> <span class="n">maxvspacing</span><span class="o">,</span> <span class="n">hspacing</span><span class="o">,</span><span class="n">color</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">const</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>A general function for reading text.
Reads text in the rectangle defined by (<em>xs</em>, <em>ys</em>), (<em>xe</em>, <em>ye</em>)
with a minimal vertical spacing of <em>minvspacing</em>
and a maximal vertical spacing of <em>maxvspacing</em>, the text colour should match
the colour <em>color</em> with the given tolerance <em>Tolerance</em>; the length of the text
is specified with <em>len</em>. Finally, the font to use for the identifying is
specified with the fontname <em>font</em>.</p>
</div>
<div class="section" id="gettextatpa">
<h5>GetTextATPA<a class="headerlink" href="#gettextatpa" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTextATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">maxvspacing</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">font</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Similar to GetTextAt but reads the text from a ATPA rather than the client.</p>
</div>
<div class="section" id="gettextatexwrap">
<h5>GetTextAtExWrap<a class="headerlink" href="#gettextatexwrap" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTextAtExWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">xs</span><span class="o">,</span><span class="n">ys</span><span class="o">,</span><span class="n">xe</span><span class="o">,</span><span class="n">ye</span><span class="o">,</span> <span class="n">minvspacing</span><span class="o">,</span> <span class="n">maxvspacing</span><span class="o">,</span> <span class="n">hspacing</span><span class="o">,</span><span class="n">color</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">const</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>A wrapper function for the previously mentioned function. Required to
work arounds bugs in the interpreter.</p>
</div>
</div>
<div class="section" id="modifying-the-uptext-filter">
<h4>Modifying the Uptext filter<a class="headerlink" href="#modifying-the-uptext-filter" title="Permalink to this headline">¶</a></h4>
<div class="section" id="rs-resetuptextfilter">
<h5>rs_ResetUpTextFilter<a class="headerlink" href="#rs-resetuptextfilter" title="Permalink to this headline">¶</a></h5>
<p>Reset the colours for the colour-filter to default.
See <a class="reference internal" href="#rs-setuptextfilter">rs_SetUpTextFilter</a> for an example.</p>
</div>
<div class="section" id="rs-setuptextfilter">
<h5>rs_SetUpTextFilter<a class="headerlink" href="#rs-setuptextfilter" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">rs_SetUpTextFilter</span><span class="p">(</span><span class="n">filter</span><span class="o">:</span> <span class="n">TOCRFilterDataArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Defines the colours that the colour-filter will look for.</p>
<p>Example:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">UpTextFilter</span><span class="o">;</span>

<span class="cm">{ Some constants for the OCR - taken directly from Simba }</span>
<span class="k">const</span>
    <span class="cm">{ Very rough limits for R, G, B }</span>
    <span class="n">ocr_Limit_High</span> <span class="o">=</span> <span class="mi">190</span><span class="o">;</span>
    <span class="n">ocr_Limit_Med</span> <span class="o">=</span> <span class="mi">130</span><span class="o">;</span>
    <span class="n">ocr_Limit_Low</span> <span class="o">=</span> <span class="mi">65</span><span class="o">;</span>


    <span class="cm">{ `base&#39; Colours of the Uptext }</span>

    <span class="cm">{ White }</span>
    <span class="n">ocr_White</span> <span class="o">=</span> <span class="mi">16777215</span><span class="o">;</span>

    <span class="cm">{ Level &lt; Your Level }</span>
    <span class="n">ocr_Green</span> <span class="o">=</span> <span class="mi">65280</span><span class="o">;</span>

    <span class="cm">{ Level &gt; Your Level }</span>
    <span class="n">ocr_Red</span> <span class="o">=</span> <span class="mi">255</span><span class="o">;</span>

    <span class="cm">{ Interact or Level = Your Level }</span>
    <span class="n">ocr_Yellow</span> <span class="o">=</span> <span class="mi">65535</span><span class="o">;</span>

    <span class="cm">{ Object }</span>
    <span class="n">ocr_Blue</span> <span class="o">=</span> <span class="mi">16776960</span><span class="o">;</span>

    <span class="cm">{ Item }</span>
    <span class="n">ocr_ItemC</span> <span class="o">=</span> <span class="mi">16744447</span><span class="o">;</span>

    <span class="cm">{ Item }</span>
    <span class="n">ocr_ItemC2</span> <span class="o">=</span> <span class="n">ocr_Red</span> <span class="k">or</span> <span class="n">ocr_Green</span><span class="o">;</span>

    <span class="cm">{ Shadow }</span>
    <span class="n">ocr_Purple</span> <span class="o">=</span> <span class="mi">8388736</span><span class="o">;</span>

<span class="k">const</span>
    <span class="n">OF_LN</span> <span class="o">=</span> <span class="mi">256</span><span class="o">;</span>
    <span class="n">OF_HN</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>


<span class="cm">{ Helper function to easily load a struct }</span>
<span class="k">function</span> <span class="nf">load0</span><span class="p">(</span><span class="n">r_low</span><span class="o">,</span><span class="n">r_high</span><span class="o">,</span><span class="n">g_low</span><span class="o">,</span><span class="n">g_high</span><span class="o">,</span><span class="n">b_low</span><span class="o">,</span><span class="n">b_high</span><span class="o">,</span><span class="n">set_col</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
    <span class="n">is_text_color</span><span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="n">tocrfilterdata</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">r_low</span> <span class="o">:=</span> <span class="n">r_low</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">r_high</span> <span class="o">:=</span> <span class="n">r_high</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">g_low</span> <span class="o">:=</span> <span class="n">g_low</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">g_high</span> <span class="o">:=</span> <span class="n">g_high</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">b_low</span> <span class="o">:=</span> <span class="n">b_low</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">b_high</span> <span class="o">:=</span> <span class="n">b_high</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">set_col</span> <span class="o">:=</span> <span class="n">set_col</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">_type</span> <span class="o">:=</span> <span class="mi">0</span><span class="o">;</span>
  <span class="bp">result</span><span class="o">.</span><span class="n">is_text_color</span><span class="o">:=</span> <span class="n">is_text_color</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="cm">{</span>
<span class="cm">Load our own ``filter data&#39;&#39;. This particular set doesn&#39;t contain the item</span>
<span class="cm">colours - those are replaced with extra (effectively nill as they already</span>
<span class="cm">exist) green colours.</span>
<span class="cm">}</span>
<span class="n">rocedure</span> <span class="n">foo</span><span class="o">;</span>
<span class="k">var</span> <span class="n">filterdata</span><span class="o">:</span> <span class="n">TOCRFilterDataArray</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">setlength</span><span class="p">(</span><span class="n">filterdata</span><span class="o">,</span> <span class="mi">9</span><span class="p">)</span><span class="o">;</span>

  <span class="n">filterdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="n">ocr_Blue</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// blue</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Green</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// green</span>

  <span class="c1">// ``False&#39;&#39; item</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Green</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// green</span>

  <span class="cm">{ This is the real one }</span>
  <span class="c1">//filterdata[2] := load0(OF_LN, 190, 220, 100, 127, 40, ocr_ItemC, True); // itemC</span>

  <span class="n">filterdata</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Yellow</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// yellow</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Red</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// red</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Red</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// red 2</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">190</span> <span class="o">+</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">130</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">65</span> <span class="o">-</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Green</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span> <span class="c1">// green 2</span>

  <span class="c1">// ``False&#39;&#39; item 2</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">OF_LN</span><span class="o">,</span> <span class="mi">190</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Green</span><span class="o">,</span> <span class="k">True</span><span class="p">)</span><span class="o">;</span>

  <span class="cm">{ This is the real one }</span>
  <span class="c1">//filterdata[7] := load0(190, 140, 210, 150, 200, 160, ocr_ItemC2, True); // item2, temp item_c</span>
  <span class="n">filterdata</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">:=</span> <span class="n">load0</span><span class="p">(</span><span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="mi">65</span><span class="o">,</span> <span class="n">OF_HN</span><span class="o">,</span> <span class="n">ocr_Purple</span><span class="o">,</span> <span class="k">False</span><span class="p">)</span><span class="o">;</span> <span class="c1">// shadow</span>

  <span class="n">rs_SetUpTextFilter</span><span class="p">(</span><span class="n">filterdata</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>


<span class="k">var</span>
  <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">LoadBitmap</span><span class="p">(</span><span class="s">&#39;uptext.png&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">SetTargetBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span>

  <span class="nb">writeln</span><span class="p">(</span> <span class="n">rs_GetUpTextAt</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span><span class="o">;</span>

  <span class="n">foo</span><span class="o">;</span>

  <span class="nb">writeln</span><span class="p">(</span> <span class="n">rs_GetUpTextAt</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span><span class="o">;</span>

  <span class="n">rs_ResetUpTextFilter</span><span class="o">;</span>

  <span class="nb">writeln</span><span class="p">(</span> <span class="n">rs_GetUpTextAt</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span> <span class="p">)</span><span class="o">;</span>

  <span class="n">SetDesktopAsClient</span><span class="o">;</span>
  <span class="n">FreeBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-scriptref/dtm"></span><div class="section" id="deformable-template-models-dtm">
<span id="scriptref-dtm"></span><h3>Deformable Template Models (DTM)<a class="headerlink" href="#deformable-template-models-dtm" title="Permalink to this headline">¶</a></h3>
<p>A DTM is in my view just a relatively simple way of defining a relationship
between several points. Each of these points have a relative offset to each
other, and may different in colour, tolerance, area size and shape.
A DTM generally consists out of one <em>Main Point</em>, and several
<em>Sub Points</em>.</p>
<p>Finding functions for DTM include the usual parameters. For explanation on
these, see <a class="reference internal" href="index.html#scriptref-finding"><em>Colour Finding</em></a>.</p>
<p>The structure of a DTM looks like this:</p>
<div class="figure">
<a class="reference internal image-reference" href="_images/DTM.png"><img alt="Structure of a DTM" src="_images/DTM.png" /></a>
</div>
<p>Where each point in a DTM has a colour, tolerance, area size and area shape
entity. The main point&#8217;s <em>point</em> is typically <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">0)</span></tt>, and all the
<em>subpoint</em> points are relative to the main point.</p>
<div class="section" id="example-of-a-simple-dtm">
<h4>Example of a simple DTM<a class="headerlink" href="#example-of-a-simple-dtm" title="Permalink to this headline">¶</a></h4>
<p>If one was to create his own DTM, he would first have to think of a useful DTM
structure.</p>
<p>Say:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">MainPoint</span> <span class="o">=</span> <span class="p">(</span><span class="mi">123</span><span class="o">,</span> <span class="mi">456</span><span class="p">)</span>
<span class="n">SubPoint_1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">122</span><span class="o">,</span> <span class="mi">460</span><span class="p">)</span>
<span class="n">SubPoint_2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">120</span><span class="o">,</span> <span class="mi">450</span><span class="p">)</span>
</pre></div>
</div>
<p>Then we could create the following MDTM structure:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="c1">// Give dtm.p a length of three.</span>
<span class="c1">// Mainpoint</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">123</span><span class="o">,</span> <span class="mi">456</span><span class="p">)</span><span class="o">;</span>

<span class="c1">// Subpoints</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">122</span><span class="o">,</span> <span class="mi">460</span><span class="p">)</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">120</span><span class="o">,</span> <span class="mi">450</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that we do not include other variables, such as colour, tolerance, area
size and area shape; they are of no importance in this example.</p>
<p>However, this code is not very clear about the DTM&#8217;s points.
Better would be to write:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="c1">// Give dtm.p a length of three.</span>
<span class="c1">// Mainpoint</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">;</span>

<span class="c1">// Subpoints</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="mi">4</span><span class="p">)</span>  <span class="c1">// 122 - 123 = -1, 460 - 456 = 4</span>
<span class="n">dtm</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">)</span> <span class="c1">// 120 - 123 = -3, 450 - 456 = -6</span>
</pre></div>
</div>
<p>As you can see it is perfectly valid to use negative points.</p>
</div>
<div class="section" id="colour-and-tolerance">
<h4>Colour and Tolerance<a class="headerlink" href="#colour-and-tolerance" title="Permalink to this headline">¶</a></h4>
<p>The colour value of a point in a DTM is just a RGB integer value.
Black = 0, Red = 255, White = 16777215, et cetera.</p>
<p>The value tolerance decides if a colour is similar enough to the given
colour; if this is the case, we say that the colours <em>matched</em>.</p>
<p>With no Area Size and Area Shape specified
we say that a DTM matches if for each
point in the DTM, the colour at the relative point matches the colour in dtm
with the given tolerance.</p>
</div>
<div class="section" id="area-size-and-shape">
<h4>Area Size and Shape<a class="headerlink" href="#area-size-and-shape" title="Permalink to this headline">¶</a></h4>
<p>Area Size and Shape add that nifty extra functionality to DTM&#8217;s.
<em>Area Size</em> defines the area that should all match the colour
with the given tolerance.
<em>Area Shape</em> is currently not implemented, mainly because
we haven&#8217;t found a good use for area shapes.</p>
</div>
<div class="section" id="loading-a-dtm-from-a-string">
<h4>Loading a DTM from a string<a class="headerlink" href="#loading-a-dtm-from-a-string" title="Permalink to this headline">¶</a></h4>
<p>It is also possible to load a DTM from a <em>zipped</em> string.
The details of the algorithm will not be explained here. (Have a look at dtm.pas
if you&#8217;re interested)</p>
</div>
<div class="section" id="mdtm-and-tdtm">
<h4>MDTM and TDTM<a class="headerlink" href="#mdtm-and-tdtm" title="Permalink to this headline">¶</a></h4>
<p>One may know DTM&#8217;s as a different type:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">TDTMPointDef</span> <span class="o">=</span> <span class="k">record</span>
  <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">Color</span><span class="o">,</span> <span class="n">Tolerance</span><span class="o">,</span> <span class="n">AreaSize</span><span class="o">,</span> <span class="n">AreaShape</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="n">TDTMPointDefArray</span> <span class="o">=</span> <span class="k">Array</span> <span class="k">Of</span> <span class="n">TDTMPointDef</span><span class="o">;</span>

<span class="n">TDTM</span> <span class="o">=</span> <span class="k">record</span>
  <span class="n">MainPoint</span><span class="o">:</span> <span class="n">TDTMPointDef</span><span class="o">;</span>
  <span class="n">SubPoints</span><span class="o">:</span> <span class="n">TDTMPointDefArray</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>The MML provides the two functions <em>MDTMtoTDTM</em> and <em>TDTMtoMDTM</em> to
directly convert between the two types.</p>
</div>
<div class="section" id="main-point-and-areasize-shape">
<h4>Main Point and AreaSize / Shape<a class="headerlink" href="#main-point-and-areasize-shape" title="Permalink to this headline">¶</a></h4>
<p>The main point&#8217;s area size and shape are not used in the current
implementation. It wouldn&#8217;t be that hard to add them, however.</p>
</div>
<div class="section" id="dtmfromstring">
<h4>DTMFromString<a class="headerlink" href="#dtmfromstring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DTMFromString</span><span class="p">(</span><span class="k">const</span> <span class="n">DTMString</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Load a DTM from a string generated by the DTM Editor.</p>
</div>
<div class="section" id="setdtmname">
<h4>SetDTMName<a class="headerlink" href="#setdtmname" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetDTMName</span><span class="p">(</span><span class="n">DTM</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">const</span> <span class="kp">name</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Assign the DTM a name. Very useful for debugging purposes as it allows the
programmers to find out what DTMs are not being freed.</p>
</div>
<div class="section" id="freedtm">
<h4>FreeDTM<a class="headerlink" href="#freedtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FreeDTM</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Free a DTM identified by <em>DTM</em>.</p>
</div>
<div class="section" id="finddtm">
<h4>FindDTM<a class="headerlink" href="#finddtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTM</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTM is the most basic DTM finding function. It takes a box to search in,
defined by <em>x1, y1, x2, y2</em>; and if the DTM is found, it will set <em>x</em> and
<em>y</em> to the coordinate the DTM was found at and it will also return true.
Else, it returns false. Once a DTM is found, it will stop searching.
In other words; it always returns the first found DTM.</p>
</div>
<div class="section" id="finddtms">
<h4>FindDTMs<a class="headerlink" href="#finddtms" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTMs</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">p</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
<span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTMs is like FindDTM, but it returns an array of
<em>x</em> and <em>y</em>, as the <em>TPointArray</em> type.</p>
</div>
<div class="section" id="finddtmrotatedse">
<h4>FindDTMRotatedSE<a class="headerlink" href="#finddtmrotatedse" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTMRotatedSE</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">sAngle</span><span class="o">,</span> <span class="n">eAngle</span><span class="o">,</span> <span class="n">aStep</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
<span class="k">var</span> <span class="n">aFound</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTMRotatedSE behaves like FindDTM. Only, it will rotate the DTM between
sAngle and eAngle by aStep each time. It will also return the angle which the
DTM was found at. Start rotating at StartAngle.</p>
</div>
<div class="section" id="finddtmrotatedalternating">
<h4>FindDTMRotatedAlternating<a class="headerlink" href="#finddtmrotatedalternating" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTMRotatedAlternating</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="n">sAngle</span><span class="o">,</span> <span class="n">eAngle</span><span class="o">,</span> <span class="n">aStep</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="k">var</span> <span class="n">aFound</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTMRotatedAlternating behaves like FindDTM. Only, it will rotate the DTM
between sAngle and eAngle by aStep each time. It will also return the angle
which the DTM was found at.
Starts at (sAngle + eAngle) / 2 degrees and alternates between - and + aStep
to search for the DTM. It finds the <em>closest</em> math to (aAngle+eAngle) / 2.</p>
</div>
<div class="section" id="finddtmsrotatedse">
<h4>FindDTMsRotatedSE<a class="headerlink" href="#finddtmsrotatedse" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTMsRotatedSE</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
<span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">sAngle</span><span class="o">,</span> <span class="n">eAngle</span><span class="o">,</span> <span class="n">aStep</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
<span class="k">var</span> <span class="n">aFound</span><span class="o">:</span> <span class="n">T2DExtendedArray</span><span class="p">)</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTMsRotatedSE behaves like FindRotatedDTMSE, but finds all DTM occurances.
Since one point can be found on several angles, aFound is a 2d array.</p>
</div>
<div class="section" id="finddtmsrotatedalternating">
<h4>FindDTMsRotatedAlternating<a class="headerlink" href="#finddtmsrotatedalternating" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDTMsRotatedAlternating</span><span class="p">(</span><span class="n">DTM</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="k">var</span> <span class="n">Points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">sAngle</span><span class="o">,</span> <span class="n">eAngle</span><span class="o">,</span> <span class="n">aStep</span><span class="o">:</span>
<span class="kt">Extended</span><span class="o">;</span> <span class="k">var</span> <span class="n">aFound</span><span class="o">:</span> <span class="n">T2DExtendedArray</span><span class="p">)</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>FindDTMsRotatedAlternating behaves like FindRotatedDTMAlternating,
but finds all DTM occurances.
Since one point can be found on several angles, aFound is a 2d array.</p>
</div>
<div class="section" id="addmdtm">
<h4>AddMDTM<a class="headerlink" href="#addmdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AddMDTM</span><span class="p">(</span><span class="k">const</span> <span class="n">d</span><span class="o">:</span> <span class="n">TMDTM</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="adddtm">
<h4>AddDTM<a class="headerlink" href="#adddtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AddDTM</span><span class="p">(</span><span class="k">const</span> <span class="n">d</span><span class="o">:</span> <span class="n">TMDTM</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Load a TMDTM structure as DTM in Simba&#8217;s system. (After it is loaded you can use
it in FindDTM, etc)</p>
</div>
<div class="section" id="addsdtm">
<h4>AddSDTM<a class="headerlink" href="#addsdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AddSDTM</span><span class="p">(</span><span class="k">const</span> <span class="n">d</span><span class="o">:</span> <span class="n">TSDTM</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Load a TSDTM structure as DTM in Simba&#8217;s system. (After it is loaded you can use
it in FindDTM, etc)</p>
</div>
<div class="section" id="getdtm">
<h4>GetDTM<a class="headerlink" href="#getdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetDTM</span><span class="p">(</span><span class="kp">index</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TMDTM</span>
</pre></div>
</div>
<p>Returns the TMDTM of the given DTM index.</p>
</div>
<div class="section" id="sdtmtomdtm">
<h4>SDTMToMDTM<a class="headerlink" href="#sdtmtomdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SDTMToMDTM</span><span class="p">(</span><span class="k">Const</span> <span class="n">DTM</span><span class="o">:</span> <span class="n">TSDTM</span><span class="p">)</span><span class="o">:</span> <span class="n">TMDTM</span><span class="o">;</span>
</pre></div>
</div>
<p>Convert a SDTM to MDTM.</p>
</div>
<div class="section" id="printdtm">
<h4>PrintDTM<a class="headerlink" href="#printdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">PrintDTM</span><span class="p">(</span><span class="k">const</span> <span class="n">DTM</span> <span class="o">:</span> <span class="n">TMDTM</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Print the DTM contents.</p>
</div>
<div class="section" id="mdtmtosdtm">
<h4>MDTMToSDTM<a class="headerlink" href="#mdtmtosdtm" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MDTMToSDTM</span><span class="p">(</span><span class="k">Const</span> <span class="n">DTM</span><span class="o">:</span> <span class="n">TMDTM</span><span class="p">)</span><span class="o">:</span> <span class="n">TSDTM</span><span class="o">;</span>
</pre></div>
</div>
<p>Convert a MDTM to SDTM.</p>
</div>
<div class="section" id="createdtmpoint">
<h4>CreateDTMPoint<a class="headerlink" href="#createdtmpoint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateDTMPoint</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">c</span><span class="o">,</span><span class="n">t</span><span class="o">,</span><span class="n">asz</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">bp</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span> <span class="o">:</span> <span class="n">TMDTMPoint</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a DTM point.</p>
</div>
</div>
<span id="document-scriptref/window"></span><div class="section" id="target-window-functions">
<span id="scriptref-window"></span><h3>Target Window Functions<a class="headerlink" href="#target-window-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="freeze">
<h4>Freeze<a class="headerlink" href="#freeze" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Freeze</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>If you call Freeze, the data that is <em>currently</em> in the client
is stored into memory. Simba will then target this memory for all further
finding operations; until <em>Unfreeze</em> is called. This can dramatically increase
speed if you don&#8217;t care if the image doesn&#8217;t change. It can be even more
important if you don&#8217;t <em>want</em> the image to change; if you want to analyze a
specific frame.</p>
<p>Use like:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">Freeze</span><span class="o">;</span>

<span class="k">if</span> <span class="n">findcolors</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="k">then</span>
  <span class="o">...</span>

<span class="n">Unfreeze</span><span class="o">;</span>
</pre></div>
</div>
<p>Make sure you never forget to call Unfreeze!</p>
</div>
<div class="section" id="unfreeze">
<h4>Unfreeze<a class="headerlink" href="#unfreeze" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Unfreeze</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Unfreeze the client data and restore the original client. See <em>Freeze</em> for more
details.</p>
</div>
<div class="section" id="getclientdimensions">
<h4>GetClientDimensions<a class="headerlink" href="#getclientdimensions" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">GetClientDimensions</span><span class="p">(</span><span class="k">var</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span><span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Return the size of the client in <em>w</em> and <em>h</em>.
If it fails, it returns -1 for both h and w.</p>
</div>
<div class="section" id="getclientposition">
<h4>GetClientPosition<a class="headerlink" href="#getclientposition" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">GetClientPosition</span><span class="p">(</span><span class="k">var</span> <span class="n">left</span><span class="o">,</span> <span class="n">top</span><span class="o">:</span><span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Return the position of the client in <em>left</em> and <em>top</em>.
May return negative values.</p>
</div>
<div class="section" id="settargetbitmap">
<h4>SetTargetBitmap<a class="headerlink" href="#settargetbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SetTargetBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Set a bitmap as target / client. (The bitmap must be loaded by Simba)
This can be combined with the SetPersistentMemoryBitmap feature to achieve
the same effect as <a class="reference internal" href="#settargetarray">SetTargetArray</a>.</p>
</div>
<div class="section" id="settargetarray">
<h4>SetTargetArray<a class="headerlink" href="#settargetarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SetTargetArray</span><span class="p">(</span><span class="n">P</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Set a target array as client data. This is generally not something you&#8217;d
want to call yourself. It is mainly included for external components to allow
Simba to efficiently target its memory. See the SMART source on how to do this.</p>
</div>
<div class="section" id="seteiostarget">
<h4>SetEIOSTarget<a class="headerlink" href="#seteiostarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SetEIOSTarget</span><span class="p">(</span><span class="kp">name</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">initargs</span><span class="o">:</span> <span class="kt">Variant</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="setimagetarget">
<span id="image-target"></span><h4>SetImageTarget<a class="headerlink" href="#setimagetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetImageTarget</span><span class="p">(</span><span class="n">idx</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the Image target defined by index <em>idx</em> as active target.
An Image target controls what data Simba performs colour (and bitmap, dtm, etc)
searches on.</p>
<p>Both <a class="reference internal" href="#settargetbitmap">SetTargetBitmap</a>, and <a class="reference internal" href="#settargetarray">SetTargetArray</a> return a target index.
Alternatively you can get the index of the current target with <a class="reference internal" href="#getimagetarget">GetImageTarget</a>.</p>
</div>
<div class="section" id="setkeymousetarget">
<span id="mouse-target"></span><h4>SetKeyMouseTarget<a class="headerlink" href="#setkeymousetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetKeyMouseTarget</span><span class="p">(</span><span class="n">idx</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the KeyMouse target defined by index <em>idx</em> as active target.
A KeyMouse target controls how Simba moves the mouse cursor and emulates the
keyboard.</p>
</div>
<div class="section" id="getimagetarget">
<h4>GetImageTarget<a class="headerlink" href="#getimagetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetImageTarget</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the current Image target.</p>
</div>
<div class="section" id="getkeymousetarget">
<h4>GetKeyMouseTarget<a class="headerlink" href="#getkeymousetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetKeyMouseTarget</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the current KeyMouse target.</p>
</div>
<div class="section" id="exportimagetarget">
<h4>ExportImageTarget<a class="headerlink" href="#exportimagetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ExportImageTarget</span> <span class="o">:</span> <span class="n">TTarget_Exported</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="exportkeymousetarget">
<h4>ExportKeyMouseTarget<a class="headerlink" href="#exportkeymousetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ExportKeyMouseTarget</span> <span class="o">:</span> <span class="n">TTarget_Exported</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="freetarget">
<h4>FreeTarget<a class="headerlink" href="#freetarget" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FreeTarget</span><span class="p">(</span><span class="n">idx</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Free a previously loaded target.</p>
<p>This procedure does not free the data associated with the target as in the
case of <a class="reference internal" href="#settargetbitmap">SetTargetBitmap</a> or <a class="reference internal" href="#settargetarray">SetTargetArray</a>.</p>
</div>
<div class="section" id="setdesktopasclient">
<h4>SetDesktopAsClient<a class="headerlink" href="#setdesktopasclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetDesktopAsClient</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the default desktop as client.</p>
</div>
<div class="section" id="activateclient">
<h4>ActivateClient<a class="headerlink" href="#activateclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ActivateClient</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the current target as active for key input.</p>
</div>
<div class="section" id="istargetvalid">
<h4>IsTargetValid<a class="headerlink" href="#istargetvalid" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">IsTargetValid</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the current target is valid.</p>
</div>
</div>
<div class="section" id="finding-a-specific-window">
<h3>Finding a specific window<a class="headerlink" href="#finding-a-specific-window" title="Permalink to this headline">¶</a></h3>
<div class="section" id="getprocesses">
<h4>GetProcesses<a class="headerlink" href="#getprocesses" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetProcesses</span><span class="o">:</span> <span class="n">TSysProcArr</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns processes with the title of their window, the handle of the window, the
process id and their width and height.</p>
<p>With TSysProc being defined as:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">TSysProc</span> <span class="o">=</span> <span class="k">record</span>
    <span class="n">Title</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
    <span class="n">Handle</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
    <span class="n">Pid</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
    <span class="n">Width</span><span class="o">,</span> <span class="n">Height</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindAndSetTarget</span><span class="p">(</span><span class="n">TitlePrefix</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">SetAsTarget</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
<span class="k">var</span>
  <span class="n">T</span><span class="o">:</span> <span class="n">TSysProcArr</span><span class="o">;</span>
  <span class="n">I</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">T</span><span class="o">:=</span> <span class="n">GetProcesses</span><span class="p">()</span><span class="o">;</span>
  <span class="k">for</span> <span class="n">I</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="nb">high</span><span class="p">(</span><span class="n">T</span><span class="p">)</span> <span class="k">do</span>
    <span class="k">if</span> <span class="n">StartsWith</span><span class="p">(</span><span class="n">TitlePrefix</span><span class="o">,</span> <span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">Title</span><span class="p">)</span> <span class="k">then</span>
    <span class="k">begin</span>
      <span class="bp">Result</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
      <span class="k">if</span> <span class="n">SetAsTarget</span> <span class="k">then</span>
      <span class="k">begin</span>
        <span class="n">SetTarget</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="o">;</span>
        <span class="n">ActivateClient</span><span class="o">;</span>
      <span class="k">end</span><span class="o">;</span>
    <span class="k">end</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="client-area">
<h3>Client Area<a class="headerlink" href="#client-area" title="Permalink to this headline">¶</a></h3>
<p>Client Areas were introduced to cope with clients which have a normal
coordinate system, but a variable base for this coordinate system.</p>
<p>More specifically: client areas allow you to transparently add a certain X and Y
to all the mouse and image (finding, dtm, etc) functions.</p>
<p>Support for Mouse and Image targets have been separated. This is required for
targets that only support say, an Image target.</p>
<p>In this case you do not want to accidentally touch or reset the Mouse target
area.</p>
<p>Setting an area multiple times is the same as resetting it and then setting
the area. Multiple calls to *SetClientArea will not result in nested areas.</p>
<div class="section" id="mousesetclientarea">
<h4>MouseSetClientArea<a class="headerlink" href="#mousesetclientarea" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MouseSetClientArea</span><span class="p">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Define a new <a class="reference internal" href="#client-area">Client Area</a> for all Mouse operations on this Mouse target.</p>
</div>
<div class="section" id="mouseresetclientarea">
<h4>MouseResetClientArea<a class="headerlink" href="#mouseresetclientarea" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">MouseResetClientArea</span><span class="o">;</span>
</pre></div>
</div>
<p>Reset the <a class="reference internal" href="#client-area">Client Area</a> for the Mouse Target.</p>
</div>
<div class="section" id="imagesetclientarea">
<h4>ImageSetClientArea<a class="headerlink" href="#imagesetclientarea" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ImageSetClientArea</span><span class="p">(</span><span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Define a new <a class="reference internal" href="#client-area">Client Area</a> for all Image operations on this Image Target.</p>
</div>
<div class="section" id="imageresetclientarea">
<h4>ImageResetClientArea<a class="headerlink" href="#imageresetclientarea" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ImageResetClientArea</span><span class="o">;</span>
</pre></div>
</div>
<p>Reset the <a class="reference internal" href="#client-area">Client Area</a> for the Image Target.</p>
</div>
</div>
<span id="document-scriptref/web"></span><div class="section" id="internet-functions">
<span id="scriptref-web"></span><h3>Internet Functions<a class="headerlink" href="#internet-functions" title="Permalink to this headline">¶</a></h3>
<p>The internet functions in Simba range from HTTP functions and low-level
socket functions. With the HTTP functions you can scrape the web, send form data
to web pages.</p>
<p>With the socket functions you can implement virtually any network procotol:
there have been several IRC bots.</p>
<div class="section" id="http-functions">
<h4>HTTP Functions<a class="headerlink" href="#http-functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="openwebpage">
<h5>OpenWebPage<a class="headerlink" href="#openwebpage" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">OpenWebPage</span><span class="p">(</span><span class="k">const</span> <span class="n">url</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>OpenWebPage opens the given web page (url) with your default browser.</p>
<p>Example:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">OpenWebPage</span><span class="p">(</span><span class="s">&#39;http://villavu.com&#39;</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="getpage">
<h5>GetPage<a class="headerlink" href="#getpage" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetPage</span><span class="p">(</span><span class="k">const</span> <span class="n">url</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>GetPage returns a string of HTML from the given web page.</p>
</div>
<div class="section" id="initializehttpclient">
<h5>InitializeHTTPClient<a class="headerlink" href="#initializehttpclient" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">InitializeHTTPClient</span><span class="p">(</span><span class="n">HandleCookies</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>InitializeHTTPClient creates a new client and assigns it an ID. You use this for
all the other web functions that require a client.</p>
</div>
<div class="section" id="initializehttpclientwrap">
<h5>InitializeHTTPClientWrap<a class="headerlink" href="#initializehttpclientwrap" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">InitializeHTTPClientWrap</span><span class="p">(</span><span class="n">HandleCookies</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>This should probably not be documented.</p>
</div>
<div class="section" id="freehttpclient">
<h5>FreeHTTPClient<a class="headerlink" href="#freehttpclient" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FreeHTTPClient</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Free the HTTP client returned by <em>InitializeHTTPClient</em>.</p>
</div>
<div class="section" id="gethttppage">
<h5>GetHTTPPage<a class="headerlink" href="#gethttppage" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetHTTPPage</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span> <span class="n">URL</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>GetHTTPPage is just like GetPage, except you can choose which client to get the
HTTP code from.</p>
</div>
<div class="section" id="sethttpuseragent">
<h5>SetHTTPUserAgent<a class="headerlink" href="#sethttpuseragent" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetHTTPUserAgent</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span> <span class="n">Agent</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>SetHTTPUserAgent allows you to change the agent string of a client.</p>
</div>
<div class="section" id="posthttppage">
<h5>PostHTTPPage<a class="headerlink" href="#posthttppage" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PostHTTPPage</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span> <span class="n">Url</span><span class="o">,</span><span class="n">PostData</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>PostHTTPPage requests to post data (PostData) on the web page (Url) of the
client (Client).</p>
</div>
<div class="section" id="posthttppageex">
<h5>PostHTTPPageEx<a class="headerlink" href="#posthttppageex" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PostHTTPPageEx</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span> <span class="n">Url</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>PostHTTPPageEx is just like PostHTTPPage but uses predefined post data added by
ddPostVariable and cleared by ClearPostData.</p>
</div>
<div class="section" id="clearpostdata">
<h5>ClearPostData<a class="headerlink" href="#clearpostdata" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClearPostData</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>ClearPostData clears the post data added to the web page (Client). Used with
PostHTTPPageEx.</p>
</div>
<div class="section" id="addpostvariable">
<h5>AddPostVariable<a class="headerlink" href="#addpostvariable" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">AddPostVariable</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span> <span class="n">VarName</span><span class="o">,</span> <span class="n">VarValue</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>AddPostVariable adds a post variable to the web page (Client). Used with
PostHTTPPageEx.</p>
</div>
<div class="section" id="getrawheaders">
<h5>GetRawHeaders<a class="headerlink" href="#getrawheaders" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetRawHeaders</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>GetRawHeaders returns a string of headers from the specified client.</p>
</div>
</div>
<div class="section" id="socket-functions">
<h4>Socket Functions<a class="headerlink" href="#socket-functions" title="Permalink to this headline">¶</a></h4>
<p>Simba&#8217;s Socket Functions. Examples required; if you have one, please let u know.</p>
<div class="section" id="createsocket">
<h5>CreateSocket<a class="headerlink" href="#createsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateSocket</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>CreateSocket creates a new socket and assigns it an ID.</p>
</div>
<div class="section" id="freesocket">
<h5>FreeSocket<a class="headerlink" href="#freesocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FreeSocket</span><span class="p">(</span><span class="kp">Index</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>FreeSocket frees the socket with the ID (Index) assigned to it upon creation.</p>
</div>
<div class="section" id="connectsocket">
<h5>ConnectSocket<a class="headerlink" href="#connectsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ConnectSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">IP</span><span class="o">,</span> <span class="n">Port</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>ConnectSocket connects the socket to an IP and port on the specified client
(Client).</p>
</div>
<div class="section" id="bindsocket">
<h5>BindSocket<a class="headerlink" href="#bindsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">BindSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">IP</span><span class="o">,</span> <span class="n">Port</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>BindSocket binds a connected socket to an IP and port on the specified client
(Client).</p>
</div>
<div class="section" id="listensocket">
<h5>ListenSocket<a class="headerlink" href="#listensocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ListenSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>ListenSocket allows for a client socket to accept connections.</p>
</div>
<div class="section" id="acceptsocket">
<h5>AcceptSocket<a class="headerlink" href="#acceptsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AcceptSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>AcceptSocket accepts pending connection requests to a client socket.</p>
</div>
<div class="section" id="closesocket">
<h5>CloseSocket<a class="headerlink" href="#closesocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CloseSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>CloseSocket closes connections to a client socket.</p>
</div>
<div class="section" id="recvsocket">
<h5>RecvSocket<a class="headerlink" href="#recvsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RecvSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>RecvSocket method reads all data waiting for read.</p>
</div>
<div class="section" id="recvsocketstr">
<h5>RecvSocketStr<a class="headerlink" href="#recvsocketstr" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RecvSocketStr</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Method waits until data string is received. This string is terminated by CR-LF
characters. The resulting string is returned without this termination (CR-LF)</p>
</div>
<div class="section" id="recvsocketex">
<h5>RecvSocketEx<a class="headerlink" href="#recvsocketex" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RecvSocketEx</span><span class="p">(</span><span class="n">Client</span><span class="o">,</span> <span class="nb">Length</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>RecvSocketEx returns received data of a specified length from a bound socket as
a string.</p>
</div>
<div class="section" id="sendsocket">
<h5>SendSocket<a class="headerlink" href="#sendsocket" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SendSocket</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Data</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>SendSocket sends a string of data to a bound client socket.</p>
</div>
<div class="section" id="settimeout">
<h5>SetTimeout<a class="headerlink" href="#settimeout" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetTimeout</span><span class="p">(</span><span class="n">Client</span><span class="o">,</span> <span class="nb">Time</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>SetTimeout sets a maximum amount of time for a bound client socket to wait for
data from another socket. Time is in <em>milliseconds</em>.</p>
</div>
<div class="section" id="socketinfo">
<h5>SocketInfo<a class="headerlink" href="#socketinfo" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SocketInfo</span><span class="p">(</span><span class="n">Client</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">out</span> <span class="n">IP</span><span class="o">,</span> <span class="n">Port</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>SocketInfo sets where a bound socket will be sending data to (out IP, out Port).</p>
</div>
</div>
<div class="section" id="generic-functions">
<h4>Generic functions<a class="headerlink" href="#generic-functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="setproxy">
<h5>SetProxy<a class="headerlink" href="#setproxy" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetProxy</span><span class="p">(</span><span class="n">Client</span> <span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">pHost</span><span class="o">,</span> <span class="n">pPort</span> <span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">;</span><span class="s">&#39;);</span>
</pre></div>
</div>
<p>SetProxy configures a proxy with the given client (Client) proxy host (pHost)
and port (pPort).</p>
</div>
</div>
</div>
<span id="document-scriptref/bitmaps"></span><div class="section" id="bitmaps">
<span id="scriptref-bitmaps"></span><h3>Bitmaps<a class="headerlink" href="#bitmaps" title="Permalink to this headline">¶</a></h3>
<p>A bitmap in Simba is simply a two dimensional <em>field of colours</em>. These colours
can all be the same, or they can be of different colours. Simba features
functions to create, manipulate and search for bitmaps.</p>
<p>The bitmaps are - just as files - represented as integer in Simba (they point to
a list of bitmaps, and the value of the integer is the position in the list).
So typically, when referring to bitmaps in Simba, you simply represent them as
an integer:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span> <span class="n">bmp</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
    <span class="n">bmp</span> <span class="o">:=</span> <span class="n">CreateBitmap</span><span class="p">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Create a bitmap of size (10, 10)</span>
    <span class="k">if</span> <span class="n">FindBitmapIn</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">300</span><span class="o">,</span> <span class="mi">300</span><span class="p">)</span> <span class="k">then</span>
      <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;Found it!&#39;</span><span class="p">)</span><span class="o">;</span>
    <span class="n">FreeBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Don&#39;t forget to free it when we are done.</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>Note that the previous example doesn&#8217;t make a lot of sense as the bitmap has
only been created and not filled with any colours, they are as of yet,
undefined. You can also create bitmaps from screenshots and load them when your
script starts using the <a class="reference internal" href="index.html#scriptref-bitmapfromstring"><em>BitmapFromString</em></a> function, or
simple store them as files and load them using the <a class="reference internal" href="index.html#scriptref-loadbitmap"><em>LoadBitmap</em></a>
function.</p>
<div class="section" id="word-of-caution-on-bitmap-creation">
<h4>Word of caution on bitmap creation<a class="headerlink" href="#word-of-caution-on-bitmap-creation" title="Permalink to this headline">¶</a></h4>
<p>Bitmaps in Simba are internally all instances of <em>TMufasaBitmap</em>. Scripts should
generally access bitmaps using their <em>handle</em>: an integer. All functions
referenced here either require a bitmap <em>handle</em> or return one.</p>
<p>If you want to gain more access over a specific bitmap, see the
<em>GetMufasaBitmap</em> function. It is highly unrecommended to create bitmaps like
this, because Simba will not free them automatically for you. (There&#8217;s no
problem doing it like this if you only want to perform operations on it and then
free it again)</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span> <span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="o">;</span>
<span class="k">begin</span>
    <span class="n">bmp</span> <span class="o">:=</span> <span class="n">TMufasBitmap</span><span class="o">.</span><span class="n">Create</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>Because there is no way to get a <em>handle</em> to this bitmap; as it will not be
managed by Simba internally. (All Bitmaps created by <em>CreateBitmap</em> are managed
by Simba, if you don&#8217;t know what this means: you generally want Simba to manage
the bitmaps)</p>
<p>If you still want access to the TMufasaBitmap, use <em>GetMufasaBitmap</em>, described
below.</p>
</div>
<div class="section" id="getmufasabitmap">
<h4>GetMufasaBitmap<a class="headerlink" href="#getmufasabitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetMufasaBitmap</span><span class="p">(</span><span class="n">bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the <em>TMufasaBitmap</em> for the given bitmap. They both reference the same
bitmap. TMufasaBitmap is a more advanced interface to bitmaps in Simba.
There is no way to get a <em>internal</em> (integer)
reference to a bitmap if you create it with TMufasaBitmap.Create; so the
recommended way is to use <em>CreateBitmap</em> to get the integer reference/handle and
then call this function to get the class reference.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span> <span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="o">;</span>
    <span class="n">bmph</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
    <span class="n">bmph</span> <span class="o">:=</span> <span class="n">CreateBitmap</span><span class="p">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
    <span class="n">bmp</span> <span class="o">:=</span> <span class="n">GetMufasaBitmap</span><span class="p">(</span><span class="n">bmph</span><span class="p">)</span><span class="o">;</span>

    <span class="n">bmp</span><span class="o">.</span><span class="n">SetSize</span><span class="p">(</span><span class="mi">150</span><span class="o">,</span><span class="mi">150</span><span class="p">)</span><span class="o">;</span> <span class="c1">// also changes bmph, as they are the same bitmap.</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="createbitmapstring">
<span id="scriptref-createbitmapstring"></span><h4>CreateBitmapString<a class="headerlink" href="#createbitmapstring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateBitmapString</span><span class="p">(</span><span class="n">bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates a string for the given bitmap, you can use this to save a bitmap for
later use, for example loading it again using <a class="reference internal" href="index.html#scriptref-bitmapfromstring"><em>BitmapFromString</em></a>.</p>
</div>
<div class="section" id="createbitmap">
<span id="scriptref-createbitmap"></span><h4>CreateBitmap<a class="headerlink" href="#createbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateBitmap</span><span class="p">(</span><span class="n">w</span><span class="o">,</span><span class="n">h</span> <span class="o">:</span><span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a bitmap with width <em>h</em> and height <em>h</em>.
Returns the reference to the created bitmap.</p>
</div>
<div class="section" id="freebitmap">
<span id="scriptref-freebitmap"></span><h4>FreeBitmap<a class="headerlink" href="#freebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FreeBitmap</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Free the bitmap. You should do this when you no longer need the bitmap.
Be careful when working with bitmaps: not freeing it when you no longer need it
leads to memory leaks, which will eventually make your script crash. (Unless you
stop it in time, in which case Simba will free the bitmaps for you)</p>
</div>
<div class="section" id="savebitmap">
<span id="scriptref-savebitmap"></span><h4>SaveBitmap<a class="headerlink" href="#savebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SaveBitmap</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">path</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Save the given bitmap to the specified path.</p>
</div>
<div class="section" id="bitmapfromstring">
<span id="scriptref-bitmapfromstring"></span><h4>BitmapFromString<a class="headerlink" href="#bitmapfromstring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BitmapFromString</span><span class="p">(</span><span class="n">Width</span><span class="o">,</span><span class="n">Height</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Data</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Load a bitmap from the given string. This command is usually generated with the
Bitmap to String feature in Simba.</p>
</div>
<div class="section" id="loadbitmap">
<span id="scriptref-loadbitmap"></span><h4>LoadBitmap<a class="headerlink" href="#loadbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">LoadBitmap</span><span class="p">(</span><span class="n">Path</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Load a bitmap from a path to a file. Formats known to work are BMP and PNG
images.</p>
</div>
<div class="section" id="setbitmapsize">
<span id="scriptref-setbitmapsize"></span><h4>SetBitmapSize<a class="headerlink" href="#setbitmapsize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetBitmapSize</span><span class="p">(</span><span class="n">Bmp</span><span class="o">,</span><span class="n">NewW</span><span class="o">,</span><span class="n">NewH</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Change the size of the bitmap.
Previous data will be preserved (if possible), so enlarging the bitmap won&#8217;t
destroy the old data, but shrinking it will inevitably destroy some data.
(Everything that falls out of the new bounds)</p>
</div>
<div class="section" id="getbitmapsize">
<span id="scriptref-getbitmapsize"></span><h4>GetBitmapSize<a class="headerlink" href="#getbitmapsize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">GetBitmapSize</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">BmpW</span><span class="o">,</span><span class="n">BmpH</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the size of the bitmap in <em>BmpW</em>, <em>BmpH</em>.</p>
</div>
<div class="section" id="setpersistentmemorybitmap">
<span id="scriptref-setpersistentmemorybitmap"></span><h4>SetPersistentMemoryBitmap<a class="headerlink" href="#setpersistentmemorybitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetPersistentMemoryBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">mem</span><span class="o">:</span> <span class="n">PtrUInt</span><span class="o">;</span> <span class="n">awidth</span><span class="o">,</span> <span class="n">aheight</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the internal bitmap <em>bmp</em> data pointer to <em>mem</em>. Size is described by
<em>awidth</em> and <em>aheight</em>. <em>mem</em> should be a pointer of four bytes.</p>
<p>Byte order: BGRA (Blue, Green, Red, Alpha).</p>
<p>Previous data in the bitmap will be lost.</p>
</div>
<div class="section" id="resetpersistentmemorybitmap">
<span id="scriptref-resetpersistentmemorybitmap"></span><h4>ResetPersistentMemoryBitmap<a class="headerlink" href="#resetpersistentmemorybitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ResetPersistentMemoryBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Undo the effect of <a class="reference internal" href="#setpersistentmemorybitmap">SetPersistentMemoryBitmap</a>.
Data in the bitmap before the SetPersistentMemoryBitmap will not be restored.</p>
</div>
<div class="section" id="stretchbitmapresize">
<span id="scriptref-stretchbitmapresize"></span><h4>StretchBitmapResize<a class="headerlink" href="#stretchbitmapresize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">StretchBitmapResize</span><span class="p">(</span><span class="n">Bmp</span><span class="o">,</span><span class="n">NewW</span><span class="o">,</span><span class="n">NewH</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="createmirroredbitmap">
<span id="scriptref-createmirroredbitmap"></span><h4>CreateMirroredBitmap<a class="headerlink" href="#createmirroredbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateMirroredBitmap</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="createmirroredbitmapex">
<span id="scriptref-createmirroredbitmapex"></span><h4>CreateMirroredBitmapEx<a class="headerlink" href="#createmirroredbitmapex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateMirroredBitmapEx</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">MirrorStyle</span> <span class="o">:</span> <span class="n">TBmpMirrorStyle</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="fastsetpixel">
<span id="scriptref-fastsetpixel"></span><h4>FastSetPixel<a class="headerlink" href="#fastsetpixel" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FastSetPixel</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">y</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Color</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the pixel on the bitmap at position x, y to <em>color</em>.</p>
</div>
<div class="section" id="fastsetpixels">
<span id="scriptref-fastsetpixels"></span><h4>FastSetPixels<a class="headerlink" href="#fastsetpixels" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FastSetPixels</span><span class="p">(</span><span class="n">bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Colors</span> <span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Set the pixels on the bitmap at position TPA[index] to Colors[index].</p>
</div>
<div class="section" id="fastgetpixel">
<span id="scriptref-fastgetpixel"></span><h4>FastGetPixel<a class="headerlink" href="#fastgetpixel" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FastGetPixel</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TColor</span><span class="o">;</span>
</pre></div>
</div>
<p>Return the colour of pixel on the bitmap, position specified by x, y.</p>
</div>
<div class="section" id="fastgetpixels">
<span id="scriptref-fastgetpixels"></span><h4>FastGetPixels<a class="headerlink" href="#fastgetpixels" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FastGetPixels</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Return an array of the colours on the bitmap; positions specified by <em>TPA</em>.</p>
</div>
<div class="section" id="getbitmapareacolors">
<span id="scriptref-getbitmapareacolors"></span><h4>GetBitmapAreaColors<a class="headerlink" href="#getbitmapareacolors" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetBitmapAreaColors</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span><span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns all the colours in the area defined by (<em>xs</em>, <em>xy</em>, <em>xe</em>, <em>ye</em>) on the
bitmap in a two dimensions integer array.</p>
</div>
<div class="section" id="fastdrawclear">
<span id="scriptref-fastdrawclear"></span><h4>FastDrawClear<a class="headerlink" href="#fastdrawclear" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FastDrawClear</span><span class="p">(</span><span class="n">bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Color</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Draw <em>Color</em> on every pixel on the bitmap.</p>
</div>
<div class="section" id="fastdrawtransparent">
<span id="scriptref-fastdrawtransparent"></span><h4>FastDrawTransparent<a class="headerlink" href="#fastdrawtransparent" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FastDrawTransparent</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SourceBitmap</span><span class="o">,</span> <span class="n">TargetBitmap</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="settransparentcolor">
<span id="scriptref-setransparentcolor"></span><h4>SetTransparentColor<a class="headerlink" href="#settransparentcolor" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetTransparentColor</span><span class="p">(</span><span class="n">bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Color</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="gettransparentcolor">
<span id="scriptref-getransparentcolor"></span><h4>GetTransparentColor<a class="headerlink" href="#gettransparentcolor" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTransparentColor</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TColor</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="fastreplacecolor">
<span id="scriptref-fastreplacecolor"></span><h4>FastReplaceColor<a class="headerlink" href="#fastreplacecolor" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FastReplaceColor</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">OldColor</span><span class="o">,</span><span class="n">NewColor</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="copyclienttobitmap">
<span id="scriptref-copyclienttobitmap"></span><h4>CopyClientToBitmap<a class="headerlink" href="#copyclienttobitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CopyClientToBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Copy client area <em>xs, ys, xe, ye</em> to specified bitmap.</p>
</div>
<div class="section" id="bitmapfromclient">
<span id="scriptref-bitmapfromclient"></span><h4>BitmapFromClient<a class="headerlink" href="#bitmapfromclient" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BitmapFromClient</span><span class="p">(</span><span class="k">const</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a bitmap from the client. Area specified by <em>xs, ye, xe, ye</em>.</p>
</div>
<div class="section" id="setbitmapname">
<span id="scriptref-setbitmapname"></span><h4>SetBitmapName<a class="headerlink" href="#setbitmapname" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetBitmapName</span><span class="p">(</span><span class="n">Bmp</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="kp">name</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Assign a name to the bitmap. Mainly for debugging purposes. (It will write the
name of the bitmap if it hasn&#8217;t been freed.)</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="k">new</span><span class="o">;</span>

<span class="k">var</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">CreateBitmap</span><span class="p">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>
  <span class="n">SetBitmapName</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="s">&#39;We will not free this bitmap&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
<span class="c1">// Simba will print what bitmap has not been freed (along with his long</span>
<span class="c1">// name)</span>
</pre></div>
</div>
</div>
<div class="section" id="findbitmap">
<span id="scriptref-findbitmap"></span><h4>FindBitmap<a class="headerlink" href="#findbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the entire client. Returns true if found.
If found, <em>x, y</em> specifies the position where the bitmap was found.</p>
</div>
<div class="section" id="findbitmapin">
<span id="scriptref-findbitmapin"></span><h4>FindBitmapIn<a class="headerlink" href="#findbitmapin" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapIn</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>  <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the client in the area defined by <em>xs,ys,xe,ye</em>.
Returns true if found. If found, <em>x, y</em> specifies the position where the bitmap
was found.</p>
</div>
<div class="section" id="findbitmaptolerancein">
<span id="scriptref-findbitmaptolerancein"></span><h4>FindBitmapToleranceIn<a class="headerlink" href="#findbitmaptolerancein" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapToleranceIn</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">tolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the client in the area defined by <em>xs,ys,xe,ye</em>.
Tolerance defines the tolerance per pixel when matching bitmaps. See
<a class="reference internal" href="index.html#scriptref-cts"><em>Colour tolerance</em></a> for more information on tolerance.
Returns true if found. If found, <em>x, y</em> specifies the position where the bitmap
was found.</p>
</div>
<div class="section" id="findbitmapspiral">
<span id="scriptref-findbitmapspiral"></span><h4>FindBitmapSpiral<a class="headerlink" href="#findbitmapspiral" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapSpiral</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the client in the area defined by <em>xs,ys,xe,ye</em>.
Returns true if found. If found, <em>x, y</em> specifies the position where the bitmap
was found. Search starts from a point defined by <em>x, y</em>.</p>
</div>
<div class="section" id="findbitmapsspiraltolerance">
<span id="scriptref-findbitmapsspiraltolerance"></span><h4>FindBitmapsSpiralTolerance<a class="headerlink" href="#findbitmapsspiraltolerance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapsSpiralTolerance</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Points</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">,</span><span class="n">tolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the client in the area defined by <em>xs,ys,xe,ye</em>.
Tolerance defines the tolerance per pixel when matching bitmaps. See
<a class="reference internal" href="index.html#scriptref-cts"><em>Colour tolerance</em></a> for more information on tolerance.
Search starts from a point defined by <em>x, y</em>.
Returns true if found. If found, each point in <em>TPA</em> specifies a match.</p>
</div>
<div class="section" id="findbitmapspiraltolerance">
<span id="scriptref-findbitmapspiraltolerance"></span><h4>FindBitmapSpiralTolerance<a class="headerlink" href="#findbitmapspiraltolerance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapSpiralTolerance</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">,</span><span class="n">tolerance</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Searches for the Bitmap <em>bmp</em> on the client in the area defined by <em>xs,ys,xe,ye</em>.
Tolerance defines the tolerance per pixel when matching bitmaps. See
<a class="reference internal" href="index.html#scriptref-cts"><em>Colour tolerance</em></a> for more information on tolerance.
Search starts from a point defined by <em>x, y</em>.
Returns true if found. If found, <em>x, y</em> specifies the position where the bitmap
was found.</p>
</div>
<div class="section" id="rotatebitmap">
<span id="scriptref-rotatebitmap"></span><h4>RotateBitmap<a class="headerlink" href="#rotatebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RotateBitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">angle</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="desaturatebitmap">
<span id="scriptref-desaturatebitmap"></span><h4>DesaturateBitmap<a class="headerlink" href="#desaturatebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DesaturateBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="invertbitmap">
<span id="scriptref-invertbitmap"></span><h4>InvertBitmap<a class="headerlink" href="#invertbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">InvertBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="copybitmap">
<span id="scriptref-copybitmap"></span><h4>CopyBitmap<a class="headerlink" href="#copybitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CopyBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="o">:</span>  <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span>
</pre></div>
</div>
<p>Creates a copy of the <em>Bitmap</em>. Returns the bitmap copy.</p>
</div>
<div class="section" id="greyscalebitmap">
<span id="scriptref-greyscalebitmap"></span><h4>GreyScaleBitmap<a class="headerlink" href="#greyscalebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GreyScaleBitmap</span><span class="p">(</span><span class="n">bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span>
</pre></div>
</div>
<p>Creates a copy of the bitmap, greyscaled.</p>
</div>
<div class="section" id="brightnessbitmap">
<span id="scriptref-brightnessbitmap"></span><h4>BrightnessBitmap<a class="headerlink" href="#brightnessbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BrightnessBitmap</span><span class="p">(</span><span class="n">Bitmap</span><span class="o">,</span><span class="n">br</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Changes the brightness of a bitmap, intensity defined by <em>br</em>.
Returns a new bitmap with the brightness applied.</p>
<p>If you instead want to apply brightness to the current bitmap, see
<a class="reference internal" href="index.html#filter-apply-bitmap"><em>Applying a filter on the current bitmap</em></a></p>
</div>
<div class="section" id="contrastbitmap">
<span id="scriptref-contrastbitmap"></span><h4>ContrastBitmap<a class="headerlink" href="#contrastbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ContrastBitmap</span><span class="p">(</span><span class="n">bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">co</span> <span class="o">:</span> <span class="kt">extended</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Changes the constrast of a bitmap, returns a new bitmap with the contrast
applied.</p>
</div>
<div class="section" id="posterizebitmap">
<span id="scriptref-posterizebitmap"></span><h4>PosterizeBitmap<a class="headerlink" href="#posterizebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PosterizeBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">po</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Posterizes a bitmap, intensity defined by <em>po</em>; returns a new bitmap with the
posterisation applied.</p>
<div class="section" id="applying-a-filter-on-the-current-bitmap">
<span id="filter-apply-bitmap"></span><h5>Applying a filter on the current bitmap<a class="headerlink" href="#applying-a-filter-on-the-current-bitmap" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span> <span class="n">b</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
    <span class="c1">// Dummy bitmap. You&#39;ll want something that&#39;s not just a blank bitmap.</span>
    <span class="n">B</span><span class="o">:=</span><span class="n">CreateBitmap</span><span class="p">(</span><span class="mi">100</span><span class="o">,</span><span class="mi">100</span><span class="p">)</span><span class="o">;</span>

    <span class="c1">// Apply the filter (Posterize in this case) without making a copy.</span>
    <span class="n">GetMufasaBitmap</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">.</span><span class="n">Posterize</span><span class="p">(</span><span class="n">GetMufasaBitmap</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>

    <span class="c1">// Always free your bitmaps when you no longer use them. :)</span>
    <span class="n">FreeBitmap</span><span class="p">(</span><span class="n">b</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="createmaskfrombitmap">
<span id="scriptref-createmaskfrombitmap"></span><h4>CreateMaskFromBitmap<a class="headerlink" href="#createmaskfrombitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CreateMaskFromBitmap</span><span class="p">(</span><span class="n">Bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TMask</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="findmasktolerance">
<span id="scriptref-findmasktolerance"></span><h4>FindMaskTolerance<a class="headerlink" href="#findmasktolerance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindMaskTolerance</span><span class="p">(</span><span class="k">const</span> <span class="n">mask</span><span class="o">:</span> <span class="n">TMask</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span><span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">Tolerance</span><span class="o">,</span> <span class="n">ContourTolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="findbitmapmasktolerance">
<span id="scriptref-findbitmapmasktolerance"></span><h4>FindBitmapMaskTolerance<a class="headerlink" href="#findbitmapmasktolerance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindBitmapMaskTolerance</span><span class="p">(</span><span class="n">mask</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">Tolerance</span><span class="o">,</span> <span class="n">ContourTolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="finddeformedbitmaptolerancein">
<span id="scriptref-finddeformedbitmaptolerancein"></span><h4>FindDeformedBitmapToleranceIn<a class="headerlink" href="#finddeformedbitmaptolerancein" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindDeformedBitmapToleranceIn</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">tolerance</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">Range</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">AllowPartialAccuracy</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span> <span class="k">var</span> <span class="n">accuracy</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="drawtpabitmap">
<span id="scriptref-drawtpabitmap"></span><h4>DrawTPABitmap<a class="headerlink" href="#drawtpabitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DrawTPABitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Color</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p><em>Draws</em> a TPointArray on a bitmap. Each point in the TPointArray is <em>painted</em>
on the bitmap by setting the pixel on the bitmap (position defined by tpa point)
to <em>color</em>.</p>
</div>
<div class="section" id="drawatpabitmap">
<span id="scriptref-drawatpabitmap"></span><h4>DrawATPABitmap<a class="headerlink" href="#drawatpabitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DrawATPABitmap</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">ATPA</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p><em>Draws</em> a Array of TPointArray on a bitmap.
Each point in the TPointArray is <em>painted</em> on the bitmap by setting
the pixel on the bitmap (position defined by tpa point)
to a color. Colors differ per TPointArray (group).</p>
</div>
<div class="section" id="drawatpabitmapex">
<span id="scriptref-drawatpabitmapex"></span><h4>DrawATPABitmapEx<a class="headerlink" href="#drawatpabitmapex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DrawATPABitmapEx</span><span class="p">(</span><span class="n">bitmap</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">ATPA</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="n">Colors</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p><em>Draws</em> a Array of TPointArray on a bitmap.
Each point in the TPointArray is <em>painted</em> on the bitmap by setting
the pixel on the bitmap (position defined by tpa point)
to a color. Colors are defined by <em>Colors</em>.</p>
</div>
<div class="section" id="drawbitmap">
<span id="scriptref-drawbitmap"></span><h4>DrawBitmap<a class="headerlink" href="#drawbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DrawBitmap</span><span class="p">(</span><span class="n">Bmp</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">Dest</span><span class="o">:</span> <span class="n">TCanvas</span><span class="o">;</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Draw the bitmap to a TCanvas.</p>
</div>
<div class="section" id="rectanglebitmap">
<span id="scriptref-rectanglebitmap"></span><h4>RectangleBitmap<a class="headerlink" href="#rectanglebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RectangleBitmap</span><span class="p">(</span><span class="n">bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">box</span> <span class="o">:</span> <span class="n">TBox</span><span class="o">;</span> <span class="n">Color</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="floodfillbitmap">
<span id="scriptref-floodfillbitmap"></span><h4>FloodFillBitmap<a class="headerlink" href="#floodfillbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FloodFillBitmap</span><span class="p">(</span><span class="n">bitmap</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">StartPoint</span> <span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="k">const</span> <span class="n">SearchCol</span><span class="o">,</span><span class="n">ReplaceCol</span> <span class="o">:</span> <span class="n">TColor</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="calculatepixelshift">
<span id="scriptref-calculatepixelshift"></span><h4>CalculatePixelShift<a class="headerlink" href="#calculatepixelshift" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CalculatePixelShift</span><span class="p">(</span><span class="n">Bmp1</span><span class="o">,</span><span class="n">Bmp2</span> <span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">CompareBox</span> <span class="o">:</span> <span class="n">TBox</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="calculatepixeltolerance">
<span id="scriptref-calculatepixeltolerance"></span><h4>CalculatePixelTolerance<a class="headerlink" href="#calculatepixeltolerance" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CalculatePixelTolerance</span><span class="p">(</span><span class="n">Bmp1</span><span class="o">,</span><span class="n">Bmp2</span> <span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">CompareBox</span> <span class="o">:</span> <span class="n">TBox</span><span class="o">;</span> <span class="n">CTS</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">extended</span><span class="o">;</span><span class="s">&#39;);</span>
</pre></div>
</div>
</div>
<div class="section" id="cropbitmap">
<h4>CropBitmap<a class="headerlink" href="#cropbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CropBitmap</span><span class="p">(</span><span class="k">const</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span> <span class="n">ye</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Crops the bitmap, removes all points outside (xs, ys, xe, ye).</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span>
  <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">BitmapFromClient</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="p">)</span><span class="o">;</span>
  <span class="n">CropBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">40</span><span class="o">,</span> <span class="mi">40</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="getcolorsbitmap">
<h4>GetColorsBitmap<a class="headerlink" href="#getcolorsbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetColorsBitmap</span><span class="p">(</span><span class="k">const</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TIntegerArray of all colours on the bitmap, the result will be sorted row by row.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span>
  <span class="n">bmp</span><span class="o">,</span> <span class="n">i</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
  <span class="n">arr</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">BitmapFromClient</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>
  <span class="n">arr</span> <span class="o">:=</span> <span class="n">GetColorsBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span>

  <span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="nb">high</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span> <span class="k">do</span>
    <span class="nb">writeln</span><span class="p">(</span><span class="nb">intToStr</span><span class="p">(</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="bitmaptomatrix">
<h4>BitmapToMatrix<a class="headerlink" href="#bitmaptomatrix" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BitmapToMatrix</span><span class="p">(</span><span class="k">const</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a two dimensions integer array of all the colors on the bitmap.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">var</span>
 <span class="n">bmp</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
 <span class="n">matrix</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">BitmapFromClient</span><span class="p">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>
  <span class="n">matrix</span> <span class="o">:=</span> <span class="n">BitmapToMatrix</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span>

  <span class="k">for</span> <span class="n">y</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="mi">10</span> <span class="k">do</span>
    <span class="k">for</span> <span class="n">x</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="mi">10</span> <span class="k">do</span>
      <span class="nb">writeln</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">x</span><span class="p">])</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="drawmatrixbitmap">
<h4>DrawMatrixBitmap<a class="headerlink" href="#drawmatrixbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">DrawMatrixBitmap</span><span class="p">(</span><span class="k">const</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">matrix</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Draws a matrix onto the bitmap.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">DrawMatrixBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="n">matrix</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="thresholdadaptivebitmap">
<h4>ThresholdAdaptiveBitmap<a class="headerlink" href="#thresholdadaptivebitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ThresholdAdaptiveBitmap</span><span class="p">(</span><span class="k">const</span> <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">Alpha</span><span class="o">,</span> <span class="n">Beta</span><span class="o">:</span> <span class="kt">Byte</span><span class="o">;</span> <span class="n">Invert</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span> <span class="n">Method</span><span class="o">:</span> <span class="n">TBmpThreshMethod</span><span class="o">;</span> <span class="n">C</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Applys a ThresholdAdaptive filter onto the bitmap. Vaild TBmpThreshMethods are (TM_Mean, TM_MinMax);</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">ThresholdAdaptiveBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="k">false</span><span class="o">,</span> <span class="n">TM_Mean</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="thresholdadaptivematrix">
<h4>ThresholdAdaptiveMatrix<a class="headerlink" href="#thresholdadaptivematrix" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ThresholdAdaptiveMatrix</span><span class="p">(</span><span class="k">var</span> <span class="n">Matrix</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="o">;</span> <span class="n">Alpha</span><span class="o">,</span> <span class="n">Beta</span><span class="o">:</span> <span class="kt">Byte</span><span class="o">;</span> <span class="n">Invert</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span> <span class="n">Method</span><span class="o">:</span> <span class="n">TBmpThreshMethod</span><span class="o">;</span> <span class="n">C</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Applys a ThresholdAdaptive filter onto a image matrix (created by BitmapToMatrix). Vaild TBmpThreshMethods are (TM_Mean, TM_MinMax);</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">ThresholdAdaptiveBitmap</span><span class="p">(</span><span class="n">matrix</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">255</span><span class="o">,</span> <span class="k">false</span><span class="o">,</span> <span class="n">TM_Mean</span><span class="o">,</span> <span class="mi">0</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="resizebilinearmatrix">
<h4>ResizeBilinearMatrix<a class="headerlink" href="#resizebilinearmatrix" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ResizeBilinearMatrix</span><span class="p">(</span><span class="k">var</span> <span class="n">Matrix</span><span class="o">:</span> <span class="n">T2DIntegerArray</span><span class="o">;</span> <span class="n">NewW</span><span class="o">,</span> <span class="n">NewH</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Uses the Bilinear resize method to resize a image matrix (created by BitmapToMatrix) to width <em>newW</em> and height <em>newH</em>.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">ResizeBilinearMatrix</span><span class="p">(</span><span class="n">matrix</span><span class="o">,</span> <span class="mi">500</span><span class="o">,</span> <span class="mi">500</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-scriptref/sqlite"></span><div class="section" id="sqlite-functions">
<span id="scriptref-sqlite"></span><h3>SQLite Functions<a class="headerlink" href="#sqlite-functions" title="Permalink to this headline">¶</a></h3>
<p>Simba has support for reading and manipulating SQLite databases.
Open connections are all represented by integers in scripts. The integers point to an index in an internal array of pointers which is managed by Simba.
sqlite_open and function sqlite_open_v2 return an integer that you use for most other functions. This page documents only the functions, and not <a class="reference external" href="http://www.sqlite.org">SQLite</a> or the <a class="reference external" href="http://en.wikipedia.org/wiki/SQL">SQL</a> language.
After opening a connection, you should use sqlite_close on it when you are no longer using it. If, however, for some reason you forget, Simba will free all unfreed connections automatically.</p>
<div class="section" id="sqlite-open">
<h4>sqlite_open<a class="headerlink" href="#sqlite-open" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_open</span><span class="p">(</span><span class="n">filename</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Will try to open a connection to the database file specified and returns an index to the internal array.
If the database file does not exist, it will attempt to create it.
This will return -1 if no connection could be established.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">DB</span> <span class="o">:=</span> <span class="n">sqlite_open</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span><span class="o">;</span> <span class="c1">// DB would be an integer that you pass as the index parameter to the other methods.</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-open-v2">
<h4>sqlite_open_v2<a class="headerlink" href="#sqlite-open-v2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_open_v2</span><span class="p">(</span><span class="n">filename</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">flags</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Does the same as sqlite_open however you can provide flags to use when opening.</p>
<p><em>Open flags:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">const</span>
  <span class="n">SQLITE_OPEN_READONLY</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_READWRITE</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_CREATE</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_URI</span> <span class="o">=</span> <span class="mi">40</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_NOMUTEX</span> <span class="o">=</span> <span class="mi">8000</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_FULLMUTEX</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_SHAREDCACHE</span> <span class="o">=</span> <span class="mi">20000</span><span class="o">;</span>
  <span class="n">SQLITE_OPEN_PRIVATECACHE</span> <span class="o">=</span> <span class="mi">40000</span><span class="o">;</span>
</pre></div>
</div>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">DB</span> <span class="o">:=</span> <span class="n">sqlite_open_v2</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="o">,</span> <span class="n">SQLITE_OPEN_READONLY</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Open as read only, will not create file.</span>
<span class="n">DB</span> <span class="o">:=</span> <span class="n">sqlite_open_v2</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="o">,</span> <span class="n">SQLITE_OPEN_READWRITE</span> <span class="k">or</span> <span class="n">SQLITE_OPEN_CREATE</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Open as read write, will create file.</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-version">
<h4>sqlite_version<a class="headerlink" href="#sqlite-version" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_version</span><span class="p">()</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the version of the loaded SQLite library expressed as a string (x.y.z).</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="nb">Writeln</span><span class="p">(</span><span class="n">sqlite_version</span><span class="p">())</span><span class="o">;</span> <span class="c1">// Outputs 3.7.10 for me</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-version-num">
<h4>sqlite_version_num<a class="headerlink" href="#sqlite-version-num" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_version_num</span><span class="p">()</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the version of the loaded SQLite library expressed as an integer (x * 1000000 + y * 1000 + x).</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="nb">Writeln</span><span class="p">(</span><span class="n">sqlite_version_num</span><span class="p">())</span><span class="o">;</span> <span class="c1">// Outputs 3007010 for me</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-query">
<h4>sqlite_query<a class="headerlink" href="#sqlite-query" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_query</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">sql</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Attempts to execute a query on the database handle specified by index. Returns true if SQLITE_OK is returned by SQLite.
If it returns false, it is useful to see what sqlite_errMsg outputs.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">sqlite_query</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;CREATE TABLE test (id INTEGER PRIMARY KEY AUTOINCREMENT, name VARCHAR(50) UNIQUE NOT NULL);&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="n">sqlite_query</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;INSERT INTO test (name) VALUES (</span><span class="se">&#39;&#39;</span><span class="s">Sex</span><span class="se">&#39;&#39;</span><span class="s">);&#39;</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-queryvalue">
<h4>sqlite_queryValue<a class="headerlink" href="#sqlite-queryvalue" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_queryValue</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">sql</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">out</span> <span class="n">results</span> <span class="o">:</span> <span class="n">T2DStringArray</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Attempts to execute a query on the database handle specified by index. Return true if SQLITE_OK is returned by SQLite.
This will also save the resulting rows in the Results variable provided. The first array will be an array containing column names.
If it returns false, it is useful to see what sqlite_errMsg outputs.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">sqlite_queryValue</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;SELECT * FROM test;&#39;</span><span class="o">,</span> <span class="n">Results</span><span class="p">)</span><span class="o">;</span>
<span class="nb">Writeln</span><span class="p">(</span><span class="n">Results</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Should output [[&#39;id&#39;, &#39;name&#39;], [&#39;1&#39;, &#39;Sex&#39;]]</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-queryresult">
<h4>sqlite_queryResult<a class="headerlink" href="#sqlite-queryresult" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_queryResult</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">sql</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">error</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span> <span class="o">:</span> <span class="n">T2DStringArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Attempts to execute a query on the database handle specified by index. The resulting rows are returned.
If an error occurred during the query, the error boolean will be set to true. Otherwise, it will be false.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">Results</span> <span class="o">:=</span> <span class="n">sqlite_queryResult</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;SELECT * FROM test;&#39;</span><span class="o">,</span> <span class="n">error</span><span class="p">)</span><span class="o">;</span>
<span class="k">if</span> <span class="n">error</span> <span class="k">then</span>
  <span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="c1">// do your error handling here...</span>
<span class="nb">Writeln</span><span class="p">(</span><span class="n">Results</span><span class="p">)</span><span class="o">;</span> <span class="c1">// Should output [[&#39;id&#39;, &#39;name&#39;], [&#39;1&#39;, &#39;Sex&#39;]]</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-escape">
<h4>sqlite_escape<a class="headerlink" href="#sqlite-escape" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_escape</span><span class="p">(</span><span class="n">s</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Sanitizes a string for input into the database by replacing apostrophes with anothe apostrophe. It will return the escaped string.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="nb">Writeln</span><span class="p">(</span><span class="n">sqlite_escape</span><span class="p">(</span><span class="s">&#39;foo </span><span class="se">&#39;&#39;</span><span class="s"> or 1=1&#39;</span><span class="p">))</span><span class="o">;</span> <span class="c1">// Outputs foo &#39;&#39; or 1=1. Note that it looks as I inputted it as SQLite uses the same escaping conventions for apostrophes as Pascal.</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-close">
<h4>sqlite_close<a class="headerlink" href="#sqlite-close" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">sqlite_close</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Closes the database handle specified by index (removing file locks, etc.). Don&#8217;t forget to use this when you&#8217;re done working on a database!</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">DB</span> <span class="o">:=</span> <span class="n">sqlite_open</span><span class="p">(</span><span class="s">&#39;test.db&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="c1">// [...]</span>
<span class="n">sqlite_close</span><span class="p">(</span><span class="n">DB</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-errmsg">
<h4>sqlite_errMsg<a class="headerlink" href="#sqlite-errmsg" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_errMsg</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the error message returned by the last SQLite library call. You must provide an index to a database handle.
If no error has occurred, this will return &#8216;not an error&#8217;.</p>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">sqlite_query</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;asdfghjkl&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="nb">Writeln</span><span class="p">(</span><span class="n">sqlite_errmsg</span><span class="p">(</span><span class="n">DB</span><span class="p">))</span><span class="o">;</span> <span class="c1">// near &quot;asdfghjkl&quot;: syntax error</span>
</pre></div>
</div>
</div>
<div class="section" id="sqlite-errcode">
<h4>sqlite_errCode<a class="headerlink" href="#sqlite-errcode" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">sqlite_errCode</span><span class="p">(</span><span class="kp">index</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the result code returned by the last SQLite library call. You must provide an index to a database handle.
If no error has occurred, this will return SQLITE_OK.</p>
<p><em>Result codes:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">const</span>
  <span class="n">SQLITE_OK</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// Successful result</span>
  <span class="n">SQLITE_ERROR</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// SQL error or missing database</span>
  <span class="n">SQLITE_INTERNAL</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="c1">// Internal logic error in SQLite</span>
  <span class="n">SQLITE_PERM</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span> <span class="c1">// Access permission denied</span>
  <span class="n">SQLITE_ABORT</span> <span class="o">=</span> <span class="mi">4</span><span class="o">;</span> <span class="c1">// Callback routine requested an abort</span>
  <span class="n">SQLITE_BUSY</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span> <span class="c1">// The database file is locked</span>
  <span class="n">SQLITE_LOCKED</span> <span class="o">=</span> <span class="mi">6</span><span class="o">;</span> <span class="c1">// A table in the database is locked</span>
  <span class="n">SQLITE_NOMEM</span> <span class="o">=</span> <span class="mi">7</span><span class="o">;</span> <span class="c1">// A malloc() failed</span>
  <span class="n">SQLITE_READONLY</span> <span class="o">=</span> <span class="mi">8</span><span class="o">;</span> <span class="c1">// Attempt to write a readonly database</span>
  <span class="n">SQLITE_INTERRUPT</span> <span class="o">=</span> <span class="mi">9</span><span class="o">;</span> <span class="c1">// Operation terminated by sqlite3_interrupt()</span>
  <span class="n">SQLITE_IOERR</span> <span class="o">=</span> <span class="mi">10</span><span class="o">;</span> <span class="c1">// Some kind of disk I/O error occurred</span>
  <span class="n">SQLITE_CORRUPT</span> <span class="o">=</span> <span class="mi">11</span><span class="o">;</span> <span class="c1">// The database disk image is malformed</span>
  <span class="n">SQLITE_NOTFOUND</span> <span class="o">:=</span> <span class="mi">12</span><span class="o">;</span> <span class="c1">// Unknown opcode in sqlite3_file_control()</span>
  <span class="n">SQLITE_FULL</span> <span class="o">:=</span> <span class="mi">13</span><span class="o">;</span> <span class="c1">// Insertion failed because database is full</span>
  <span class="n">SQLITE_CANTOPEN</span> <span class="o">:=</span> <span class="mi">14</span><span class="o">;</span> <span class="c1">// Unable to open the database file</span>
  <span class="n">SQLITE_PROTOCOL</span> <span class="o">=</span> <span class="mi">15</span><span class="o">;</span> <span class="c1">// Database lock protocol error</span>
  <span class="n">SQLITE_EMPTY</span> <span class="o">=</span> <span class="mi">16</span><span class="o">;</span> <span class="c1">// Database is empty</span>
  <span class="n">SQLITE_SCHEMA</span> <span class="o">=</span> <span class="mi">17</span><span class="o">;</span> <span class="c1">// The database schema changed</span>
  <span class="n">SQLITE_TOOBIG</span> <span class="o">=</span> <span class="mi">18</span><span class="o">;</span> <span class="c1">// String or BLOB exceeds size limit</span>
  <span class="n">SQLITE_CONSTRAINT</span> <span class="o">=</span> <span class="mi">19</span><span class="o">;</span> <span class="c1">// Abort due to constraint violation</span>
  <span class="n">SQLITE_MISMATCH</span> <span class="o">=</span> <span class="mi">20</span><span class="o">;</span> <span class="c1">// Data type mismatch</span>
  <span class="n">SQLITE_MISUSE</span> <span class="o">=</span> <span class="mi">21</span><span class="o">;</span> <span class="c1">// Library used incorrectly</span>
  <span class="n">SQLITE_NOLFS</span> <span class="o">=</span> <span class="mi">22</span><span class="o">;</span> <span class="c1">// Uses OS features not supported on host</span>
  <span class="n">SQLITE_AUTH</span> <span class="o">=</span> <span class="mi">23</span><span class="o">;</span> <span class="c1">// Authorization denied</span>
  <span class="n">SQLITE_FORMAT</span> <span class="o">=</span> <span class="mi">24</span><span class="o">;</span> <span class="c1">// Auxiliary database format error</span>
  <span class="n">SQLITE_RANGE</span> <span class="o">=</span> <span class="mi">25</span><span class="o">;</span> <span class="c1">// 2nd parameter to sqlite3_bind out of range</span>
  <span class="n">SQLITE_NOTADB</span> <span class="o">=</span> <span class="mi">26</span><span class="o">;</span> <span class="c1">// File opened that is not a database file</span>
  <span class="n">SQLITE_ROW</span> <span class="o">=</span> <span class="mi">27</span><span class="o">;</span> <span class="c1">// sqlite3_step() has another row ready</span>
  <span class="n">SQLITE_DONE</span> <span class="o">=</span> <span class="mi">28</span><span class="o">;</span> <span class="c1">// sqlite3_step() has finished executing</span>
</pre></div>
</div>
<p><em>Example:</em></p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">sqlite_query</span><span class="p">(</span><span class="n">DB</span><span class="o">,</span> <span class="s">&#39;asdfghjkl&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="nb">Writeln</span><span class="p">(</span><span class="n">sqlite_errmsg</span><span class="p">(</span><span class="n">DB</span><span class="p">))</span><span class="o">;</span> <span class="c1">// 1 (SQLITE_ERROR)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-scriptref/string"></span><div class="section" id="string-functions">
<span id="scriptref-string"></span><h3>String Functions<a class="headerlink" href="#string-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="capitalize">
<h4>Capitalize<a class="headerlink" href="#capitalize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Capitalize</span><span class="p">(</span><span class="nb">str</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="compressstring">
<h4>CompressString<a class="headerlink" href="#compressstring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CompressString</span><span class="p">(</span><span class="k">const</span> <span class="nb">Str</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="decompressstring">
<h4>DecompressString<a class="headerlink" href="#decompressstring" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">DecompressString</span><span class="p">(</span><span class="k">const</span> <span class="n">Compressed</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="base64encode">
<h4>Base64Encode<a class="headerlink" href="#base64encode" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Base64Encode</span><span class="p">(</span><span class="k">const</span> <span class="nb">str</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="base64decode">
<h4>Base64Decode<a class="headerlink" href="#base64decode" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Base64Decode</span><span class="p">(</span><span class="k">const</span> <span class="nb">str</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="format">
<h4>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Format</span><span class="p">(</span><span class="k">const</span> <span class="n">fmt</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span><span class="k">const</span> <span class="n">args</span> <span class="o">:</span> <span class="k">array</span> <span class="k">of</span> <span class="k">const</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="tostr">
<h4>ToStr<a class="headerlink" href="#tostr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ToStr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="stringmatch">
<h4>StringMatch<a class="headerlink" href="#stringmatch" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StringMatch</span><span class="p">(</span><span class="n">checkCompare</span><span class="o">,</span> <span class="n">goalCompare</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">extended</span><span class="o">;</span>
</pre></div>
</div>
<p>Uses levenshtein distance to work out the match % of the two strings.</p>
</div>
<div class="section" id="between">
<h4>Between<a class="headerlink" href="#between" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Between</span><span class="p">(</span><span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">,</span> <span class="nb">str</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="multibetween">
<h4>MultiBetween<a class="headerlink" href="#multibetween" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MultiBetween</span><span class="p">(</span><span class="nb">str</span><span class="o">,</span> <span class="n">s1</span><span class="o">,</span> <span class="n">s2</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="n">TStringArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits a string into an array of strings by giving it an begin and an end
tag. Useful for data reading</p>
</div>
<div class="section" id="inttostr">
<h4>IntToStr<a class="headerlink" href="#inttostr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">IntToStr</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="floattostr">
<h4>FloatToStr<a class="headerlink" href="#floattostr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FloatToStr</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="booltostr">
<h4>BoolToStr<a class="headerlink" href="#booltostr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">BoolToStr</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtoint">
<h4>StrToInt<a class="headerlink" href="#strtoint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToInt</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtointdef">
<h4>StrToIntDef<a class="headerlink" href="#strtointdef" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToIntDef</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="kp">default</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtofloat">
<h4>StrToFloat<a class="headerlink" href="#strtofloat" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToFloat</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtofloatdef">
<h4>StrToFloatDef<a class="headerlink" href="#strtofloatdef" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToFloatDef</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="kp">default</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtobool">
<h4>StrToBool<a class="headerlink" href="#strtobool" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToBool</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="strtobooldef">
<h4>StrToBoolDef<a class="headerlink" href="#strtobooldef" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">StrToBoolDef</span><span class="p">(</span><span class="n">value</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="kp">default</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="extractfromstr">
<h4>ExtractFromStr<a class="headerlink" href="#extractfromstr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ExtractFromStr</span><span class="p">(</span> <span class="nb">Str</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Extract</span> <span class="o">:</span> <span class="n">StrExtr</span><span class="p">)</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="replace">
<h4>Replace<a class="headerlink" href="#replace" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Replace</span><span class="p">(</span><span class="n">Text</span><span class="o">,</span> <span class="n">FindStr</span><span class="o">,</span> <span class="n">ReplaceStr</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Flags</span><span class="o">:</span> <span class="n">TReplaceFlags</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="replacewrap">
<h4>ReplaceWrap<a class="headerlink" href="#replacewrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReplaceWrap</span><span class="p">(</span><span class="n">Text</span><span class="o">,</span> <span class="n">FindStr</span><span class="o">,</span> <span class="n">ReplaceStr</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Flags</span><span class="o">:</span> <span class="n">TReplaceFlags</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="implode">
<h4>Implode<a class="headerlink" href="#implode" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Implode</span><span class="p">(</span><span class="n">Glue</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="n">Pieces</span><span class="o">:</span> <span class="n">TStringArray</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="explode">
<h4>Explode<a class="headerlink" href="#explode" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Explode</span><span class="p">(</span><span class="n">del</span><span class="o">,</span> <span class="nb">str</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="n">TStringArray</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="explodewrap">
<h4>ExplodeWrap<a class="headerlink" href="#explodewrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ExplodeWrap</span><span class="p">(</span><span class="n">del</span><span class="o">,</span> <span class="nb">str</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">res</span> <span class="o">:</span> <span class="n">TStringArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="padl">
<h4>Padl<a class="headerlink" href="#padl" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Padl</span><span class="p">(</span><span class="n">s</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">i</span><span class="o">:</span> <span class="kt">longInt</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="padz">
<h4>Padz<a class="headerlink" href="#padz" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Padz</span><span class="p">(</span><span class="n">s</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">i</span><span class="o">:</span> <span class="kt">longInt</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="padr">
<h4>Padr<a class="headerlink" href="#padr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">Padr</span><span class="p">(</span><span class="n">s</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">i</span><span class="o">:</span> <span class="kt">longInt</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="execregexpr">
<h4>ExecRegExpr<a class="headerlink" href="#execregexpr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ExecRegExpr</span><span class="p">(</span> <span class="k">const</span> <span class="n">RegExpr</span><span class="o">,</span> <span class="n">InputStr</span> <span class="o">:</span> <span class="k">String</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="splitregexpr">
<h4>SplitRegExpr<a class="headerlink" href="#splitregexpr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SplitRegExpr</span><span class="p">(</span> <span class="k">const</span> <span class="n">RegExpr</span><span class="o">,</span> <span class="n">InputStr</span> <span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">Pieces</span> <span class="o">:</span> <span class="n">TStrings</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="replaceregexpr">
<h4>ReplaceRegExpr<a class="headerlink" href="#replaceregexpr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReplaceRegExpr</span><span class="p">(</span> <span class="k">const</span> <span class="n">RegExpr</span><span class="o">,</span> <span class="n">InputStr</span><span class="o">,</span> <span class="n">ReplaceStr</span> <span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">UseSubstitution</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span> <span class="o">:</span> <span class="k">String</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="posex">
<h4>PosEx<a class="headerlink" href="#posex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PosEx</span><span class="p">(</span><span class="n">needle</span><span class="o">,</span> <span class="n">haystack</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">offset</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="isarrinstr">
<h4>IsArrInStr<a class="headerlink" href="#isarrinstr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">IsArrInStr</span><span class="p">(</span><span class="n">strArr</span><span class="o">:</span> <span class="n">TStringArray</span><span class="o">;</span> <span class="n">s</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if any of the indexes in TStringArray StrArr is found in string s</p>
</div>
</div>
<span id="document-scriptref/tpa"></span><div class="section" id="tpointarray-functions">
<span id="scriptref-tpa"></span><h3>TPointArray Functions<a class="headerlink" href="#tpointarray-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="quicksort">
<h4>Quicksort<a class="headerlink" href="#quicksort" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">Quicksort</span><span class="p">(</span><span class="k">var</span> <span class="n">Arr</span> <span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts a TIntegerArray using the Quicksort algorithm</p>
</div>
<div class="section" id="tswap">
<h4>tSwap<a class="headerlink" href="#tswap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">tSwap</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Swaps the values of a and b around</p>
<p>The following example switches point P with point P2. You can run the example
for a demonstration. It will print before the swap and after the swap to
illustrate the change.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">tSwapExample</span><span class="o">;</span>

<span class="k">var</span> <span class="n">P</span><span class="o">,</span> <span class="n">P2</span><span class="o">:</span> <span class="n">Tpoint</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">P</span> <span class="o">:=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">111</span><span class="o">,</span> <span class="mi">111</span><span class="p">)</span><span class="o">;</span>
  <span class="n">P2</span> <span class="o">:=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">222</span><span class="o">,</span> <span class="mi">222</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;P := &#39;</span> <span class="o">+</span> <span class="n">tostr</span><span class="p">(</span><span class="n">P</span><span class="p">))</span><span class="o">;</span>
  <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;P2 := &#39;</span> <span class="o">+</span> <span class="n">tostr</span><span class="p">(</span><span class="n">P2</span><span class="p">))</span><span class="o">;</span>
  <span class="n">tSwap</span><span class="p">(</span><span class="n">P</span><span class="o">,</span> <span class="n">P2</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;P := &#39;</span> <span class="o">+</span> <span class="n">tostr</span><span class="p">(</span><span class="n">P</span><span class="p">))</span><span class="o">;</span>
  <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;P2 := &#39;</span> <span class="o">+</span> <span class="n">tostr</span><span class="p">(</span><span class="n">P2</span><span class="p">))</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="tpaswap">
<h4>tpaSwap<a class="headerlink" href="#tpaswap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">tpaSwap</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Swaps the values of a and b around</p>
</div>
<div class="section" id="swape">
<h4>SwapE<a class="headerlink" href="#swape" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SwapE</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Swaps the values of a and b around</p>
</div>
<div class="section" id="raastpaex">
<h4>RAaSTPAEx<a class="headerlink" href="#raastpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RAaSTPAEx</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Leaves one point per box with side lengths W and H to the TPA</p>
</div>
<div class="section" id="raastpa">
<h4>RAaSTPA<a class="headerlink" href="#raastpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RAaSTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Leaves one point per box with the side length Dist</p>
</div>
<div class="section" id="nearbypointinarrayex">
<h4>NearbyPointInArrayEx<a class="headerlink" href="#nearbypointinarrayex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">NearbyPointInArrayEx</span><span class="p">(</span><span class="k">const</span> <span class="n">P</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span><span class="kt">Integer</span><span class="o">;</span><span class="k">const</span>  <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the point P is near a point in the TPA a with the</p>
</div>
<div class="section" id="nearbypointinarray">
<h4>NearbyPointInArray<a class="headerlink" href="#nearbypointinarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">NearbyPointInArray</span><span class="p">(</span><span class="k">const</span> <span class="n">P</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span><span class="kt">Integer</span><span class="o">;</span><span class="k">const</span>  <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the point P is near a point in the TPA a with the</p>
</div>
<div class="section" id="quicktpasort">
<h4>QuickTPASort<a class="headerlink" href="#quicktpasort" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">QuickTPASort</span><span class="p">(</span><span class="k">var</span> <span class="n">A</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">B</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">iLo</span><span class="o">,</span> <span class="n">iHi</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SortUp</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="quickatpasort">
<h4>QuickATPASort<a class="headerlink" href="#quickatpasort" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">QuickATPASort</span><span class="p">(</span><span class="k">var</span> <span class="n">A</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">B</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="n">iLo</span><span class="o">,</span> <span class="n">iHi</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SortUp</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="sorttpafrom">
<h4>SortTPAFrom<a class="headerlink" href="#sorttpafrom" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortTPAFrom</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the TPA a from the TPoint From</p>
</div>
<div class="section" id="sortatpafrom">
<h4>SortATPAFrom<a class="headerlink" href="#sortatpafrom" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFrom</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Loops though each index of the T2DPointArray sorting each tpa from the TPoint</p>
</div>
<div class="section" id="sortatpafromfirstpoint">
<h4>SortATPAFromFirstPoint<a class="headerlink" href="#sortatpafromfirstpoint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFromFirstPoint</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2DPointArray from the TPoint, based from the first point in each TPointArray</p>
</div>
<div class="section" id="sortatpafrommidpoint">
<h4>SortATPAFromMidPoint<a class="headerlink" href="#sortatpafrommidpoint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFromMidPoint</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2DPointArray from the TPoint, based from the middle point in each TPointArray</p>
</div>
<div class="section" id="sortatpafromfirstpointx">
<h4>SortATPAFromFirstPointX<a class="headerlink" href="#sortatpafromfirstpointx" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFromFirstPointX</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2DPointArray from the TPoint, based from the first point X value in each TPointArray</p>
</div>
<div class="section" id="sortatpafromfirstpointy">
<h4>SortATPAFromFirstPointY<a class="headerlink" href="#sortatpafromfirstpointy" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFromFirstPointY</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">From</span><span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2DPointArray from the TPoint, based from the first point Y value in each TPointArray</p>
</div>
<div class="section" id="inverttpa">
<h4>InvertTPA<a class="headerlink" href="#inverttpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">InvertTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Reverses the TPA</p>
</div>
<div class="section" id="invertatpa">
<h4>InvertATPA<a class="headerlink" href="#invertatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">InvertATPA</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Reverses the T2dPointArray</p>
</div>
<div class="section" id="middletpaex">
<h4>MiddleTPAEx<a class="headerlink" href="#middletpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MiddleTPAEx</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Stores the middle point from the TPA in x and y</p>
<p>The following example will find the Colors and make a TPA then give you the x and y coordinates for the middle of the TPA.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">MiddleTPAExExample</span><span class="o">;</span>

<span class="k">var</span>
  <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
  <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">findcolors</span><span class="p">(</span><span class="n">TPA</span><span class="o">,</span> <span class="mi">205</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MiddleTPAEx</span><span class="p">(</span><span class="n">TPA</span><span class="o">,</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Mouse</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="middletpa">
<h4>MiddleTPA<a class="headerlink" href="#middletpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MiddleTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the middle TPA in the result</p>
<p>The following example like the previous one gives you the coordinates for the Middle of the TPA, but it returns it with the result being a TPoint.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">MiddleTPAExample</span><span class="o">;</span>

<span class="k">var</span>
  <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
  <span class="n">P</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">findcolors</span><span class="p">(</span><span class="n">TPA</span><span class="o">,</span> <span class="mi">205</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
  <span class="n">P</span> <span class="o">:=</span> <span class="n">MiddleTPAEx</span><span class="p">(</span><span class="n">TPA</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Mouse</span><span class="p">(</span><span class="n">P</span><span class="o">.</span><span class="n">x</span><span class="o">,</span> <span class="n">P</span><span class="o">.</span><span class="n">y</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="mediantpaex">
<h4>MedianTPAEx<a class="headerlink" href="#mediantpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">MedianTPAEx</span><span class="p">(</span><span class="k">var</span> <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">out</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds the point closest to the middle of the TPointArray, returns the TPoint in parameter x and y.</p>
</div>
<div class="section" id="mediantpa">
<h4>MedianTPA<a class="headerlink" href="#mediantpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MedianTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the point closest to the middle of the TPointArray.</p>
</div>
<div class="section" id="sortatpasize">
<h4>SortATPASize<a class="headerlink" href="#sortatpasize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPASize</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">BigFirst</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2dPointArray from largest to smallest if BigFirst is true or smallest to largest if BigFirst is false</p>
<p>The following Example Sorts the ATPA from largest to smallest.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">SortATPASizeExample</span><span class="o">;</span>

<span class="k">var</span>
  <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
  <span class="n">P</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">findcolors</span><span class="p">(</span><span class="n">TPA</span><span class="o">,</span> <span class="mi">205</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
  <span class="n">ATPA</span> <span class="o">:=</span> <span class="n">TPAtoATPA</span><span class="p">(</span><span class="n">TPA</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>
  <span class="n">SortATPASize</span><span class="p">(</span><span class="n">ATPA</span><span class="o">,</span> <span class="k">true</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="sortatpafromsize">
<h4>SortATPAFromSize<a class="headerlink" href="#sortatpafromsize" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortATPAFromSize</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Size</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">CloseFirst</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the T2DPointArray from Size by the closest first if CloseFirst is true</p>
</div>
<div class="section" id="filtertpasbetween">
<h4>FilterTPAsBetween<a class="headerlink" href="#filtertpasbetween" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FilterTPAsBetween</span><span class="p">(</span><span class="k">var</span> <span class="n">atpa</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">minLength</span><span class="o">,</span> <span class="n">maxLength</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Loops though each index of the T2DPointArray, removing the TPointArrays if their length falls beetween minLength and MaxLength.</p>
</div>
<div class="section" id="inintarrayex">
<h4>InIntArrayEx<a class="headerlink" href="#inintarrayex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">InIntArrayEx</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Where</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">const</span> <span class="n">Number</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if Number was found in the TIntegerArray a and returns its location in Where</p>
</div>
<div class="section" id="inintarray">
<h4>InIntArray<a class="headerlink" href="#inintarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">InIntArray</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="n">Number</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if Number is found in the TintegerArray a</p>
</div>
<div class="section" id="clearsameintegers">
<h4>ClearSameIntegers<a class="headerlink" href="#clearsameintegers" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClearSameIntegers</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Deletes the indexes in the TintegerArray a which are duplicated</p>
</div>
<div class="section" id="clearsameintegersandtpa">
<h4>ClearSameIntegersAndTPA<a class="headerlink" href="#clearsameintegersandtpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClearSameIntegersAndTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">p</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Deletes the indexes in the TIntegerArray a and TPointArray p which are duplicated</p>
</div>
<div class="section" id="splittpaex">
<h4>SplitTPAEx<a class="headerlink" href="#splittpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SplitTPAEx</span><span class="p">(</span><span class="k">const</span> <span class="n">arr</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points with max X and Y distances W and H to their own TPointArrays;</p>
</div>
<div class="section" id="splittpa">
<h4>SplitTPA<a class="headerlink" href="#splittpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SplitTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">arr</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points with max distance Dist to their own TPointArrays</p>
</div>
<div class="section" id="clustertpaex">
<h4>ClusterTPAEx<a class="headerlink" href="#clustertpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ClusterTPAEx</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points to their own TPointArrays if they fall outside of &#8216;width&#8217; and &#8216;height&#8217; bounds.
An alternative to SplitTPAEx, will be extremely fast compared to SplitTPAEx with a width/height less than 100.</p>
</div>
<div class="section" id="clustertpa">
<h4>ClusterTPA<a class="headerlink" href="#clustertpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ClusterTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">dist</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points with max distance &#8216;dist&#8217; to their own TPointArrays.
An alternative to SplitTPA, will be extremely fast compared to SplitTPA with a distance less than 100.</p>
</div>
<div class="section" id="floodfilltpa">
<h4>FloodFillTPA<a class="headerlink" href="#floodfilltpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FloodFillTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="filterpointspie">
<h4>FilterPointsPie<a class="headerlink" href="#filterpointspie" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FilterPointsPie</span><span class="p">(</span><span class="k">var</span> <span class="n">Points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">SD</span><span class="o">,</span> <span class="n">ED</span><span class="o">,</span> <span class="n">MinR</span><span class="o">,</span> <span class="n">MaxR</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="n">Mx</span><span class="o">,</span> <span class="n">My</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Removes the points that are in the TPointArray Points that are not within the the degrees SD (Strat Degrees) and</dt>
<dd>ED (End Degrees) and the radius&#8217; MinR (Min Radius) and MaxR (Max Radius) from the origin Mx and My</dd>
</dl>
</div>
<div class="section" id="filterpointsline">
<h4>FilterPointsLine<a class="headerlink" href="#filterpointsline" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FilterPointsLine</span><span class="p">(</span><span class="k">var</span> <span class="n">Points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Radial</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="n">Radius</span><span class="o">,</span> <span class="n">MX</span><span class="o">,</span> <span class="n">MY</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the result in the TPointArray Points. Returns the points from the TPointArray Points that are on the line Radial from the center mx, my that is with the radius Radius</p>
</div>
<div class="section" id="filterpointsdist">
<h4>FilterPointsDist<a class="headerlink" href="#filterpointsdist" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FilterPointsDist</span><span class="p">(</span><span class="k">var</span> <span class="n">Points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">MinDist</span><span class="o">,</span> <span class="n">MaxDist</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="n">Mx</span><span class="o">,</span> <span class="n">My</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<dl class="docutils">
<dt>Removes the points from the TPointArray Points that are not within the radius MinDist (Min Distance) and MaxDist</dt>
<dd>from the origin Mx and My</dd>
</dl>
</div>
<div class="section" id="filterpointsbox">
<h4>FilterPointsBox<a class="headerlink" href="#filterpointsbox" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FilterPointsBox</span><span class="p">(</span><span class="k">var</span> <span class="n">points</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Removes the points from the TPointArray that are not within the bounds of the box.</p>
</div>
<div class="section" id="getatpabounds">
<h4>GetATPABounds<a class="headerlink" href="#getatpabounds" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetATPABounds</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TBox</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the boundaries of the T2DPointArray ATPA as a TBox</p>
</div>
<div class="section" id="gettpabounds">
<h4>GetTPABounds<a class="headerlink" href="#gettpabounds" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetTPABounds</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TBox</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the boundaries of the TPointArray TPA as a TBox</p>
</div>
<div class="section" id="findtpaintpa">
<h4>FindTPAinTPA<a class="headerlink" href="#findtpaintpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindTPAinTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">SearchTPA</span><span class="o">,</span> <span class="n">TotalTPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Matches</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Looks for the TPoints from SearchTPA inside TotalTPA and stores the matches inside the TPointArray Matches</p>
</div>
<div class="section" id="getsamepointsatpa">
<h4>GetSamePointsATPA<a class="headerlink" href="#getsamepointsatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetSamePointsATPA</span><span class="p">(</span><span class="k">const</span>  <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Matches</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds duplicate Points inside the T2DPointArray ATPA and stores the results inside the TPointArray Matches</p>
</div>
<div class="section" id="findtexttpaintpa">
<h4>FindTextTPAinTPA<a class="headerlink" href="#findtexttpaintpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindTextTPAinTPA</span><span class="p">(</span><span class="n">Height</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span><span class="k">const</span>  <span class="n">SearchTPA</span><span class="o">,</span> <span class="n">TotalTPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Matches</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Looks for the TPoints from SearchTPA inside TotalTPA with a maximum y distance of Height and stores the matches inside the TPointArray Matches</p>
</div>
<div class="section" id="sortcirclewise">
<h4>SortCircleWise<a class="headerlink" href="#sortcirclewise" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SortCircleWise</span><span class="p">(</span><span class="k">var</span> <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">cx</span><span class="o">,</span> <span class="n">cy</span><span class="o">,</span> <span class="n">StartDegree</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SortUp</span><span class="o">,</span> <span class="n">ClockWise</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the TPointArray tpa from the point cx, cy if Sortup is true. Starting at StartDegree going clockwise if Clockwise is True</p>
</div>
<div class="section" id="linearsort">
<h4>LinearSort<a class="headerlink" href="#linearsort" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">LinearSort</span><span class="p">(</span><span class="k">var</span> <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">cx</span><span class="o">,</span> <span class="n">cy</span><span class="o">,</span> <span class="n">sd</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">SortUp</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Sorts the TPointArray tpa from cx, cy if Sortup is true on the degree angle sd</p>
</div>
<div class="section" id="rotatepoint">
<h4>RotatePoint<a class="headerlink" href="#rotatepoint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RotatePoint</span><span class="p">(</span><span class="k">Const</span> <span class="n">p</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="n">angle</span><span class="o">,</span> <span class="n">mx</span><span class="o">,</span> <span class="n">my</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>
</pre></div>
</div>
<p>Rotates the TPoint p around the center mx, my with the angle</p>
</div>
<div class="section" id="changedistpt">
<h4>ChangeDistPT<a class="headerlink" href="#changedistpt" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ChangeDistPT</span><span class="p">(</span><span class="k">const</span> <span class="n">PT</span> <span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="n">mx</span><span class="o">,</span><span class="n">my</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">newdist</span> <span class="o">:</span> <span class="kt">extended</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TPoint with the distance newdist from the point mx, my based on the position of the TPoint TP</p>
</div>
<div class="section" id="changedisttpa">
<h4>ChangeDistTPA<a class="headerlink" href="#changedisttpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ChangeDistTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">mx</span><span class="o">,</span><span class="n">my</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">newdist</span> <span class="o">:</span> <span class="kt">extended</span><span class="p">)</span> <span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the result in the TPointArray TPA with the distance newdist from mx, my based on the current position TPA</p>
</div>
<div class="section" id="findgapstpa">
<h4>FindGapsTPA<a class="headerlink" href="#findgapstpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindGapsTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">MinPixels</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds the possible gaps in the TPointArray TPA and results the gaps as a T2DPointArray. Considers as a gap if the gap length is &gt;= MinPixels</p>
</div>
<div class="section" id="removedisttpointarray">
<h4>RemoveDistTPointArray<a class="headerlink" href="#removedisttpointarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RemoveDistTPointArray</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span>  <span class="n">ThePoints</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">RemoveHigher</span><span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds the possible gaps in the TPointArray TPA and removes the gaps. Considers as a gap if the gap length is &gt;= MinPixels</p>
</div>
<div class="section" id="combinetpa">
<h4>CombineTPA<a class="headerlink" href="#combinetpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CombineTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">Ar1</span><span class="o">,</span> <span class="n">Ar2</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Attaches the TPointArray Ar2 onto the end of Ar1 and returns it as the result</p>
</div>
<div class="section" id="rearrangeandshortenarrayex">
<h4>ReArrangeandShortenArrayEx<a class="headerlink" href="#rearrangeandshortenarrayex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReArrangeandShortenArrayEx</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Results the TPointArray a with one point per box with side lengths W and H left</p>
</div>
<div class="section" id="rearrangeandshortenarray">
<h4>ReArrangeandShortenArray<a class="headerlink" href="#rearrangeandshortenarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReArrangeandShortenArray</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Results the TPointArray a with one point per box with side length Dist left</p>
</div>
<div class="section" id="tpatoatpaex">
<h4>TPAtoATPAEx<a class="headerlink" href="#tpatoatpaex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAtoATPAEx</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the TPA to boxes with sidelengths W and H and results them as a T2DPointArray</p>
</div>
<div class="section" id="tpatoatpa">
<h4>TPAtoATPA<a class="headerlink" href="#tpatoatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAtoATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the TPA to boxes with sidelength Dist and results them as a T2DPointArray</p>
</div>
<div class="section" id="combineintarray">
<h4>CombineIntArray<a class="headerlink" href="#combineintarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CombineIntArray</span><span class="p">(</span><span class="k">const</span> <span class="n">Ar1</span><span class="o">,</span> <span class="n">Ar2</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Attaches the TIntegerArray Ar2 onto the end of Ar1 and returns it as the result</p>
</div>
<div class="section" id="mergeatpa">
<h4>MergeATPA<a class="headerlink" href="#mergeatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">MergeATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span>  <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Combines all the TPointArrays from the T2DPointArray ATPA into the result</p>
</div>
<div class="section" id="appendtpa">
<h4>AppendTPA<a class="headerlink" href="#appendtpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">AppendTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">ToAppend</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Attaches the TPointArray ToAppend onto the end of TPA</p>
</div>
<div class="section" id="tpafromline">
<h4>TPAFromLine<a class="headerlink" href="#tpafromline" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromLine</span><span class="p">(</span><span class="k">const</span> <span class="n">x1</span><span class="o">,</span> <span class="n">y1</span><span class="o">,</span> <span class="n">x2</span><span class="o">,</span> <span class="n">y2</span><span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TPointArray of a line specified by the end points x1,y1 and x2,y2.</p>
</div>
<div class="section" id="edgefrombox">
<h4>EdgeFromBox<a class="headerlink" href="#edgefrombox" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">EdgeFromBox</span><span class="p">(</span><span class="k">const</span> <span class="n">Box</span><span class="o">:</span> <span class="n">TBox</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates a TPointArray from the edge of the TBox box</p>
</div>
<div class="section" id="tpafrombox">
<h4>TPAFromBox<a class="headerlink" href="#tpafrombox" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromBox</span><span class="p">(</span><span class="k">const</span> <span class="n">Box</span> <span class="o">:</span> <span class="n">TBox</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a TPointArray from the top left and the bottom right of the TBox Box</p>
</div>
<div class="section" id="tpafromellipse">
<h4>TPAFromEllipse<a class="headerlink" href="#tpafromellipse" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromEllipse</span><span class="p">(</span><span class="k">const</span> <span class="n">CX</span><span class="o">,</span> <span class="n">CY</span><span class="o">,</span> <span class="n">XRadius</span><span class="o">,</span> <span class="n">YRadius</span> <span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates and returns a TPointArray of the outline of a ellipse</p>
</div>
<div class="section" id="tpafromcircle">
<h4>TPAFromCircle<a class="headerlink" href="#tpafromcircle" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromCircle</span><span class="p">(</span><span class="k">const</span> <span class="n">CX</span><span class="o">,</span> <span class="n">CY</span><span class="o">,</span> <span class="n">Radius</span> <span class="o">:</span> <span class="kt">Integer</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Creates and returns a TPointArray of a circle, around the center point (CX, CY), with the size determined by Radius</p>
</div>
<div class="section" id="tpafrompolygon">
<h4>TPAFromPolygon<a class="headerlink" href="#tpafrompolygon" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAFromPolygon</span><span class="p">(</span><span class="k">const</span> <span class="n">shape</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns polygon as a TPointArray from a shape, which can be working either as
an array of main points OR border points. note: The order of the points are important.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">TPAFromPolygonExample</span><span class="o">;</span>

<span class="k">var</span>
  <span class="n">tpa</span><span class="o">,</span> <span class="n">shape</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
  <span class="n">bmp</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>

<span class="k">begin</span>
  <span class="n">tpa</span> <span class="o">:=</span> <span class="p">[</span><span class="n">point</span><span class="p">(</span><span class="mi">70</span><span class="o">,</span><span class="mi">90</span><span class="p">)</span><span class="o">,</span> <span class="n">point</span><span class="p">(</span><span class="mi">185</span><span class="o">,</span><span class="mi">90</span><span class="p">)</span><span class="o">,</span> <span class="n">point</span><span class="p">(</span><span class="mi">185</span><span class="o">,</span><span class="mi">116</span><span class="p">)</span><span class="o">,</span> <span class="n">point</span><span class="p">(</span><span class="mi">70</span><span class="o">,</span><span class="mi">116</span><span class="p">)</span><span class="o">,</span>
          <span class="n">point</span><span class="p">(</span><span class="mi">70</span><span class="o">,</span><span class="mi">140</span><span class="p">)</span><span class="o">,</span> <span class="n">point</span><span class="p">(</span><span class="mi">35</span><span class="o">,</span><span class="mi">105</span><span class="p">)</span><span class="o">,</span> <span class="n">point</span><span class="p">(</span><span class="mi">70</span><span class="o">,</span><span class="mi">70</span><span class="p">)]</span><span class="o">;</span>

  <span class="n">shape</span> <span class="o">:=</span> <span class="n">TPAFromPolygon</span><span class="p">(</span><span class="n">tpa</span><span class="p">)</span><span class="o">;</span>

  <span class="n">bmp</span> <span class="o">:=</span> <span class="n">createBitmap</span><span class="p">(</span><span class="mi">230</span><span class="o">,</span> <span class="mi">200</span><span class="p">)</span><span class="o">;</span>
  <span class="n">drawTPABitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">,</span> <span class="n">shape</span><span class="o">,</span> <span class="mi">255</span><span class="p">)</span><span class="o">;</span>

  <span class="n">displayDebugImgWindow</span><span class="p">(</span><span class="mi">230</span><span class="o">,</span> <span class="mi">200</span><span class="p">)</span><span class="o">;</span>
  <span class="n">drawBitmapDebugImg</span><span class="p">(</span><span class="n">bmp</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="fillellipse">
<h4>FillEllipse<a class="headerlink" href="#fillellipse" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FillEllipse</span><span class="p">(</span><span class="k">var</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Fills a ellipse, suggested to be used with TPAFromEllipse or TPAFromCircle</p>
</div>
<div class="section" id="rotatepoints">
<h4>RotatePoints<a class="headerlink" href="#rotatepoints" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">RotatePoints</span><span class="p">(</span><span class="k">Const</span> <span class="n">P</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">A</span><span class="o">,</span> <span class="n">cx</span><span class="o">,</span> <span class="n">cy</span><span class="o">:</span> <span class="kt">Extended</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span> <span class="o">;</span>
</pre></div>
</div>
<p>Rotates the TPointArray P around the center cx, cy with the angle a</p>
</div>
<div class="section" id="findtpaedges">
<h4>FindTPAEdges<a class="headerlink" href="#findtpaedges" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">FindTPAEdges</span><span class="p">(</span><span class="k">const</span> <span class="n">p</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TPointArray of the edge points of the TPointArray p</p>
</div>
<div class="section" id="cleartpafromtpa">
<h4>ClearTPAFromTPA<a class="headerlink" href="#cleartpafromtpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ClearTPAFromTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">arP</span><span class="o">,</span> <span class="n">ClearPoints</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Removes the points in TPointArray ClearPoints from arP</p>
</div>
<div class="section" id="returnpointsnotintpa">
<h4>ReturnPointsNotInTPA<a class="headerlink" href="#returnpointsnotintpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">ReturnPointsNotInTPA</span><span class="p">(</span><span class="k">Const</span> <span class="n">TotalTPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Box</span><span class="o">:</span> <span class="n">TBox</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>All the points from the TPointArray TotalTPA that are not in the TBox Box are returned in the TPointArray Res</p>
</div>
<div class="section" id="pointintpa">
<h4>PointInTPA<a class="headerlink" href="#pointintpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PointInTPA</span><span class="p">(</span><span class="n">p</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span><span class="k">const</span>  <span class="n">arP</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the TPoint p is found in the TPointArray arP</p>
</div>
<div class="section" id="cleardoubletpa">
<h4>ClearDoubleTPA<a class="headerlink" href="#cleardoubletpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClearDoubleTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Deletes duplicate TPAs in the TPointArray TPA</p>
</div>
<div class="section" id="tpacountsort">
<h4>TPACountSort<a class="headerlink" href="#tpacountsort" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPACountSort</span><span class="p">(</span><span class="k">Var</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span><span class="k">const</span> <span class="nb">max</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span><span class="k">Const</span> <span class="n">SortOnX</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="tpacountsortbase">
<h4>TPACountSortBase<a class="headerlink" href="#tpacountsortbase" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPACountSortBase</span><span class="p">(</span><span class="k">Var</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span><span class="k">const</span> <span class="n">maxx</span><span class="o">,</span> <span class="n">base</span><span class="o">:</span> <span class="n">TPoint</span><span class="o">;</span> <span class="k">const</span> <span class="n">SortOnX</span> <span class="o">:</span> <span class="kt">Boolean</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="inverttia">
<h4>InvertTIA<a class="headerlink" href="#inverttia" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">InvertTIA</span><span class="p">(</span><span class="k">var</span> <span class="n">tI</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Reverses the TIntegerArray tI</p>
</div>
<div class="section" id="sumintegerarray">
<h4>SumIntegerArray<a class="headerlink" href="#sumintegerarray" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SumIntegerArray</span><span class="p">(</span><span class="k">const</span> <span class="n">Ints</span> <span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Retuns the sum of all the integers in the TIntegerArray Ints</p>
</div>
<div class="section" id="averagetia">
<h4>AverageTIA<a class="headerlink" href="#averagetia" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AverageTIA</span><span class="p">(</span><span class="k">const</span> <span class="n">tI</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Gives an average of the sum of the integers in the TIntegerArray tI</p>
</div>
<div class="section" id="averageextended">
<h4>AverageExtended<a class="headerlink" href="#averageextended" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">AverageExtended</span><span class="p">(</span><span class="k">const</span> <span class="n">tE</span><span class="o">:</span> <span class="n">TExtendedArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span>
</pre></div>
</div>
<p>Gives an average of the sum of the extendeds in the TExtendedArray tI</p>
</div>
<div class="section" id="splittpaexwrap">
<h4>SplitTPAExWrap<a class="headerlink" href="#splittpaexwrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SplitTPAExWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">arr</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">res</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points with max X and Y distances W and H to their and returns the result in the T2DPointArray Res</p>
</div>
<div class="section" id="splittpawrap">
<h4>SplitTPAWrap<a class="headerlink" href="#splittpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SplitTPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">arr</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">res</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the points with max distance Dist to their own TPointArrays and returns the result in the T2DPointArray Res</p>
</div>
<div class="section" id="findgapstpawrap">
<h4>FindGapsTPAWrap<a class="headerlink" href="#findgapstpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FindGapsTPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">MinPixels</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds the possible gaps in the TPointArray TPA and the result is returned in the T2DPointArray Res. Considers as a gap if the gap length is &gt;= MinPixels</p>
</div>
<div class="section" id="removedisttpointarraywrap">
<h4>RemoveDistTPointArrayWrap<a class="headerlink" href="#removedisttpointarraywrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RemoveDistTPointArrayWrap</span><span class="p">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span><span class="k">const</span>  <span class="n">ThePoints</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">RemoveHigher</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Finds the possible gaps in the TPointArray TPA and removes the gaps. Considers as a gap if the gap length is &gt;= MinPixels and returns the result in the TPointArray Res</p>
</div>
<div class="section" id="combinetpawrap">
<h4>CombineTPAWrap<a class="headerlink" href="#combinetpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CombineTPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">Ar1</span><span class="o">,</span> <span class="n">Ar2</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Attaches the TPointArray Ar2 onto the end of Ar1 and returns the result in the TPointArray Res</p>
</div>
<div class="section" id="rearrangeandshortenarrayexwrap">
<h4>ReArrangeandShortenArrayExWrap<a class="headerlink" href="#rearrangeandshortenarrayexwrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ReArrangeandShortenArrayExWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Results the TPointArray a with one point per box with side lengths W and H left and puts the result in Res</p>
</div>
<div class="section" id="rearrangeandshortenarraywrap">
<h4>ReArrangeandShortenArrayWrap<a class="headerlink" href="#rearrangeandshortenarraywrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ReArrangeandShortenArrayWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">a</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Results the TPointArray a with one point per box with side length Dist left and puts the result in Res</p>
</div>
<div class="section" id="tpatoatpaexwrap">
<h4>TPAtoATPAExWrap<a class="headerlink" href="#tpatoatpaexwrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPAtoATPAExWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the TPA to boxes with sidelengths W and H and results them as a T2DPointArray in Res</p>
</div>
<div class="section" id="tpatoatpawrap">
<h4>TPAtoATPAWrap<a class="headerlink" href="#tpatoatpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPAtoATPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">Dist</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Splits the TPA to boxes with sidelength Dist and results them as a T2DPointArray in Res</p>
</div>
<div class="section" id="combineintarraywrap">
<h4>CombineIntArrayWrap<a class="headerlink" href="#combineintarraywrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">CombineIntArrayWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">Ar1</span><span class="o">,</span> <span class="n">Ar2</span><span class="o">:</span> <span class="n">TIntegerArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TIntegerArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Attaches the TIntegerArray Ar2 onto the end of Ar1 and returns it in the TIntegerArray Res</p>
</div>
<div class="section" id="returnpointsnotintpawrap">
<h4>ReturnPointsNotInTPAWrap<a class="headerlink" href="#returnpointsnotintpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ReturnPointsNotInTPAWrap</span><span class="p">(</span><span class="k">Const</span> <span class="n">TotalTPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Box</span><span class="o">:</span> <span class="n">TBox</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>All the points from the TPointArray TotalTPA that are not in the TBox Box are returned in the TPointArray Res</p>
</div>
<div class="section" id="mergeatpawrap">
<h4>MergeATPAWrap<a class="headerlink" href="#mergeatpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">MergeATPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Combines all the TPointArrays from the T2DPointArray ATPA into the TPointArray Res</p>
</div>
<div class="section" id="tpafromboxwrap">
<h4>TPAFromBoxWrap<a class="headerlink" href="#tpafromboxwrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">TPAFromBoxWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">Box</span> <span class="o">:</span> <span class="n">TBox</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Create a TPointArray from the top left and the bottom right of the TBox Box and returns the result in Res</p>
</div>
<div class="section" id="rotatepointswrap">
<h4>RotatePointsWrap<a class="headerlink" href="#rotatepointswrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">RotatePointsWrap</span><span class="p">(</span><span class="k">Const</span> <span class="n">P</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">A</span><span class="o">,</span> <span class="n">cx</span><span class="o">,</span> <span class="n">cy</span><span class="o">:</span> <span class="kt">Extended</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Rotates the TPointArray P around the center cx, cy with the angle a and returns the result in Res</p>
</div>
<div class="section" id="findtpaedgeswrap">
<h4>FindTPAEdgesWrap<a class="headerlink" href="#findtpaedgeswrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">FindTPAEdgesWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">p</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TPointArray of the edge points of the TPointArray p and returns the result in the TPointArray Res</p>
</div>
<div class="section" id="cleartpafromtpawrap">
<h4>ClearTPAFromTPAWrap<a class="headerlink" href="#cleartpafromtpawrap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">ClearTPAFromTPAWrap</span><span class="p">(</span><span class="k">const</span> <span class="n">arP</span><span class="o">,</span> <span class="n">ClearPoints</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>  <span class="k">var</span> <span class="n">Res</span> <span class="o">:</span>  <span class="n">TPointArray</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Removes the points in TPointArray ClearPoints from arP and returns the results in Res</p>
</div>
<div class="section" id="sametpa">
<h4>SameTPA<a class="headerlink" href="#sametpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">SameTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">aTPA</span><span class="o">,</span> <span class="n">bTPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the TPointArray aTPA is the same as bTPA</p>
</div>
<div class="section" id="tpainatpa">
<h4>TPAInATPA<a class="headerlink" href="#tpainatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">TPAInATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span><span class="k">const</span>  <span class="n">InATPA</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">var</span> <span class="kp">Index</span><span class="o">:</span> <span class="kt">LongInt</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns true if the TPointArray TPA is found in the T2DPointArray InATPA and stores the index in Index</p>
</div>
<div class="section" id="offsettpa">
<h4>OffsetTPA<a class="headerlink" href="#offsettpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">OffsetTPA</span><span class="p">(</span><span class="k">var</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Offset</span> <span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Offsets all the TPAs int the TPointArray TPA but the TPoint Offset</p>
</div>
<div class="section" id="offsetatpa">
<h4>OffsetATPA<a class="headerlink" href="#offsetatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">OffsetATPA</span><span class="p">(</span><span class="k">var</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span> <span class="k">const</span> <span class="n">Offset</span> <span class="o">:</span> <span class="n">TPoint</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Offsets all the TPAs int the T2DPointArray ATPA but the TPoint Offset</p>
</div>
<div class="section" id="copytpa">
<h4>CopyTPA<a class="headerlink" href="#copytpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CopyTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the TPointArray TPA</p>
</div>
<div class="section" id="copyatpa">
<h4>CopyATPA<a class="headerlink" href="#copyatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">CopyATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the T2DPointArray ATPA</p>
</div>
<div class="section" id="partitiontpa">
<h4>PartitionTPA<a class="headerlink" href="#partitiontpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">PartitionTPA</span><span class="p">(</span><span class="k">const</span> <span class="n">TPA</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span> <span class="n">BoxWidth</span><span class="o">,</span> <span class="n">BoxHeight</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Partitions the TPA in boxes of BoxWidth and BoxHeight.</p>
<p>The following example will partition a TPA in boxes of 10 width, 10 height and debug it.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">program</span> <span class="n">PartitionTPA_Test</span><span class="o">;</span>
 <span class="k">var</span>
   <span class="n">tpa</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
   <span class="n">atpa</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span>
   <span class="n">canvas</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">tpa</span> <span class="o">:=</span> <span class="n">TPAFromEllipse</span><span class="p">(</span><span class="mi">50</span><span class="o">,</span> <span class="mi">50</span><span class="o">,</span> <span class="mi">33</span><span class="o">,</span> <span class="mi">45</span><span class="p">)</span><span class="o">;</span>
  <span class="n">FillEllipse</span><span class="p">(</span><span class="n">tpa</span><span class="p">)</span><span class="o">;</span>
  <span class="n">atpa</span> <span class="o">:=</span> <span class="n">PartitionTPA</span><span class="p">(</span><span class="n">tpa</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">;</span>

  <span class="c1">// debugging the result</span>
  <span class="n">canvas</span> <span class="o">:=</span> <span class="n">CreateBitmap</span><span class="p">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
  <span class="n">DrawATPABitmap</span><span class="p">(</span><span class="n">canvas</span><span class="o">,</span> <span class="n">atpa</span><span class="p">)</span><span class="o">;</span>
  <span class="n">ClearDebugImg</span><span class="p">()</span><span class="o">;</span>
  <span class="n">DisplayDebugImgWindow</span><span class="p">(</span><span class="mi">100</span><span class="o">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">;</span>
  <span class="n">DrawBitmapDebugImg</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span><span class="o">;</span>
  <span class="n">FreeBitmap</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</div>
</div>
</div>
<span id="document-scriptref/sound"></span><div class="section" id="multimedia-functions">
<span id="scriptref-sound"></span><h3>Multimedia Functions<a class="headerlink" href="#multimedia-functions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="sound-functions">
<h4>Sound Functions<a class="headerlink" href="#sound-functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="playsound">
<h5>PlaySound<a class="headerlink" href="#playsound" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">PlaySound</span><span class="p">(</span><span class="n">Sound</span> <span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>PlaySound plays the sound file with the path <em>Sound</em>.</p>
<p>Supported formats: <em>.wav</em>. (Possibly others, if someone has time to figures
this out please let us know)</p>
<p>Example:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">PlaySound</span><span class="p">(</span><span class="s">&#39;C:\roar.wav&#39;</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="stopsound">
<h5>StopSound<a class="headerlink" href="#stopsound" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">StopSound</span><span class="o">;</span>
</pre></div>
</div>
<p>StopSound stops all currently playing sounds.</p>
</div>
</div>
</div>
</div>
</div>
<span id="document-referencemml"></span><div class="section" id="mml-reference">
<span id="mmlref"></span><h2>MML Reference<a class="headerlink" href="#mml-reference" title="Permalink to this headline">¶</a></h2>
<p>The Mufasa Macro Library is the core library of Simba. It is used not just to
provide scripts with the required functionality, but also used to pick colours
and select windows with Simba itself. The MML can run without any user
interface.</p>
<p>There currently is an effort to create a standalone library of the MML; called
<em>libMML</em>. This way any application can just load the library and use the MML
functionality.</p>
<p>The MML is split up in &#8220;Core&#8221; classes and &#8220;Addon&#8221; classes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section needs to explain more on the core/addon differences,
and provide some more general info about the mml.</p>
</div>
<div class="toctree-wrapper compound">
<span id="document-mmlref/client"></span><div class="section" id="client-class">
<h3>Client Class<a class="headerlink" href="#client-class" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">TClient</span></tt> class is the class that glues all other MML classes together
into one usable class. Internally, quite some MML classes require other MML
classes, and they access these other classes through their &#8220;parent&#8221;
<tt class="docutils literal"><span class="pre">TClient</span></tt>
class.</p>
<p>An image tells more than a thousands words:</p>
<blockquote>
<div><blockquote>
<div><img alt="_images/Client_Classes.png" src="_images/Client_Classes.png" />
<p>And the class dependency graph: (An arrow indicates a dependency)</p>
<img alt="_images/client_classes_dependencies.png" src="_images/client_classes_dependencies.png" />
<p>The client class does not do much else except creating the classes when it
is
created and destroying the classes when it is being destroyed.</p>
</div></blockquote>
<p>Properties:</p>
<blockquote>
<div><ul class="simple">
<li>IOManager</li>
<li>MFiles</li>
<li>MFinder</li>
<li>MBitmaps</li>
<li>MDTMs</li>
<li>MOCR</li>
<li>WriteLnProc</li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="section" id="tclient-writeln">
<h4>TClient.WriteLn<a class="headerlink" href="#tclient-writeln" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nc">TClient</span><span class="o">.</span><span class="nf">WriteLn</span><span class="p">(</span><span class="n">s</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="tclient-create">
<h4>TClient.Create<a class="headerlink" href="#tclient-create" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">constructor</span> <span class="nc">TClient</span><span class="o">.</span><span class="nf">Create</span><span class="p">(</span><span class="k">const</span> <span class="n">plugin_dir</span><span class="o">:</span> <span class="k">string</span> <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="o">;</span> <span class="k">const</span> <span class="n">UseIOManager</span> <span class="o">:</span> <span class="n">TIOManager</span> <span class="o">=</span> <span class="k">nil</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="tclient-destroy">
<h4>TClient.Destroy<a class="headerlink" href="#tclient-destroy" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">destructor</span> <span class="nc">TClient</span><span class="o">.</span><span class="nf">Destroy</span><span class="o">;</span>
</pre></div>
</div>
</div>
</div>
<span id="document-mmlref/iomanager"></span><div class="section" id="iomanager-class">
<h3>IOManager Class<a class="headerlink" href="#iomanager-class" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This page is still WIP.
It only covers the function of the IOManager class vaguely. In reality, the
IOManager unit contains quite some classes, each with a (slightly) different
function. There are not yet documented. (Perhaps BenLand100 can do this?)</p>
</div>
<p>The IOManager class manages the core functionality for retreiving Window data,
such as the actual pixel data and the position and dimension of a window.</p>
<p>The main purpose is to form a cross platform class to retrieve window
information, press and poll mouse buttons and to press and poll keyboard keys.</p>
<p>The IOManager is the only class that should use platform (or operating system)
specific calls; this is all abstracted by the IOManager class.</p>
<p>To achieve this, several abstract classes are defined by the IOManager class.
Every operating system (or window system) needs it&#8217;s own implementation of the
<tt class="docutils literal"><span class="pre">TWindow_Abstract</span></tt> class. We wrote one for both Linux and Windows.</p>
<div class="toctree-wrapper compound">
<span id="document-mmlref/os_linux"></span><div class="section" id="linux-specific-implementation-details">
<h4>Linux Specific Implementation Details<a class="headerlink" href="#linux-specific-implementation-details" title="Permalink to this headline">¶</a></h4>
<p>The Linux specific implementation of the IOManager is written around the Linux
X11 Windowing System. The X11 windowing system can run simultaneously to other
X11 Window Systems, and each is defined by a <tt class="docutils literal"><span class="pre">Display</span></tt>.</p>
<p>A <tt class="docutils literal"><span class="pre">Window</span></tt> on a <tt class="docutils literal"><span class="pre">Display</span></tt> is represented as an unsigned integer.</p>
<p>To retreive data that is on a window, we use the XGetImage function. This
function returns an XImage which contains the raw data. Simba then returns the
pointer to this data. The image has to be freed afterwards; and this is done in
the <tt class="docutils literal"><span class="pre">FreeReturnData</span></tt> procedure. Alternatively we could copy the image data to
another place and then free the XImage, but this would result in additional
overhead.</p>
<p>Most mouse related functionality is implemented with XQueryPointer, XWarpPointer
and XTestFakeButtonEvent. (Requires XTest Extension)</p>
<p>All the keyboard functions use XTest as well. It currently lacks the
functionality to test if a key on the keyboard is down.</p>
</div>
<span id="document-mmlref/os_windows"></span><div class="section" id="windows-specific-implementation-details">
<h4>Windows Specific Implementation Details<a class="headerlink" href="#windows-specific-implementation-details" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="offscreen-image-capturing">
<h4>Offscreen image capturing<a class="headerlink" href="#offscreen-image-capturing" title="Permalink to this headline">¶</a></h4>
<p>On Linux, offscreen image capturing is possible when compositing is turned on.
With compiz, this is turned on by default. Other windows managers like Metacity
and KWin can turn this on. When enabled, Simba can capture images from windows
that are below others. Minimized does not work. It is also possible to turn on
Compositing for specific X11 Windows with an api call, but this is currently not
implemented.</p>
<p>The status on Windows is unknown.</p>
</div>
<div class="section" id="silent-input">
<h4>Silent Input<a class="headerlink" href="#silent-input" title="Permalink to this headline">¶</a></h4>
<p>So what is Silent Input?
We define Silent Input as methods to manipulate the user&#8217;s mouse and keyboard,
without visually using them. So what does this mean?</p>
<p>This basically means that you will still be able to use your mouse while
the MML is performing mouse operations on your targetted window/client.</p>
<p>However, silent input is very hard to implement, and often hardly supported
by host operating systems. Often silent mouse or keyboard input is simply
ignored. So in general it is advised to stick to non silent input.</p>
</div>
</div>
<span id="document-mmlref/finder"></span><div class="section" id="tmfinder-class">
<h3>TMFinder Class<a class="headerlink" href="#tmfinder-class" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-mmlref/bitmap"></span><div class="section" id="tmufasabitmap-class">
<h3>TMufasaBitmap Class<a class="headerlink" href="#tmufasabitmap-class" title="Permalink to this headline">¶</a></h3>
</div>
<span id="document-mmlref/ocr"></span><div class="section" id="tmocr-class">
<span id="mmlref-ocr"></span><h3>TMOCR Class<a class="headerlink" href="#tmocr-class" title="Permalink to this headline">¶</a></h3>
<p>The TMOCR class uses the powerful <tt class="docutils literal"><span class="pre">ocrutil</span></tt> unit to create some default but
useful functions that can be used to create and identify text. It also contains
some functions used in special cases to filter noise. Specifically, these are
all the <tt class="docutils literal"><span class="pre">Filter*</span></tt> functions.</p>
<div class="section" id="inittocr">
<h4>InitTOCR<a class="headerlink" href="#inittocr" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">InitTOCR</span><span class="p">(</span><span class="k">const</span> <span class="n">path</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>InitTOCR loads all fonts in path
We don&#8217;t do this in the constructor because we may not yet have the path.</p>
</div>
<div class="section" id="filteruptextbycolour">
<h4>FilterUpTextByColour<a class="headerlink" href="#filteruptextbycolour" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">FilterUpTextByColour</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="filteruptextbycharacteristics">
<h4>FilterUpTextByCharacteristics<a class="headerlink" href="#filteruptextbycharacteristics" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">FilterUpTextByCharacteristics</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="o">;</span> <span class="n">w</span><span class="o">,</span><span class="n">h</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="filtershadowbitmap">
<h4>FilterShadowBitmap<a class="headerlink" href="#filtershadowbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">FilterShadowBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Remove anything but the shadows on the bitmap (Shadow = clPurple)</p>
</div>
<div class="section" id="filtercharsbitmap">
<h4>FilterCharsBitmap<a class="headerlink" href="#filtercharsbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">FilterCharsBitmap</span><span class="p">(</span><span class="n">bmp</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>Remove all but uptext colours clWhite,clGreen, etc.</p>
<p>This assumes that the bitmap only consists of colour 0, and the other
constants founds above the functions</p>
</div>
<div class="section" id="gettextpointsin">
<h4>getTextPointsIn<a class="headerlink" href="#gettextpointsin" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">getTextPointsIn</span><span class="p">(</span><span class="n">sx</span><span class="o">,</span> <span class="n">sy</span><span class="o">,</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="n">shadow</span><span class="o">:</span> <span class="kt">boolean</span><span class="o">;</span>
                           <span class="k">var</span> <span class="n">_chars</span><span class="o">,</span> <span class="n">_shadows</span><span class="o">:</span> <span class="n">T2DPointArray</span><span class="p">)</span><span class="o">:</span> <span class="kt">Boolean</span><span class="o">;</span>
</pre></div>
</div>
<p>This uses the two filters, and performs a split on the bitmap.
A split per character, that is. So we can more easily identify it.</p>
<dl class="docutils">
<dt>TODO:</dt>
<dd><ul class="first last simple">
<li>Remove more noise after we have split, it should be possible to identify
noise; weird positions or boxes compared to the rest, etc.</li>
<li>Split each colours seperately, and combine only later, after removing noise.</li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="getuptextatex">
<h4>GetUpTextAtEx<a class="headerlink" href="#getuptextatex" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">GetUpTextAtEx</span><span class="p">(</span><span class="n">atX</span><span class="o">,</span> <span class="n">atY</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">shadow</span><span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>GetUpTextAtEx will identify each character, and also keep track of the previous
chars&#8217; final <em>x</em> bounds. If the difference between the .x2 of the previous
character and the .x1 of the current character is bigger than 5, then there
was a space between them. (Add &#8216; &#8216; to result)</p>
</div>
<div class="section" id="getuptextat">
<h4>GetUpTextAt<a class="headerlink" href="#getuptextat" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">GetUpTextAt</span><span class="p">(</span><span class="n">atX</span><span class="o">,</span> <span class="n">atY</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">shadow</span><span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Retreives the (special) uptext.</p>
</div>
<div class="section" id="gettextatpa">
<h4>GetTextATPA<a class="headerlink" href="#gettextatpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">GetTextATPA</span><span class="p">(</span><span class="k">const</span> <span class="n">ATPA</span> <span class="o">:</span> <span class="n">T2DPointArray</span><span class="o">;</span><span class="k">const</span> <span class="n">maxvspacing</span> <span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns the text defined by the ATPA. Each TPA represents one character,
approximately.</p>
</div>
<div class="section" id="gettextat">
<h4>GetTextAt<a class="headerlink" href="#gettextat" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">GetTextAt</span><span class="p">(</span><span class="n">xs</span><span class="o">,</span> <span class="n">ys</span><span class="o">,</span> <span class="n">xe</span><span class="o">,</span><span class="n">ye</span><span class="o">,</span> <span class="n">minvspacing</span><span class="o">,</span> <span class="n">maxvspacing</span><span class="o">,</span> <span class="n">hspacing</span><span class="o">,</span>
                           <span class="n">color</span><span class="o">,</span> <span class="n">tol</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>General text-finding function.</p>
</div>
<div class="section" id="gettextat-2">
<h4>GetTextAt (2)<a class="headerlink" href="#gettextat-2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">GetTextAt</span><span class="p">(</span><span class="n">atX</span><span class="o">,</span> <span class="n">atY</span><span class="o">,</span> <span class="n">minvspacing</span><span class="o">,</span> <span class="n">maxvspacing</span><span class="o">,</span> <span class="n">hspacing</span><span class="o">,</span>
                           <span class="n">color</span><span class="o">,</span> <span class="n">tol</span><span class="o">,</span> <span class="n">len</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="n">font</span><span class="o">:</span> <span class="k">string</span><span class="p">)</span><span class="o">:</span> <span class="k">string</span><span class="o">;</span>
</pre></div>
</div>
<p>General text-finding function. Different parameters than other GetTextAt.</p>
</div>
<div class="section" id="texttofonttpa">
<h4>TextToFontTPA<a class="headerlink" href="#texttofonttpa" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">TextToFontTPA</span><span class="p">(</span><span class="n">Text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span> <span class="n">out</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="n">TPointArray</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a TPA of a specific <em>Text</em> of the specified <em>Font</em>.</p>
</div>
<div class="section" id="texttofontbitmap">
<h4>TextToFontBitmap<a class="headerlink" href="#texttofontbitmap" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nc">TMOCR</span><span class="o">.</span><span class="nf">TextToFontBitmap</span><span class="p">(</span><span class="n">Text</span><span class="o">,</span> <span class="n">font</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="n">TMufasaBitmap</span><span class="o">;</span>
</pre></div>
</div>
<p>Returns a Bitmap of the specified <em>Text</em> of the specified <em>Font</em>.</p>
</div>
</div>
<div class="section" id="uptext">
<span id="uptext-filter"></span><h3>Uptext<a class="headerlink" href="#uptext" title="Permalink to this headline">¶</a></h3>
<p>To read the UpText, the TMOCR class applies several filters on the client data
before performing the actual OCR. We will take a look at the two filters first.</p>
<div class="section" id="filter-1-the-colour-filter">
<h4>Filter 1: The Colour Filter<a class="headerlink" href="#filter-1-the-colour-filter" title="Permalink to this headline">¶</a></h4>
<p>We first filter the raw client image with a very rough and tolerant colour
comparison / check.
We first convert the colour to RGB, and if it falls into the following
defined ranges, it may be part of the uptext. We also get the possible
shadows.</p>
<p>We will iterate over each pixel in the bitmap, and if it matches any of the
<em>rules</em> for the colour; we will set it to a constant colour which
represents this colour (and corresponding rule). Usually the <em>base</em>
colour. If it doesn&#8217;t match any of the rules, it will be painted black.
We won&#8217;t just check for colours, but also for differences between specific
R, G, B values. For example, if the colour is white; R, G and B should all
lie very close to each other. (That&#8217;s what makes a colour white.)</p>
<p>The tolerance for getting the pixels is quite large. The reasons for the
high tolerance is because the uptext colour vary quite a lot. They&#8217;re also
transparent and vary thus per background.
We will store/match shadow as well; we need it later on in filter 2.</p>
<p>To my knowledge this algorithm doesn&#8217;t remove any <em>valid</em> points. It does
not remove <em>all</em> invalid points either; but that is simply not possible
based purely on the colour. (If someone has a good idea, let me know)</p>
<p>In code:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">for</span> <span class="n">y</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Height</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">do</span>
  <span class="k">for</span> <span class="n">x</span> <span class="o">:=</span> <span class="mi">0</span> <span class="k">to</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">do</span>
  <span class="k">begin</span>
    <span class="n">colortorgb</span><span class="p">(</span><span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span><span class="o">,</span><span class="n">r</span><span class="o">,</span><span class="n">g</span><span class="o">,</span><span class="n">b</span><span class="p">)</span><span class="o">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">r</span> <span class="o">&lt;</span> <span class="n">ocr_Limit_Low</span><span class="p">)</span> <span class="k">and</span> <span class="p">(</span><span class="n">g</span> <span class="o">&lt;</span> <span class="n">ocr_Limit_Low</span><span class="p">)</span> <span class="k">and</span>
        <span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">ocr_Limit_Low</span><span class="p">)</span> <span class="k">then</span>
    <span class="k">begin</span>
      <span class="n">bmp</span><span class="o">.</span><span class="n">FastSetPixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span> <span class="n">ocr_Purple</span><span class="p">)</span><span class="o">;</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="k">end</span><span class="o">;</span>

    <span class="c1">// Black if no match</span>
    <span class="n">bmp</span><span class="o">.</span><span class="n">fastsetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="mi">0</span><span class="p">)</span><span class="o">;</span>
  <span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="filter-2-the-characteristics-filter">
<h4>Filter 2: The Characteristics Filter<a class="headerlink" href="#filter-2-the-characteristics-filter" title="Permalink to this headline">¶</a></h4>
<p>This second filter is easy to understand but also very powerful:</p>
<blockquote>
<div><ul class="simple">
<li>It removes <em>all</em> false shadow pixels.</li>
<li>It removes uptext pixels that can&#8217;t be uptext according to specific
rules. These rules are specifically designed so that it will never
throw away proper points.</li>
</ul>
</div></blockquote>
<p>It also performs another filter right at the start, but we&#8217;ll disregard that
filter for now.</p>
<p>Removing shadow points is trivial if one understands the following insight.</p>
<p>If there some pixel is shadow on <em>x, y</em>, then it&#8217;s neighbour <em>x+1, y+1</em>
may not be a shadow pixel. A shadow is always only one pixel <em>thick</em>.</p>
<p>With this in mind, we can easily define an algorithm which removes all false
shadow pixels. In code:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="cm">{</span>
<span class="cm">    The tricky part of the algorithm is that it starts at the bottom,</span>
<span class="cm">    removing shadow point x,y if x-1,y-1 is also shadow. This is</span>
<span class="cm">    more efficient than the obvious way. (It is also easier to implement)</span>
<span class="cm">}</span>

<span class="k">for</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Height</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">downto</span> <span class="mi">1</span> <span class="k">do</span>
  <span class="k">for</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">1</span> <span class="k">downto</span> <span class="mi">1</span> <span class="k">do</span>
  <span class="k">begin</span>
    <span class="c1">// Is it shadow?</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;&gt;</span> <span class="n">clPurple</span> <span class="k">then</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="c1">// Is the point at x-1,y-1 shadow? If it is</span>
    <span class="c1">// then x, y cannot be shadow.</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">then</span>
    <span class="k">begin</span>
      <span class="n">bmp</span><span class="o">.</span><span class="n">fastsetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">clSilver</span><span class="p">)</span><span class="o">;</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="k">end</span><span class="o">;</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="n">y</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">then</span>
      <span class="n">bmp</span><span class="o">.</span><span class="n">fastsetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">clSilver</span><span class="p">)</span><span class="o">;</span>
  <span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>We are now left with only proper shadow pixels.
Now it is time to filter out false Uptext pixels.</p>
<p>Realize:</p>
<blockquote>
<div><ul class="simple">
<li>If <em>x, y</em> is uptext, then <em>x+1, y+1</em> must be either uptext or shadow.</li>
</ul>
</div></blockquote>
<p>In code:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">for</span> <span class="n">y</span> <span class="o">:=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Height</span> <span class="o">-</span> <span class="mi">2</span> <span class="k">downto</span> <span class="mi">0</span> <span class="k">do</span>
  <span class="k">for</span> <span class="n">x</span> <span class="o">:=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">Width</span> <span class="o">-</span> <span class="mi">2</span> <span class="k">downto</span> <span class="mi">0</span> <span class="k">do</span>
  <span class="k">begin</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">clPurple</span> <span class="k">then</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">clBlack</span> <span class="k">then</span>
      <span class="k">continue</span><span class="o">;</span>

    <span class="c1">// Is the other pixel also uptext?</span>
    <span class="c1">// NOTE THAT IT ALSO HAS TO BE THE SAME COLOUR</span>
    <span class="c1">// UPTEXT IN THIS CASE.</span>
    <span class="c1">// I&#39;m still not sure if this is a good idea or not.</span>
    <span class="c1">// Perhaps it should match *any* uptext colour.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="p">)</span> <span class="k">then</span>
      <span class="k">continue</span><span class="o">;</span>

    <span class="c1">// If it isn&#39;t shadow (and not the same colour uptext, see above)</span>
    <span class="c1">// then it is not uptext.</span>
    <span class="k">if</span> <span class="n">bmp</span><span class="o">.</span><span class="n">fastgetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="o">,</span><span class="n">y</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&gt;</span> <span class="n">clPurple</span> <span class="k">then</span>
    <span class="k">begin</span>
      <span class="n">bmp</span><span class="o">.</span><span class="n">fastsetpixel</span><span class="p">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">,</span><span class="n">clOlive</span><span class="p">)</span><span class="o">;</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="k">end</span><span class="o">;</span>

   <span class="c1">// If we make it to here, it means the pixel is part of the uptext.</span>
  <span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="identifying-characters">
<h4>Identifying characters<a class="headerlink" href="#identifying-characters" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This part of the documentation is a bit vague and incomplete.</p>
</div>
<p>To actually identify the text we split it up into single character and then
pass each character to the OCR engine.</p>
<p>In the function <em>getTextPointsIn</em> we will use both the filters mentioned above.
After these have been applied, we will make a bitmap that only contains the
shadows as well as a bitmap that only contains the uptext chars (not the
shadows)</p>
<p>Now it is a good idea to count the occurances of all colours
(on the character bitmap); we will also use this later on.
To split the characters we use the well known <em>splittpaex</em> function.</p>
<p>We will then sort the points for in each character TPA, as this makes
makes looping over them and comparing distances easier. We will also
calculate the bounding box of each characters TPA.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some more hackery is then used to seperate the characters and find
spaces; but isn&#8217;t yet documented here.</p>
</div>
<div class="section" id="normal-ocr">
<h5>Normal OCR<a class="headerlink" href="#normal-ocr" title="Permalink to this headline">¶</a></h5>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To do :-)
A large part is already explained above.
Most of the other OCR functions are simply used for plain identifying
and have no filtering tasks.</p>
</div>
</div>
</div>
</div>
<span id="document-mmlref/libmml"></span><div class="section" id="libmml">
<h3>libMML<a class="headerlink" href="#libmml" title="Permalink to this headline">¶</a></h3>
<p>libMML is an effort to bring the entire MML to a single standalone library.</p>
<p>MML usage will appear here soon.</p>
</div>
</div>
</div>
<span id="document-referencesimba"></span><div class="section" id="simba-reference">
<h2>Simba Reference<a class="headerlink" href="#simba-reference" title="Permalink to this headline">¶</a></h2>
<p>All Simba documentation should be in here.</p>
<div class="toctree-wrapper compound">
<span id="document-simbaref/scriptmanager"></span><div class="section" id="script-manager">
<h3>Script Manager<a class="headerlink" href="#script-manager" title="Permalink to this headline">¶</a></h3>
<p>Simba script manager. =}</p>
</div>
<span id="document-simbaref/extensions"></span><div class="section" id="writing-simba-extensions">
<span id="id1"></span><h3>Writing Simba Extensions<a class="headerlink" href="#writing-simba-extensions" title="Permalink to this headline">¶</a></h3>
<p>Simba extensions are scripts written for the interpreter that can be embedded into
Simba. Purposes vary from updaters to editors.</p>
<div class="section" id="how-they-work">
<h4>How they work<a class="headerlink" href="#how-they-work" title="Permalink to this headline">¶</a></h4>
<p>Extensions are event based. This means you don&#8217;t have some <tt class="docutils literal"><span class="pre">loop</span></tt> in your
program that never ends and does all the logic for you. When a system is event
based, you implement some functions and those are called on a certain event.</p>
</div>
<div class="section" id="extension-core-hooks">
<h4>Extension core hooks<a class="headerlink" href="#extension-core-hooks" title="Permalink to this headline">¶</a></h4>
<p>Simba offers several core hooks: init, free, attach and detach. These are used
to initialize, show, hide and free your extension. GetName and GetVersion are
called to retreive the name and version of an extension.</p>
<div class="section" id="init">
<h5>init<a class="headerlink" href="#init" title="Permalink to this headline">¶</a></h5>
<p>Called when the Extension is initialized.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">init</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
    <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Initialize your extension here.&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>If you want to add a button to the menu, do it now.
From the SRL updater extension:</p>
<div class="highlight-pascal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">Init</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="n">MainMenuItem</span> <span class="o">:=</span> <span class="n">TMenuItem</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">Simba_MainMenu</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Caption</span> <span class="o">:=</span> <span class="s">&#39;SRL&#39;</span><span class="o">;</span>
  <span class="n">Simba_MainMenu</span><span class="o">.</span><span class="n">Items</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">MainMenuItem</span><span class="p">)</span><span class="o">;</span>

  <span class="n">MenuCheck</span> <span class="o">:=</span> <span class="n">TMenuItem</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">MainMenuItem</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MenuCheck</span><span class="o">.</span><span class="n">Caption</span> <span class="o">:=</span> <span class="s">&#39;Check for new SRL&#39;</span><span class="o">;</span>
  <span class="n">MenuCheck</span><span class="o">.</span><span class="n">OnClick</span> <span class="o">:=</span> <span class="o">@</span><span class="n">OnSRLCheckClick</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">MenuCheck</span><span class="p">)</span><span class="o">;</span>

  <span class="n">MenuUpdate</span> <span class="o">:=</span> <span class="n">TMenuItem</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">MainMenuItem</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MenuUpdate</span><span class="o">.</span><span class="n">Caption</span> <span class="o">:=</span> <span class="s">&#39;Update SRL&#39;</span><span class="o">;</span>
  <span class="n">MenuUpdate</span><span class="o">.</span><span class="n">OnClick</span> <span class="o">:=</span> <span class="o">@</span><span class="n">OnSRLUpdateClick</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">MenuUpdate</span><span class="p">)</span><span class="o">;</span>

  <span class="n">AutoUpdate</span> <span class="o">:=</span> <span class="n">TMenuItem</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">MainMenuItem</span><span class="p">)</span><span class="o">;</span>
  <span class="n">AutoUpdate</span><span class="o">.</span><span class="n">Caption</span> <span class="o">:=</span> <span class="s">&#39;Automatically update&#39;</span><span class="o">;</span>
  <span class="n">AutoUpdate</span><span class="o">.</span><span class="n">OnClick</span> <span class="o">:=</span> <span class="o">@</span><span class="n">SetAutoUpdate</span><span class="o">;</span>
  <span class="n">AutoUpdate</span><span class="o">.</span><span class="n">Checked</span> <span class="o">:=</span> <span class="nb">LowerCase</span><span class="p">(</span><span class="n">Settings</span><span class="o">.</span><span class="n">GetKeyValueDef</span><span class="p">(</span><span class="s">&#39;AutoUpdate&#39;</span><span class="o">,</span>
                                <span class="s">&#39;True&#39;</span><span class="p">))</span> <span class="o">=</span> <span class="s">&#39;true&#39;</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">AutoUpdate</span><span class="p">)</span><span class="o">;</span>

  <span class="n">Timer</span> <span class="o">:=</span> <span class="n">TTimer</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span><span class="n">Simba</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Timer</span><span class="o">.</span><span class="n">Interval</span> <span class="o">:=</span> <span class="mi">5000</span><span class="o">;</span>
  <span class="n">Timer</span><span class="o">.</span><span class="n">OnTimer</span> <span class="o">:=</span> <span class="o">@</span><span class="n">OnUpdateTimer</span><span class="o">;</span>
  <span class="n">Timer</span><span class="o">.</span><span class="n">Enabled</span> <span class="o">:=</span><span class="n">AutoUpdate</span><span class="o">.</span><span class="n">Checked</span><span class="o">;</span>

  <span class="n">started</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="free">
<h5>free<a class="headerlink" href="#free" title="Permalink to this headline">¶</a></h5>
<p>Called upon freeing the extension. Usually this means that Simba is closed.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">free</span><span class="o">;</span>
<span class="k">begin</span>
    <span class="k">if</span> <span class="n">started</span> <span class="k">then</span>
        <span class="nb">writeln</span><span class="p">(</span><span class="s">&#39;Free() was called&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
<p>From the SRL updater extension:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">Free</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">started</span><span class="p">)</span> <span class="k">then</span>
    <span class="n">Timer</span><span class="o">.</span><span class="n">Enabled</span> <span class="o">:=</span> <span class="k">False</span><span class="o">;</span>
    <span class="cm">{ Freeing the components is not needed, as they will be freed</span>
<span class="cm">       upon the closure of Simba. }</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="attach">
<h5>attach<a class="headerlink" href="#attach" title="Permalink to this headline">¶</a></h5>
<p>Called when your extension has been enabled.</p>
<p>From the SRL updater extension:</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">Attach</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;From now on, you shall be alerted as to when your SRL is&#39;</span><span class="o">+</span>
            <span class="o">+</span><span class="s">&#39;out of date!&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Visible</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
  <span class="n">Timer</span><span class="o">.</span><span class="n">Enabled</span> <span class="o">:=</span> <span class="n">AutoUpdate</span><span class="o">.</span><span class="n">Checked</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="detach">
<h5>detach<a class="headerlink" href="#detach" title="Permalink to this headline">¶</a></h5>
<p>Called when your extension has been disabled. (This is not the same as freeing)</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">Procedure</span> <span class="nf">Detach</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="n">Timer</span><span class="o">.</span><span class="n">Enabled</span> <span class="o">:=</span> <span class="k">False</span><span class="o">;</span>
  <span class="n">MainMenuItem</span><span class="o">.</span><span class="n">Visible</span> <span class="o">:=</span> <span class="k">False</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="getname">
<h5>GetName<a class="headerlink" href="#getname" title="Permalink to this headline">¶</a></h5>
<p>Called when Simba requests the name of your extension.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetName</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="bp">result</span> <span class="o">:=</span> <span class="s">&#39;SRL Updater&#39;</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="getversion">
<h5>GetVersion<a class="headerlink" href="#getversion" title="Permalink to this headline">¶</a></h5>
<p>Called when Simba requests the version of the extension.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetVersion</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="bp">result</span> <span class="o">:=</span> <span class="s">&#39;1.0&#39;</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
</pre></div>
</div>
</div>
<div class="section" id="more-extension-hooks">
<h5>More extension hooks<a class="headerlink" href="#more-extension-hooks" title="Permalink to this headline">¶</a></h5>
<p>The following hooks are called upon if the event that the name describes has
happened.</p>
<div class="highlight-pascal"><div class="highlight"><pre><span class="n">EventHooks</span><span class="o">:</span> <span class="k">Array</span> <span class="p">[</span><span class="mi">0</span><span class="o">..</span><span class="mi">9</span><span class="p">]</span> <span class="k">of</span> <span class="n">TEventHook</span> <span class="o">=</span>
<span class="p">(</span>      <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onColourPick&#39;</span>    <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">3</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onOpenFile&#39;</span>      <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onWriteFile&#39;</span>     <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">,</span>
       <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onOpenConnection&#39;</span><span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">,</span>
       <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptStart&#39;</span>   <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">,</span>
       <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptCompile&#39;</span> <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptExecute&#39;</span> <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptPause&#39;</span>   <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptStop&#39;</span>    <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span><span class="o">,</span>
   <span class="p">(</span><span class="n">HookName</span> <span class="o">:</span> <span class="s">&#39;onScriptOpen&#39;</span>    <span class="o">;</span> <span class="n">ArgumentCount</span> <span class="o">:</span> <span class="mi">1</span><span class="p">))</span><span class="o">;</span>
</pre></div>
</div>
<p>For the exact arguments to all these functions, refer to
<a class="reference internal" href="index.html#extension-example-code"><em>Example code</em></a>.</p>
</div>
<div class="section" id="onopenconnection">
<h5>onOpenConnection<a class="headerlink" href="#onopenconnection" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="onwritefile">
<h5>onWriteFile<a class="headerlink" href="#onwritefile" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="onopenfile">
<h5>onOpenFile<a class="headerlink" href="#onopenfile" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="oncolourpick">
<h5>onColourPick<a class="headerlink" href="#oncolourpick" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="onscriptstart">
<h5>onScriptStart<a class="headerlink" href="#onscriptstart" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="onscriptopen">
<h5>onScriptOpen<a class="headerlink" href="#onscriptopen" title="Permalink to this headline">¶</a></h5>
<p>This is a <em>function</em>, and should return the script, plus any modifications.</p>
</div>
</div>
<div class="section" id="special-cases">
<h4>Special Cases<a class="headerlink" href="#special-cases" title="Permalink to this headline">¶</a></h4>
<div class="section" id="multiple-extensions-hooking-the-same-event">
<h5>Multiple extensions hooking the same event<a class="headerlink" href="#multiple-extensions-hooking-the-same-event" title="Permalink to this headline">¶</a></h5>
<p>So what happens when multiple extensions hook onto the same event/hook?</p>
<p>The behaviour is currently defined, but prone to change in the near future.
Currently all extensions are called in the order they were loaded.</p>
<p>The behaviour will probably change to something like the following:</p>
<blockquote>
<div>In the order they were loaded, call any available extensions. The first
extension to return non-zero terminates the calling loop.</div></blockquote>
</div>
</div>
<div class="section" id="pitfalls">
<h4>Pitfalls<a class="headerlink" href="#pitfalls" title="Permalink to this headline">¶</a></h4>
<p>Extensions can be very dangerous in the sense that they run on the main thread
of Simba; it is very easy to crash Simba or cause it to hang. There is
no way to prevent this, so make sure to check what you&#8217;re doing before you try
your own (or someone else&#8217;s) extension.</p>
</div>
<div class="section" id="example-code">
<span id="extension-example-code"></span><h4>Example code<a class="headerlink" href="#example-code" title="Permalink to this headline">¶</a></h4>
<p>Example code for most hooks:</p>
<div class="highlight-pascal"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">program</span> <span class="k">new</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">init</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;init your extension here&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
<span class="k">procedure</span> <span class="nf">onOpenConnection</span><span class="p">(</span><span class="k">var</span> <span class="n">url</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">Cont</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Opening url: &#39;</span>  <span class="o">+</span> <span class="n">url</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;We shall allow this.. For now!! Gna Gna!&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Cont</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
<span class="k">procedure</span> <span class="nf">onWriteFile</span><span class="p">(</span><span class="k">var</span> <span class="n">FileName</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">Cont</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;So.. You want to write to file: &#39;</span> <span class="o">+</span> <span class="n">FileName</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Well for this time only!&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Cont</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">onOpenFile</span><span class="p">(</span><span class="k">var</span> <span class="n">FileName</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">Cont</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;So you want to open this file: &#39;</span> <span class="o">+</span> <span class="n">filename</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Well I don</span><span class="se">&#39;&#39;</span><span class="s">t care much, lets see what the other hooks think!&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="c1">//Not set Cont as we don&#39;t care, while other hooks might</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">onColourPick</span><span class="p">(</span><span class="k">const</span> <span class="n">Colour</span><span class="o">,</span><span class="n">x</span><span class="o">,</span><span class="n">y</span> <span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;So you</span><span class="se">&#39;&#39;</span><span class="s">ve picked a color, huh!?&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="nb">inttostr</span><span class="p">(</span><span class="n">colour</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39; attuh (&#39;</span> <span class="o">+</span> <span class="nb">inttostr</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span><span class="s">&#39;,&#39;</span> <span class="o">+</span> <span class="nb">inttostr</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;)&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
 
<span class="k">function</span> <span class="nf">onScriptStart</span><span class="p">(</span><span class="k">var</span> <span class="n">Script</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span> <span class="k">var</span> <span class="n">Cont</span> <span class="o">:</span> <span class="kt">boolean</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;So you want to compile the following script!!&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="n">script</span><span class="p">)</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;lets allow that for now ;)&#39;</span><span class="p">)</span><span class="o">;</span>
  <span class="n">Cont</span> <span class="o">:=</span> <span class="k">True</span><span class="o">;</span>
  <span class="bp">Result</span> <span class="o">:=</span> <span class="n">Script</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">function</span> <span class="nf">onScriptOpen</span><span class="p">(</span><span class="k">var</span> <span class="n">Script</span><span class="o">:</span> <span class="k">String</span><span class="p">)</span><span class="o">:</span> <span class="k">String</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="bp">Result</span> <span class="o">:=</span> <span class="n">Script</span> <span class="o">+</span> <span class="s">&#39;THIS IS AFTER THE .END, HOPEFULLY&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">free</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Free your extension here&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">procedure</span> <span class="nf">Attach</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Your extension has been enabled, do stuff here&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="k">Procedure</span> <span class="nf">Detach</span><span class="o">;</span>
<span class="k">begin</span>
  <span class="nb">Writeln</span><span class="p">(</span><span class="s">&#39;Your extension has ben disabled, do stuff here&#39;</span><span class="p">)</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="c1">//Called to retrieve the name of your extension</span>
<span class="k">function</span> <span class="nf">GetName</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="bp">result</span> <span class="o">:=</span> <span class="s">&#39;Leet Extension&#39;</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>

<span class="c1">//Called to retrieve the version of your extension</span>
<span class="k">function</span> <span class="nf">GetVersion</span> <span class="o">:</span> <span class="k">string</span><span class="o">;</span>
<span class="k">begin</span><span class="o">;</span>
  <span class="bp">result</span> <span class="o">:=</span> <span class="s">&#39;0.001&#39;</span><span class="o">;</span>
<span class="k">end</span><span class="o">;</span>
<span class="k">begin</span>
<span class="k">end</span><span class="o">.</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you need more examples, you can always look at the Extensions in the
Simba git repository.</p>
</div>
</div>
</div>
<span id="document-simbaref/plugins"></span><div class="section" id="writing-simba-plugins">
<span id="id1"></span><h3>Writing Simba Plugins<a class="headerlink" href="#writing-simba-plugins" title="Permalink to this headline">¶</a></h3>
<div class="section" id="plugin-overview">
<h4>Plugin overview<a class="headerlink" href="#plugin-overview" title="Permalink to this headline">¶</a></h4>
<p>Plugins for Simba can be written in virtually every language. (Make sure to read
<a class="reference internal" href="#caveats">Caveats</a> though)</p>
</div>
<div class="section" id="simba-plugin-abi">
<h4>Simba Plugin ABI<a class="headerlink" href="#simba-plugin-abi" title="Permalink to this headline">¶</a></h4>
<p>First of all, it is important to know in what way you should represent your
functions to Simba. Using the newest ABI is recommended. Currently, all three
ABIs are supported; but older ones may be deprecated in subsequent releases.</p>
<p>Plugins with ABI &lt; 2 are not exported to Lape.</p>
<div class="section" id="simba-abi-version-0">
<h5>Simba ABI Version 0<a class="headerlink" href="#simba-abi-version-0" title="Permalink to this headline">¶</a></h5>
<p>This is the first Simba plugin ABI. Any plugin that does not export
<a class="reference internal" href="#getpluginabiversion">GetPluginABIVersion</a> is treated as this ABI.</p>
<p>In this ABI <a class="reference internal" href="#gettypeinfo">GetTypeInfo</a> passes the arguments as a native pascal <strong>String</strong>
rather than a <strong>PChar</strong>. This is error prone; and versions &gt; 0 use <strong>PChar</strong>.</p>
<p>The calling convention for all functions is expected to be <strong>stdcall</strong>.</p>
</div>
<div class="section" id="simba-abi-version-1">
<h5>Simba ABI Version 1<a class="headerlink" href="#simba-abi-version-1" title="Permalink to this headline">¶</a></h5>
<p>In this ABI <a class="reference internal" href="#gettypeinfo">GetTypeInfo</a> passes the arguments as a  <strong>PChar</strong>.</p>
<p>The calling convention for all functions (except <a class="reference internal" href="#getpluginabiversion">GetPluginABIVersion</a>)
is expected to be <strong>stdcall</strong>.</p>
</div>
<div class="section" id="simba-abi-version-2">
<h5>Simba ABI Version 2<a class="headerlink" href="#simba-abi-version-2" title="Permalink to this headline">¶</a></h5>
<p>The calling convention for all functions is expected to be <strong>cdecl</strong> on
32 bit platforms; on platforms where <strong>cdecl</strong> does not exist, the native
calling convention is expected.</p>
</div>
</div>
<div class="section" id="functions">
<h4>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h4>
<div class="section" id="getpluginabiversion">
<h5>GetPluginABIVersion<a class="headerlink" href="#getpluginabiversion" title="Permalink to this headline">¶</a></h5>
<p>This function should return the ABI version of the plugin. The calling
convention for this function is <strong>always</strong> <strong>cdecl</strong> on 32 bit and the native
calling convention if <strong>cdecl</strong> does not exist.</p>
</div>
<div class="section" id="setpluginmemmanager">
<h5>SetPluginMemManager<a class="headerlink" href="#setpluginmemmanager" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">SetPluginMemManager</span><span class="p">(</span><span class="n">MemMgr</span> <span class="o">:</span> <span class="n">TMemoryManager</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>This function should be implemented when one is writing a plugin
in Free Pascal.
Using the Simba memory manager it is possible to easily pass arrays and other
managed structures from the script to the plugin. It is however wise to also
store the old memory manager of your plugin and restore it when <em>OnDetach</em> is
called.</p>
<p>For other languages, this function doesn&#8217;t really help - however you should
realise that it is not possible to pass pascal strings and arrays directly to
the script in a safe manner. Doing so will require some hacks (it is possible),
but might also lead to memory leaks if implemented wrong or used wrong in
scripts.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Simba does not guarantee that this function will be called only once; make
sure you don&#8217;t overwrite your old memory manager when this function is
called twice.</p>
</div>
</div>
<div class="section" id="onattach">
<h5>OnAttach<a class="headerlink" href="#onattach" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">OnAttach</span><span class="p">(</span><span class="n">info</span><span class="o">:</span> <span class="kt">Pointer</span><span class="p">)</span><span class="o">;</span>
</pre></div>
</div>
<p>This method is called when the plugin is loaded.
Currently <em>info</em> will always be zero, but it might be used to pass information
in the future.</p>
</div>
<div class="section" id="ondetach">
<h5>OnDetach<a class="headerlink" href="#ondetach" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">procedure</span> <span class="nf">OnDetach</span><span class="p">()</span><span class="o">;</span>
</pre></div>
</div>
<p>This method is called just before the plugin is beeing freed.
<em>If you changed your memory manager to Simba&#8217;s; you should now revert to your old
one.</em></p>
</div>
<div class="section" id="getfunctioncount">
<h5>GetFunctionCount<a class="headerlink" href="#getfunctioncount" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetFunctionCount</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>The first function, <em>GetFunctionCount</em> returns how many functions are to be
imported.</p>
</div>
<div class="section" id="getfunctioninfo">
<h5>GetFunctionInfo<a class="headerlink" href="#getfunctioninfo" title="Permalink to this headline">¶</a></h5>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetFunctionInfo</span><span class="p">(</span><span class="n">x</span><span class="o">:</span> <span class="kt">Integer</span><span class="o">;</span> <span class="k">var</span> <span class="n">ProcAddr</span><span class="o">:</span> <span class="kt">Pointer</span><span class="o">;</span> <span class="k">var</span> <span class="n">ProcDef</span><span class="o">:</span> <span class="kt">PChar</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span>
</pre></div>
</div>
<p>Simba will then call <em>GetFunctionInfo</em> and <em>GetFunctionCallingConv</em> <strong>N</strong>
amount of times (where <strong>N</strong> is the result of <em>GetFunctionCount</em>) with
<em>x</em> increased by one every time. Obviously, each function must be mapped
to a specific value of <em>x</em>.</p>
<p>For <em>GetFunctionInfo</em>, the value of <em>ProcAddr</em> should be set to the address of
the procedure to be called; and <em>ProcDef</em> should contain the definition (in
Pascal types) of the function.</p>
</div>
<div class="section" id="getfunctioncallingconv">
<h5>GetFunctionCallingConv<a class="headerlink" href="#getfunctioncallingconv" title="Permalink to this headline">¶</a></h5>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This function is deprecated as of ABI &gt;= 2</p>
</div>
<div class="highlight-pascal"><div class="highlight"><pre><span class="k">function</span> <span class="nf">GetFunctionCallingConv</span><span class="p">(</span><span class="n">x</span><span class="o">:</span> <span class="kt">integer</span><span class="p">)</span><span class="o">:</span> <span class="kt">integer</span><span class="o">;</span> <span class="kp">stdcall</span><span class="o">;</span>
</pre></div>
</div>
<p><em>GetFunctionCallingConv</em> returns the calling convention for the specific
function. Currently, the only two support conventions are <em>stdcall</em> (0) and
<em>register</em> (1).</p>
</div>
<div class="section" id="gettypecount">
<h5>GetTypeCount<a class="headerlink" href="#gettypecount" title="Permalink to this headline">¶</a></h5>
</div>
<div class="section" id="gettypeinfo">
<h5>GetTypeInfo<a class="headerlink" href="#gettypeinfo" title="Permalink to this headline">¶</a></h5>
</div>
</div>
<div class="section" id="exporting-functions-to-scripts">
<h4>Exporting functions to scripts<a class="headerlink" href="#exporting-functions-to-scripts" title="Permalink to this headline">¶</a></h4>
<p>To let Simba know what functions you want to export to a script, your plugin
needs to implement the following functions: <a class="reference internal" href="#getfunctioncount">GetFunctionCount</a> and
<a class="reference internal" href="#getfunctioninfo">GetFunctionInfo</a>. Refer to their sections</p>
</div>
<div class="section" id="exporting-types-to-scripts">
<h4>Exporting types to scripts<a class="headerlink" href="#exporting-types-to-scripts" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">TODO</p>
</div>
</div>
<div class="section" id="ttarget-exported">
<h4>TTarget_Exported<a class="headerlink" href="#ttarget-exported" title="Permalink to this headline">¶</a></h4>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">TODO</p>
</div>
</div>
<div class="section" id="caveats">
<h4>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h4>
<p>If you&#8217;re writing a plugin in a language other than Free Pascal, you&#8217;ll not be
able to share arrays and strings with Simba in an easy manner. (It is possible
to &#8220;craft&#8221; pascal-type strings and arrays)</p>
<div class="section" id="pascal-arrays">
<h5>Pascal Arrays<a class="headerlink" href="#pascal-arrays" title="Permalink to this headline">¶</a></h5>
<p>Say we have an array of <em>foo</em> called <em>bar</em>. <em>bar[0]</em> holds the first element of
the array. <em>bar</em> - Sizeof(Pointer) contains the length of the array, and <em>bar</em> -
Sizeof(Pointer) * 2 contains the reference count of the array. If you want to
share an array with Simba, make sure the reference is count is high enough so
that Simba/Free Pascal won&#8217;t try to free it for you.</p>
</div>
<div class="section" id="pascal-strings">
<h5>Pascal Strings<a class="headerlink" href="#pascal-strings" title="Permalink to this headline">¶</a></h5>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">I believe pascal strings are very similar to pascal arrays, but I am not
completely sure.</p>
</div>
</div>
<div class="section" id="sharing-arrays-and-strings-with-a-fpc-plugin">
<h5>Sharing Arrays and Strings with a FPC Plugin<a class="headerlink" href="#sharing-arrays-and-strings-with-a-fpc-plugin" title="Permalink to this headline">¶</a></h5>
<p>To share arrays and strings in a nice way with a FPC plugin, you need to create
a function called SetPluginMemManager as shown above and make sure it is
exported properly. Simba will try to call this function when loading the plugin
and will pass the plugin its own memory manager. Use FPC&#8217;s <em>SetMemoryManager</em> to
change your own memory manager to Simba&#8217;s memory manager. When <em>OnDetach</em> is
called, make sure you reset your memory manager. See <a class="reference internal" href="#setpluginmemmanager">SetPluginMemManager</a>.</p>
</div>
</div>
<div class="section" id="sample-fpc-plugin">
<h4>Sample FPC Plugin<a class="headerlink" href="#sample-fpc-plugin" title="Permalink to this headline">¶</a></h4>
<div class="highlight-pascal"><pre>{ Example based upon the SPS Plugin }
library project1;

{$mode objfpc}{$H+}

{$macro on}
{$define callconv:=
    {$IFDEF WINDOWS}{$IFDEF CPU32}cdecl;{$ELSE}{$ENDIF}{$ENDIF}
    {$IFDEF LINUX}{$IFDEF CPU32}cdecl;{$ELSE}{$ENDIF}{$ENDIF}
}

uses
  classes, sysutils, math
  { you can add units after this };

var
  OldMemoryManager: TMemoryManager;
  memisset: Boolean = False;


  type T3DIntegerArray = array of array of array of integer;

function HelloPlugin(s: String): String; callconv
begin
  result := s;
end;

function GetPluginABIVersion: Integer; callconv export;
begin
  Result := 2;
end;

procedure SetPluginMemManager(MemMgr : TMemoryManager); callconv export;
begin
  if memisset then
    exit;
  GetMemoryManager(OldMemoryManager);
  SetMemoryManager(MemMgr);
  memisset := true;
end;

procedure OnDetach; callconv export;
begin
  SetMemoryManager(OldMemoryManager);
end;

function GetTypeCount(): Integer; callconv export;
begin
  Result := 1;
end;

function GetTypeInfo(x: Integer; var sType, sTypeDef: PChar): integer; callconv export;
begin
  case x of
    0: begin
        StrPCopy(sType, 'T3DIntegerArray');
        StrPCopy(sTypeDef, 'array of array of array of integer;');
       end;

    else
      x := -1;
  end;

  Result := x;
end;

function GetFunctionCount(): Integer; callconv export;
begin
  Result := 1;
end;

function GetFunctionInfo(x: Integer; var ProcAddr: Pointer; var ProcDef: PChar): Integer; callconv export;
begin
  case x of
    0:
      begin
        ProcAddr := @HelloPlugin;
        StrPCopy(ProcDef, 'function HelloPlugin(s: String): String;');
      end;

    else
      x := -1;
  end;

  Result := x;
end;

exports GetPluginABIVersion;
exports SetPluginMemManager;
exports GetTypeCount;
exports GetTypeInfo;
exports GetFunctionCount;
exports GetFunctionInfo;
exports OnDetach;

begin
end.</pre>
</div>
</div>
</div>
</div>
</div>
<span id="document-docdoc"></span><div class="section" id="documentation-documentation">
<span id="docdoc"></span><h2>Documentation Documentation<a class="headerlink" href="#documentation-documentation" title="Permalink to this headline">¶</a></h2>
<p>This page is the documentation for the documentation.</p>
<p>It is very important to know this by heart when you are writing documentation
for Simba.</p>
<div class="section" id="documentation-system">
<h3>Documentation system<a class="headerlink" href="#documentation-system" title="Permalink to this headline">¶</a></h3>
<p>The documentation system we use is sphinx. The link to sphinx can
be found at the bottom of the page.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is important to note that there is also a database SQL fulltext engine
called Sphinx, but this is not the project we use. We use the Sphinx
&#8220;documentation system&#8221; ( <a class="reference external" href="http://sphinx.pocoo.org/">http://sphinx.pocoo.org/</a> )</p>
</div>
</div>
<div class="section" id="building-the-documentation">
<h3>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h3>
<p>In the future, the online documentation will be refreshed every hour. However,
if you want to build the documentation yourself, you should install
<tt class="docutils literal"><span class="pre">python-sphinx</span></tt>.</p>
<p>Move to the <tt class="docutils literal"><span class="pre">Simba/doc/sphinx</span></tt> directory and run <tt class="docutils literal"><span class="pre">make</span> <span class="pre">all</span></tt>.
This will place an HTML version of the documentation in <tt class="docutils literal"><span class="pre">_build/html</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The build instructions are for Linux only. If you want to build the doc on
Windows, you are on your own. The sphinx resource site is probably a good
place to start.</p>
</div>
</div>
<div class="section" id="writing-documentation">
<h3>Writing documentation<a class="headerlink" href="#writing-documentation" title="Permalink to this headline">¶</a></h3>
<p>Sphinx uses the reStructuredText markup language. It is not a hard language, but
looking through the quickstart is a good idea:
<a class="reference external" href="http://docutils.sourceforge.net/docs/user/rst/quickstart.html">http://docutils.sourceforge.net/docs/user/rst/quickstart.html</a></p>
<p>As stated above, the markup language is not the hard part about writing
documentation; the hard part is simply coming up with good content suited for
the documentation. Be sure to check <a class="reference internal" href="index.html#todo"><em>Documentation TODO</em></a></p>
<div class="section" id="directory-structure">
<h4>Directory structure<a class="headerlink" href="#directory-structure" title="Permalink to this headline">¶</a></h4>
<p>So you have written a new piece of documentation? Great!</p>
<p>Now we just need to know where to place it. If you have simply extended a file,
then there should be no worries as to where to place your new text. However if
you are writing a new chapter, then placing the file in the correct directory is
something we&#8217;d like you to consider.</p>
<p>If you write a chapter for the <tt class="docutils literal"><span class="pre">Simba</span> <span class="pre">Reference</span></tt> or <tt class="docutils literal"><span class="pre">Scripting</span> <span class="pre">Reference</span></tt>
or <tt class="docutils literal"><span class="pre">Features</span></tt>
part of the documentation, place it in the <tt class="docutils literal"><span class="pre">simbaref</span></tt>, <tt class="docutils literal"><span class="pre">scriptref</span></tt> or
<tt class="docutils literal"><span class="pre">features</span></tt> folder repectively.
Any other files can be put directly in the root of the sphinx folder.
(The same place as <tt class="docutils literal"><span class="pre">index.rst</span></tt>)</p>
</div>
<div class="section" id="capitalisation">
<h4>Capitalisation<a class="headerlink" href="#capitalisation" title="Permalink to this headline">¶</a></h4>
<p>The titles of all major sections have all words capitalized. (The ones with
===)
The minor sections and subsections (&#8212;) and (~~~) have only the first word and
Simba specific words (like Simba itself) capitalized.</p>
<p>Try to stick to the Python documentation standards.
( <a class="reference external" href="http://docs.python.org/using/index.html">http://docs.python.org/using/index.html</a> )</p>
</div>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>Sphinx has references, most of the .rst files contain labels and references.</p>
<p>A label looks something like this:</p>
<div class="highlight-python"><pre>.. _&lt;X&gt;-&lt;Y&gt;:</pre>
</div>
<p>Where X is either the name of file or folder; and Y is the name of the
file/function if X is a folder. For referring to specific functions for example,
use:</p>
<div class="highlight-python"><pre>.. _scriptref-movemouse:</pre>
</div>
<p>To define a label for the MoveMouse function. Labels are always placed right
above section/chapter declarations.</p>
</div>
</div>
<span id="document-todo"></span><div class="section" id="documentation-todo">
<span id="todo"></span><h2>Documentation TODO<a class="headerlink" href="#documentation-todo" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><em>Wizzup</em> - Script manager (non technical).</p>
</li>
<li><p class="first"><em>Wizzup</em> - Script manager (technical).</p>
</li>
<li><p class="first">Extend &#8220;Getting Started&#8221;. Include downloading scripts from the manager.</p>
</li>
<li><p class="first">think of good chapters for the complete tutorial. (it should teach basic
stuff, not document all features. script reference is for that purpose)</p>
</li>
<li><p class="first">write a lot more chapters for simba references. There&#8217;s plenty to document.
It may be useful to check <a class="reference external" href="http://wizzup.org/simba/article/4">http://wizzup.org/simba/article/4</a></p>
</li>
<li><p class="first">Features -&gt; Perhaps (interactive) images?</p>
</li>
<li><dl class="first docutils">
<dt>Expand &#8220;Troubleshooting&#8221;</dt>
<dd><ul class="first last simple">
<li>And its subsection.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Expand &#8220;Feature Overview&#8221;</dt>
<dd><ul class="first last simple">
<li>And its subs. There&#8217;s like nothing in them, those are the type
of pages I was talking about. Combine them under feature overview?</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Write lots of examples.</p>
<ul class="simple">
<li>How to use file functions.</li>
<li>How to use DTM functions, etc.</li>
</ul>
</li>
<li><p class="first">Add a section with examples of stuff that is often done / used.</p>
</li>
</ul>
</div>
<span id="document-libmml"></span><div class="section" id="libmml">
<span id="lib-mml"></span><h2>libMML<a class="headerlink" href="#libmml" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-libmml/intro"></span><div class="section" id="libmml">
<h3>libMML<a class="headerlink" href="#libmml" title="Permalink to this headline">¶</a></h3>
<p>libMML is short for the library to the Mufasa Macro Library.</p>
<div class="section" id="why-libmml">
<h4>Why libMML?<a class="headerlink" href="#why-libmml" title="Permalink to this headline">¶</a></h4>
<p>One of the first questions that rise are probably <em>why</em> libMML and <em>what</em> is
libMML exactly?</p>
<p>libMML is a loadable C-like library that provides most of the MML functionality.
For the ones that do not know, MML is the core component for Simba that does all
the <em>computational</em> and <em>algorithmic</em> work. See <a class="reference internal" href="index.html#mmlref"><em>MML Reference</em></a> for more
information.</p>
<p>To summarize, the MML covers:</p>
<blockquote>
<div><ul class="simple">
<li>Targetting specific windows and getting the window information such as
their bitmaps and dimensions.</li>
<li>Controlling the mouse and keyboard.</li>
<li>Finding colours, bitmaps and dtms.</li>
<li>Text recognition (OCR)</li>
<li>Accessing files and sockets in an unified manner</li>
</ul>
</div></blockquote>
<p>Hopefully the <em>what</em> part of the question has mainly been covered by now. If
you&#8217;re literate in computer science the <em>why</em> question has also been answered as
soon as it was mentioned that is was a loadable library - which is also implied
by its name. Exporting the MML into a loadable library allows virtually any
program to load it and just use all the MML functionality.</p>
</div>
<div class="section" id="design-issues">
<h4>Design (issues)<a class="headerlink" href="#design-issues" title="Permalink to this headline">¶</a></h4>
<p>libMML itself should not be too complex. It should simply translate the OOP MML
to a non-OOP C-type library and convert datatypes when required (see below as to
why). libMML is basically just a codebase that calls MML functions and passes
the result along in a slightly different format. In simple cases such as
MoveMouse the integers are simply passed; since there&#8217;s do not differ, but in
the case of arrays of any type we have to copy the arrays to a C format - at
least until MML internally will no longer use Free Pascal (managed) arrays.</p>
<p>As previously mentioned, libMML is a <em>C</em>-type library; this is mentioned
explicitly because MML is written in Free Pascal (Object Pascal) which has quite
a few different datatypes. Strings are typically not compatible, and arrays are
managed in Pascal whereas they are not in C which makes it hard to just <em>pass</em>
the array along. One of the problems we have to cope with when writing libMML is
converting datatypes to C-compatible datatypes. C-compatible datatypes are
supported by most programming languages and thus the best way to go when making
a universal MML library.</p>
</div>
<div class="section" id="libmml-use-cases">
<h4>libMML use cases<a class="headerlink" href="#libmml-use-cases" title="Permalink to this headline">¶</a></h4>
<p>Theoretically libMML can be loaded by any programming language; but typically
each programming languages has it&#8217;s own kind of programming practices and thus
write - again - their own wrapper around libMML. This is what is being done with
<em>pyMML</em>, the python libMML wrapper. It is still as much in development as libMML
is, but the functionality exposed by libMML is succesfully used.</p>
<p>As of writing the pyMML usage looks like this, the passing around of a client
may be removed in a later stage, or at least have it&#8217;s behaviour changed.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DLL</span> <span class="o">=</span> <span class="n">MMLCore</span><span class="p">(</span><span class="s">&#39;../libmml.so&#39;</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">DLL</span><span class="o">.</span><span class="n">dll</span><span class="o">.</span><span class="n">create_client</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Python Client: </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">client</span>
<span class="k">if</span> <span class="n">client</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s">&#39;Could create a client&#39;</span><span class="p">);</span>

<span class="n">c</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="n">DLL</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>


<span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
<span class="k">print</span> <span class="n">ret</span>

<span class="n">ret</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find_all</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="k">print</span> <span class="n">ret</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">Mouse</span><span class="p">(</span><span class="n">DLL</span><span class="p">,</span> <span class="n">client</span><span class="p">)</span>

<span class="k">print</span> <span class="n">m</span><span class="p">[(</span><span class="n">Mouse</span><span class="o">.</span><span class="n">Pos</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Left</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Right</span><span class="p">)]</span>
<span class="n">m</span><span class="p">[(</span><span class="n">Mouse</span><span class="o">.</span><span class="n">Pos</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Right</span><span class="p">)]</span> <span class="o">=</span> <span class="p">((</span><span class="mi">300</span><span class="p">,</span><span class="mi">300</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>

<span class="k">print</span> <span class="n">m</span><span class="o">.</span><span class="n">getButtonStates</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">setPos</span><span class="p">((</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">))</span>

<span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&#39;Done&#39;</span>

<span class="n">m</span><span class="p">[(</span><span class="n">Mouse</span><span class="o">.</span><span class="n">Left</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Right</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Middle</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[</span><span class="bp">False</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)]</span>
<span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">((</span><span class="n">Mouse</span><span class="o">.</span><span class="n">Left</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Right</span><span class="p">),</span> <span class="n">m</span><span class="p">[(</span><span class="n">Mouse</span><span class="o">.</span><span class="n">Left</span><span class="p">,</span> <span class="n">Mouse</span><span class="o">.</span><span class="n">Right</span><span class="p">)]):</span>
    <span class="k">print</span> <span class="n">v</span>
<span class="k">print</span> <span class="n">m</span><span class="o">.</span><span class="n">getPos</span><span class="p">()</span>

<span class="k">del</span> <span class="n">DLL</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<span id="document-pymml"></span><div class="section" id="python-mml">
<span id="py-mml"></span><h2>Python MML<a class="headerlink" href="#python-mml" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-pymml/mouse"></span><div class="section" id="pymml-mouse">
<h3>PyMML Mouse<a class="headerlink" href="#pymml-mouse" title="Permalink to this headline">¶</a></h3>
<p>This is the PyMML Mouse class.</p>
<span class="target" id="module-mouse"></span><dl class="class">
<dt id="mouse.Mouse">
<em class="property">class </em><tt class="descclassname">mouse.</tt><tt class="descname">Mouse</tt><big>(</big><em>MC</em>, <em>cli</em><big>)</big><a class="reference internal" href="_modules/mouse.html#Mouse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mouse.Mouse" title="Permalink to this definition">¶</a></dt>
<dd><p>The MML Mouse object communicates directly with libmml,
but wraps it around a nice and easy to use layer.</p>
<p>It will allow several ways to set mouse positions and
buttons. __getitem__ and __setitem__ are also implemented,
so one can access mouse buttons states and positions with [].</p>
<dl class="method">
<dt id="mouse.Mouse.getButtonStates">
<tt class="descname">getButtonStates</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/mouse.html#Mouse.getButtonStates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mouse.Mouse.getButtonStates" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current states of the mouse buttons.</p>
</dd></dl>

<dl class="method">
<dt id="mouse.Mouse.getPos">
<tt class="descname">getPos</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/mouse.html#Mouse.getPos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mouse.Mouse.getPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current mouse position as a tuple.</p>
</dd></dl>

<dl class="method">
<dt id="mouse.Mouse.setButtonState">
<tt class="descname">setButtonState</tt><big>(</big><em>button</em>, <em>downup</em><big>)</big><a class="reference internal" href="_modules/mouse.html#Mouse.setButtonState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mouse.Mouse.setButtonState" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the states of the mouse buttons.</p>
</dd></dl>

<dl class="method">
<dt id="mouse.Mouse.setPos">
<tt class="descname">setPos</tt><big>(</big><em>pos</em><big>)</big><a class="reference internal" href="_modules/mouse.html#Mouse.setPos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#mouse.Mouse.setPos" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the mouse position to the tuple _pos_.</p>
</dd></dl>

</dd></dl>

</div>
<span id="document-pymml/color"></span><div class="section" id="pymml-color">
<h3>PyMML Color<a class="headerlink" href="#pymml-color" title="Permalink to this headline">¶</a></h3>
<p>This is the PyMML Color class.</p>
<span class="target" id="module-color"></span><dl class="class">
<dt id="color.Color">
<em class="property">class </em><tt class="descclassname">color.</tt><tt class="descname">Color</tt><big>(</big><em>MC</em>, <em>cli</em><big>)</big><a class="reference internal" href="_modules/color.html#Color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color" title="Permalink to this definition">¶</a></dt>
<dd><p>The Color class.</p>
<dl class="method">
<dt id="color.Color.count_color">
<tt class="descname">count_color</tt><big>(</big><em>count</em>, <em>col</em>, <em>box</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.count_color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.count_color" title="Permalink to this definition">¶</a></dt>
<dd><p>Counts color col in box with tol.
Yields integer of count.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.find">
<tt class="descname">find</tt><big>(</big><em>box</em>, <em>color</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.find"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.find" title="Permalink to this definition">¶</a></dt>
<dd><p>find a color in a box, with a specific tolerance.
returns a tuple of the x, y value of a matched color.
None if no color was found.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.find_all">
<tt class="descname">find_all</tt><big>(</big><em>box</em>, <em>color</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.find_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.find_all" title="Permalink to this definition">¶</a></dt>
<dd><p>find all colors in a box, with a specific tolerance.
returned are all the matching points</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.find_area">
<tt class="descname">find_area</tt><big>(</big><em>col</em>, <em>box</em>, <em>min_a</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.find_area"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.find_area" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Finds a colored area in box with min area min_a with a specific</dt>
<dd>tolerance.</dd>
</dl>
<p>Yields a tuple of x, y values of found area.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.find_spiral">
<tt class="descname">find_spiral</tt><big>(</big><em>col</em>, <em>box</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.find_spiral"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.find_spiral" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Find a color in a box, searching in the direction of a spiral, with a</dt>
<dd>specific tolerance.</dd>
</dl>
<p>Yields a tuple of x, y values of found color.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.get">
<tt class="descname">get</tt><big>(</big><em>pt</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets color at pt[0], pt[1].
Yields integer.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.get_tolerance_speed">
<tt class="descname">get_tolerance_speed</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/color.html#Color.get_tolerance_speed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.get_tolerance_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets CTS.
Yields CTS.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.get_tolerance_speed_2_modifiers">
<tt class="descname">get_tolerance_speed_2_modifiers</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/color.html#Color.get_tolerance_speed_2_modifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.get_tolerance_speed_2_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets CTS2 modifiers.
Yields tuple of hue and sat mods.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.set_tolerance_speed">
<tt class="descname">set_tolerance_speed</tt><big>(</big><em>ncts=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.set_tolerance_speed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.set_tolerance_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets CTS to ncts.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.set_tolerance_speed_2_modifiers">
<tt class="descname">set_tolerance_speed_2_modifiers</tt><big>(</big><em>hue=0</em>, <em>sat=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.set_tolerance_speed_2_modifiers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.set_tolerance_speed_2_modifiers" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets CTS2 modifiers with hue, sat.</p>
</dd></dl>

<dl class="method">
<dt id="color.Color.similar_colors">
<tt class="descname">similar_colors</tt><big>(</big><em>col1</em>, <em>col2</em>, <em>tol=0</em><big>)</big><a class="reference internal" href="_modules/color.html#Color.similar_colors"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#color.Color.similar_colors" title="Permalink to this definition">¶</a></dt>
<dd><p>Compares col1 and col2 with tol.
Yields boolean</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-whatis">What Is Simba?</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-whysimba">Why Simba?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#free">Free</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#extensible">Extensible</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#reliable">Reliable</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#cross-platform">Cross Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#fast">Fast</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#open-minded">Open Minded</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#debug-friendly">Debug Friendly</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#well-documented">Well Documented</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-gettingstarted">Getting Started with Simba</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#installing-simba">Installing simba</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#setting-up-srl-4-with-simba">Setting up SRL 4 with Simba</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#setting-up-srl-5-with-simba">Setting up SRL 5 with Simba</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installing-scripts">Installing scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-troubleshooting">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#where-is-the-dtm-editor">Where is the DTM Editor?</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#where-are-my-extensions">Where are my Extensions?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-bugreport">Reporting Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-features">Detailed Feature Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/scriptmanager">Simba Script Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/autoupdate">Updater in Simba</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/exten">Simba Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/settings">Settings Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#simba-settings">Simba settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/ui">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-features/notwellknown">Not Well Known Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-tutorial">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/intro-prog">Introduction to Simba and Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-basics">Simba Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-mouse">Simba Mouse Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-key">Simba Keyboard Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-colour-cts">Simba Colours</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#simba-colour-tolerance-speed">Simba Colour Tolerance Speed</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-bitmap">Simba Bitmaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-dtm">Simba Deformable Template Models (DTM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-tpa">Simba TPointArrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-tutorial/simba-files">Simba Files</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-referencescript">Scripting Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/mouseandkeyboard">Mouse and Keyboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/colourfinding">Colour Finding</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/colourconverting">Colour Conversions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/files">Working with Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/ocr">OCR</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/dtm">Deformable Template Models (DTM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/window">Target Window Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#finding-a-specific-window">Finding a specific window</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#client-area">Client Area</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/web">Internet Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/bitmaps">Bitmaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/sqlite">SQLite Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/string">String Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/tpa">TPointArray Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-scriptref/sound">Multimedia Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-referencemml">MML Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/client">Client Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/iomanager">IOManager Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/finder">TMFinder Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/bitmap">TMufasaBitmap Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/ocr">TMOCR Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#uptext">Uptext</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-mmlref/libmml">libMML</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-referencesimba">Simba Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-simbaref/scriptmanager">Script Manager</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-simbaref/extensions">Writing Simba Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-simbaref/plugins">Writing Simba Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-docdoc">Documentation Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#documentation-system">Documentation system</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#building-the-documentation">Building the documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#writing-documentation">Writing documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-todo">Documentation TODO</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-libmml">libMML</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-libmml/intro">libMML</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html#document-pymml">Python MML</a><ul>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pymml/mouse">PyMML Mouse</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#document-pymml/color">PyMML Color</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="#">Simba 1.0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2013, Merlijn Wajer, Raymond van Venetie.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>